!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"undefined"!=typeof self&&self,e.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=37)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2),o=n(42),u=r(o),s=n(43),c=r(s),l=n(44),f=r(l),h=n(45),_=r(h),d=n(24),v=(r(d),n(46)),p=r(v),E=void 0,m=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.canvas,this._viewport=[0,0,0,0],this._enabledVertexAttribute=[],this.identityMatrix=a.mat4.create(),this._normalMatrix=a.mat3.create(),this._inverseModelViewMatrix=a.mat3.create(),this._modelMatrix=a.mat4.create(),this._matrix=a.mat4.create(),this._matrixStacks=[],this._lastMesh=null,this._useWebGL2=!1,this._hasArrayInstance,this._extArrayInstance,this._hasCheckedExt=!1,a.mat4.identity(this.identityMatrix,this.identityMatrix),this.isMobile=!1,/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(this.isMobile=!0)}return i(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!=e){void 0!==this.canvas&&null!==this.canvas&&this.destroy(),this.canvas=e,this.setSize(window.innerWidth,window.innerHeight),t.useWebgl2=t.useWebgl2||!1;var n=void 0;t.useWebgl2&&(n=this.canvas.getContext("experimental-webgl2",t)||this.canvas.getContext("webgl2",t))?this._useWebGL2=!0:(n=this.canvas.getContext("webgl",t)||this.canvas.getContext("experimental-webgl",t),this._useWebGL2=!1),console.log("Using WebGL 2 ?",this.webgl2),this.initWithGL(n)}else console.error("Canvas not exist")}},{key:"initWithGL",value:function(e){this.canvas||(this.canvas=e.canvas),E=this.gl=e,this.extensions={};for(var t=0;t<p.default.length;t++)this.extensions[p.default[t]]=E.getExtension(p.default[t]);(0,c.default)(),(0,u.default)(E,"OES_vertex_array_object"),(0,u.default)(E,"ANGLE_instanced_arrays"),(0,u.default)(E,"WEBGL_draw_buffers"),this.enable(this.DEPTH_TEST),this.enable(this.CULL_FACE),this.enable(this.BLEND),this.enableAlphaBlending()}},{key:"setViewport",value:function(e,t,n,r){var i=!1;e!==this._viewport[0]&&(i=!0),t!==this._viewport[1]&&(i=!0),n!==this._viewport[2]&&(i=!0),r!==this._viewport[3]&&(i=!0),i&&(E.viewport(e,t,n,r),this._viewport=[e,t,n,r])}},{key:"scissor",value:function(e,t,n,r){E.scissor(e,t,n,r)}},{key:"clear",value:function(e,t,n,r){E.clearColor(e,t,n,r),E.clear(E.COLOR_BUFFER_BIT|E.DEPTH_BUFFER_BIT)}},{key:"cullFace",value:function(e){E.cullFace(e)}},{key:"setMatrices",value:function(e){this.camera=e,this.rotate(this.identityMatrix)}},{key:"useShader",value:function(e){this.shader=e,this.shaderProgram=this.shader.shaderProgram}},{key:"rotate",value:function(e){a.mat4.copy(this._modelMatrix,e),a.mat4.multiply(this._matrix,this.camera.matrix,this._modelMatrix),a.mat3.fromMat4(this._normalMatrix,this._matrix),a.mat3.invert(this._normalMatrix,this._normalMatrix),a.mat3.transpose(this._normalMatrix,this._normalMatrix),a.mat3.fromMat4(this._inverseModelViewMatrix,this._matrix),a.mat3.invert(this._inverseModelViewMatrix,this._inverseModelViewMatrix)}},{key:"draw",value:function(e,t){if(e.length)for(var n=0;n<e.length;n++)this.draw(e[n]);else{e.bind(this.shaderProgram),void 0!==this.camera&&(this.shader.uniform("uProjectionMatrix","mat4",this.camera.projection),this.shader.uniform("uViewMatrix","mat4",this.camera.matrix)),this.shader.uniform("uModelMatrix","mat4",this._modelMatrix),this.shader.uniform("uNormalMatrix","mat3",this._normalMatrix),this.shader.uniform("uModelViewMatrixInverse","mat3",this._inverseModelViewMatrix);var r=e.drawType;void 0!==t&&(r=t),e.isInstanced?E.drawElementsInstanced(e.drawType,e.iBuffer.numItems,E.UNSIGNED_SHORT,0,e.numInstance):r===E.POINTS?E.drawArrays(r,0,e.vertexSize):E.drawElements(r,e.iBuffer.numItems,E.UNSIGNED_SHORT,0),e.unbind()}}},{key:"drawTransformFeedback",value:function(e){var t=e.meshSource,n=e.meshDestination,r=e.numPoints,i=e.transformFeedback;t.bind(this.shaderProgram),n.generateBuffers(this.shaderProgram),E.bindTransformFeedback(E.TRANSFORM_FEEDBACK,i),n.attributes.forEach(function(e,t){E.bindBufferBase(E.TRANSFORM_FEEDBACK_BUFFER,t,e.buffer)}),E.enable(E.RASTERIZER_DISCARD),E.beginTransformFeedback(E.POINTS),E.drawArrays(E.POINTS,0,r),E.endTransformFeedback(),E.disable(E.RASTERIZER_DISCARD),E.useProgram(null),E.bindBuffer(E.ARRAY_BUFFER,null),n.attributes.forEach(function(e,t){E.bindBufferBase(E.TRANSFORM_FEEDBACK_BUFFER,t,null)}),E.bindTransformFeedback(E.TRANSFORM_FEEDBACK,null),t.unbind()}},{key:"setSize",value:function(e,t){this._width=e,this._height=t,this.canvas.width=this._width,this.canvas.height=this._height,this._aspectRatio=this._width/this._height,E&&this.viewport(0,0,this._width,this._height)}},{key:"showExtensions",value:function(){for(var e in console.log("Extensions : ",this.extensions),this.extensions)this.extensions[e]&&console.log(e,":",this.extensions[e])}},{key:"checkExtension",value:function(e){return!!this.extensions[e]}},{key:"getExtension",value:function(e){return this.extensions[e]}},{key:"enableAlphaBlending",value:function(){E.blendFunc(E.SRC_ALPHA,E.ONE_MINUS_SRC_ALPHA)}},{key:"enableAdditiveBlending",value:function(){E.blendFunc(E.ONE,E.ONE)}},{key:"pushMatrix",value:function(){var e=a.mat4.clone(this._modelMatrix);this._matrixStacks.push(e)}},{key:"popMatrix",value:function(){if(0==this._matrixStacks.length)return null;var e=this._matrixStacks.pop();this.rotate(e)}},{key:"enable",value:function(e){E.enable(e)}},{key:"disable",value:function(e){E.disable(e)}},{key:"viewport",value:function(e,t,n,r){this.setViewport(e,t,n,r)}},{key:"destroy",value:function(){if(this.canvas.parentNode)try{this.canvas.parentNode.removeChild(this.canvas)}catch(e){console.log("Error : ",e)}this.canvas=null}},{key:"FLOAT",get:function(){return(0,f.default)()}},{key:"HALF_FLOAT",get:function(){return(0,_.default)()}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"aspectRatio",get:function(){return this._aspectRatio}},{key:"webgl2",get:function(){return this._useWebGL2}}]),e}(),T=new m;t.default=T},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),u=(r=o)&&r.__esModule?r:{default:r},s=(n(47),function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}),c=function(e){return e.slice?e.slice(0):new Float32Array(e)},l=void 0,f=n(9),h=n(48),_={float:"uniform1f",vec2:"uniform2fv",vec3:"uniform3fv",vec4:"uniform4fv",int:"uniform1i",mat3:"uniformMatrix3fv",mat4:"uniformMatrix4fv"},d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,r=arguments[2];(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),l=u.default.gl,this.parameters=[],this.uniformTextures=[],this._varyings=r,t||(t=f),n||(n=f);var i=this._createShaderProgram(t,!0),a=this._createShaderProgram(n,!1);this._attachShaderProgram(i,a)}return a(e,[{key:"bind",value:function(){u.default.shader!==this&&(l.useProgram(this.shaderProgram),u.default.useShader(this),this.uniformTextures=[])}},{key:"uniform",value:function(e,t,n){if("object"!==(void 0===e?"undefined":i(e))){for(var r=_[t]||t,a=!1,o=void 0,u=-1,f=0;f<this.parameters.length;f++)if((o=this.parameters[f]).name===e){a=!0,u=f;break}var h=!1;if(a?(this.shaderProgram[e]=o.uniformLoc,h=o.isNumber):(h="uniform1i"===r||"uniform1f"===r,this.shaderProgram[e]=l.getUniformLocation(this.shaderProgram,e),h?this.parameters.push({name:e,type:r,value:n,uniformLoc:this.shaderProgram[e],isNumber:h}):this.parameters.push({name:e,type:r,value:c(n),uniformLoc:this.shaderProgram[e],isNumber:h}),u=this.parameters.length-1),this.parameters[u].uniformLoc)if(-1===r.indexOf("Matrix"))if(h){var d=this.parameters[u].value!==n||!a;d&&(l[r](this.shaderProgram[e],n),this.parameters[u].value=n)}else s(this.parameters[u].value,n)&&a||(l[r](this.shaderProgram[e],n),this.parameters[u].value=c(n));else s(this.parameters[u].value,n)&&a||(l[r](this.shaderProgram[e],!1,n),this.parameters[u].value=c(n))}else this.uniformObject(e)}},{key:"uniformObject",value:function(t){for(var n in t){var r=t[n],i=e.getUniformType(r);if(r.concat&&r[0].concat){for(var a=[],o=0;o<r.length;o++)a=a.concat(r[o]);r=a}this.uniform(n,i,r)}}},{key:"_createShaderProgram",value:function(e,t){var n=t?u.default.VERTEX_SHADER:u.default.FRAGMENT_SHADER,r=l.createShader(n);return l.shaderSource(r,e),l.compileShader(r),l.getShaderParameter(r,l.COMPILE_STATUS)?r:(console.warn("Error in Shader : ",l.getShaderInfoLog(r)),console.log(function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(e)),null)}},{key:"_attachShaderProgram",value:function(e,t){this.shaderProgram=l.createProgram(),l.attachShader(this.shaderProgram,e),l.attachShader(this.shaderProgram,t),l.deleteShader(e),l.deleteShader(t),this._varyings&&(console.log("Transform feedback setup : ",this._varyings),l.transformFeedbackVaryings(this.shaderProgram,this._varyings,l.SEPARATE_ATTRIBS)),l.linkProgram(this.shaderProgram)}}]),e}();d.getUniformType=function(e){var t=!!e.concat;return t?function(e){return 9===e.length?"uniformMatrix3fv":16===e.length?"uniformMatrix4fv":"vec"+e.length}(e[0].concat?e[0]:e):"float"},t.default=d},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.vec4=t.vec3=t.vec2=t.quat2=t.quat=t.mat4=t.mat3=t.mat2d=t.mat2=t.glMatrix=void 0;var i=n(3),a=r(i),o=n(38),u=r(o),s=n(39),c=r(s),l=n(18),f=r(l),h=n(19),_=r(h),d=n(20),v=r(d),p=n(40),E=r(p),m=n(41),T=r(m),b=n(21),y=r(b),R=n(22),g=r(R);t.glMatrix=a,t.mat2=u,t.mat2d=c,t.mat3=f,t.mat4=_,t.quat=v,t.quat2=E,t.vec2=T,t.vec3=y,t.vec4=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setMatrixArrayType=function(e){t.ARRAY_TYPE=e},t.toRadian=function(e){return e*i},t.equals=function(e,t){return Math.abs(e-t)<=r*Math.max(1,Math.abs(e),Math.abs(t))};var r=t.EPSILON=1e-6,i=(t.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,t.RANDOM=Math.random,Math.PI/180)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._delayTasks=[],this._nextTasks=[],this._deferTasks=[],this._highTasks=[],this._usurpTask=[],this._enterframeTasks=[],this._idTable=0,this._startTime=(new Date).getTime(),this._deltaTime=0,this._internalTime=0,this._isPaused=!1,this._loop()}return r(e,[{key:"addEF",value:function(e,t){t=t||[];var n=this._idTable;return this._enterframeTasks[n]={func:e,params:t},this._idTable++,n}},{key:"removeEF",value:function(e){return void 0!==this._enterframeTasks[e]&&(this._enterframeTasks[e]=null),-1}},{key:"delay",value:function(e,t,n){var r=(new Date).getTime(),i={func:e,params:t,delay:n,time:r};this._delayTasks.push(i)}},{key:"defer",value:function(e,t){var n={func:e,params:t};this._deferTasks.push(n)}},{key:"next",value:function(e,t){var n={func:e,params:t};this._nextTasks.push(n)}},{key:"usurp",value:function(e,t){var n={func:e,params:t};this._usurpTask.push(n)}},{key:"pause",value:function(){this._isPaused=!0}},{key:"advance",value:function(){this._internalTime+=1/60}},{key:"resume",value:function(){this._isPaused=!1}},{key:"_process",value:function(){var e=0,t=void 0,n=void 0;for(e=0;e<this._enterframeTasks.length;e++)null!==(t=this._enterframeTasks[e])&&void 0!==t&&t.func(t.params);for(;this._highTasks.length>0;)(t=this._highTasks.pop()).func(t.params);var r=(new Date).getTime(),i=this._deltaTime;for(this._deltaTime=(r-this._startTime)/1e3,e=0;e<this._delayTasks.length;e++)t=this._delayTasks[e],r-t.time>t.delay&&(t.func(t.params),this._delayTasks.splice(e,1));for(r=(new Date).getTime(),this._deltaTime=(r-this._startTime)/1e3,n=1e3/60;this._deferTasks.length>0;){if(t=this._deferTasks.shift(),!((new Date).getTime()-r<n)){this._deferTasks.unshift(t);break}t.func(t.params)}for(r=(new Date).getTime(),this._deltaTime=(r-this._startTime)/1e3,n=1e3/60;this._usurpTask.length>0;)t=this._usurpTask.shift(),(new Date).getTime()-r<n&&t.func(t.params);this._highTasks=this._highTasks.concat(this._nextTasks),this._nextTasks=[],this._usurpTask=[],this._isPaused||(this._internalTime+=this._deltaTime-i)}},{key:"_loop",value:function(){var e=this;this._process(),window.requestAnimationFrame(function(){return e._loop()})}},{key:"intervalTime",get:function(){return this._internalTime}},{key:"deltaTime",get:function(){return this._deltaTime}}]),e}(),a=new i;t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=r(a),u=n(2),s=n(24),c=r(s),l=void 0,f=function(e){var t=void 0;return void 0!==e.buffer?t=e.buffer:(t=l.createBuffer(),e.buffer=t),t},h=function(e,t){for(var n=[],r=0;r<e.length;r+=t){for(var i=[],a=0;a<t;a++)i.push(e[r+a]);n.push(i)}return n},_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),l=o.default.gl,this.drawType=t,this._attributes=[],this._numInstance=-1,this._enabledVertexAttribute=[],this._indices=[],this._faces=[],this._bufferChanged=[],this._hasIndexBufferChanged=!1,this._hasVAO=!1,this._isInstanced=!1,this._extVAO=!!o.default.gl.createVertexArray,this._useVAO=!!this._extVAO&&n}return i(e,[{key:"bufferVertex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:35044;return this.bufferData(e,"aVertexPosition",3,t),this.normals.length<this.vertices.length&&this.bufferNormal(e,t),this}},{key:"bufferTexCoord",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:35044;return this.bufferData(e,"aTextureCoord",2,t),this}},{key:"bufferNormal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:35044;return this.bufferData(e,"aNormal",3,t),this}},{key:"bufferIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._drawType=t?l.DYNAMIC_DRAW:l.STATIC_DRAW,this._indices=new Uint16Array(e),this._numItems=this._indices.length,this}},{key:"bufferFlattenData",value:function(e,t,n){var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4],h(e,n));return this.bufferData(r,t,n,35044,!1),this}},{key:"bufferData",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:35044,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=0,o=r,u=[];for(n||(n=e[0].length),this._isInstanced=i||this._isInstanced,a=0;a<e.length;a++)for(var s=0;s<e[a].length;s++)u.push(e[a][s]);var c=new Float32Array(u),l=this.getAttribute(t);return l?(l.itemSize=n,l.dataArray=c,l.source=e):this._attributes.push({name:t,source:e,itemSize:n,drawType:o,dataArray:c,isInstanced:i}),this._bufferChanged.push(t),this}},{key:"bufferInstance",value:function(e,t){if(o.default.gl.vertexAttribDivisor){var n=e[0].length;this._numInstance=e.length,this.bufferData(e,t,n,35044,!0)}else console.error("Extension : ANGLE_instanced_arrays is not supported with this device !")}},{key:"bind",value:function(e){this.generateBuffers(e),this.hasVAO?l.bindVertexArray(this.vao):(this.attributes.forEach(function(e){l.bindBuffer(l.ARRAY_BUFFER,e.buffer);var t=e.attrPosition;l.vertexAttribPointer(t,e.itemSize,l.FLOAT,!1,0,0),e.isInstanced&&l.vertexAttribDivisor(t,1)}),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,this.iBuffer))}},{key:"generateBuffers",value:function(e){var t=this;0!=this._bufferChanged.length&&(this._useVAO?(this._vao||(this._vao=l.createVertexArray()),l.bindVertexArray(this._vao),this._attributes.forEach(function(n){if(-1!==t._bufferChanged.indexOf(n.name)){var r=f(n);l.bindBuffer(l.ARRAY_BUFFER,r),l.bufferData(l.ARRAY_BUFFER,n.dataArray,n.drawType);var i=(0,c.default)(l,e,n.name);l.enableVertexAttribArray(i),l.vertexAttribPointer(i,n.itemSize,l.FLOAT,!1,0,0),n.attrPosition=i,n.isInstanced&&l.vertexAttribDivisor(i,1)}}),this._updateIndexBuffer(),l.bindVertexArray(null),this._hasVAO=!0):(this._attributes.forEach(function(n){if(-1!==t._bufferChanged.indexOf(n.name)){var r=f(n);l.bindBuffer(l.ARRAY_BUFFER,r),l.bufferData(l.ARRAY_BUFFER,n.dataArray,n.drawType);var i=(0,c.default)(l,e,n.name);l.enableVertexAttribArray(i),l.vertexAttribPointer(i,n.itemSize,l.FLOAT,!1,0,0),n.attrPosition=i,n.isInstanced&&l.vertexAttribDivisor(i,1)}}),this._updateIndexBuffer()),this._hasIndexBufferChanged=!1,this._bufferChanged=[])}},{key:"unbind",value:function(){this._useVAO&&l.bindVertexArray(null),this._attributes.forEach(function(e){e.isInstanced&&l.vertexAttribDivisor(e.attrPosition,0)})}},{key:"_updateIndexBuffer",value:function(){this._hasIndexBufferChanged||(this.iBuffer||(this.iBuffer=l.createBuffer()),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,this.iBuffer),l.bufferData(l.ELEMENT_ARRAY_BUFFER,this._indices,this._drawType),this.iBuffer.itemSize=1,this.iBuffer.numItems=this._numItems)}},{key:"computeNormals",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.generateFaces(),e?this._computeFaceNormals():this._computeVertexNormals()}},{key:"_computeFaceNormals",value:function(){for(var e=void 0,t=void 0,n=[],r=0;r<this._indices.length;r+=3){e=r/3;var i=(t=this._faces[e]).normal;n[t.indices[0]]=i,n[t.indices[1]]=i,n[t.indices[2]]=i}this.bufferNormal(n)}},{key:"_computeVertexNormals",value:function(){for(var e=void 0,t=u.vec3.create(),n=[],r=this.vertices,i=0;i<r.length;i++){u.vec3.set(t,0,0,0);for(var a=0;a<this._faces.length;a++)(e=this._faces[a]).indices.indexOf(i)>=0&&(t[0]+=e.normal[0],t[1]+=e.normal[1],t[2]+=e.normal[2]);u.vec3.normalize(t,t),n.push([t[0],t[1],t[2]])}this.bufferNormal(n)}},{key:"generateFaces",value:function(){for(var e=void 0,t=void 0,n=void 0,r=void 0,i=void 0,a=void 0,o=(u.vec3.create(),u.vec3.create(),u.vec3.create(),this.vertices),s=0;s<this._indices.length;s+=3){e=this._indices[s],t=this._indices[s+1],n=this._indices[s+2],r=o[e],i=o[t],a=o[n];var c={indices:[e,t,n],vertices:[r,i,a]};this._faces.push(c)}}},{key:"getAttribute",value:function(e){return this._attributes.find(function(t){return t.name===e})}},{key:"getSource",value:function(e){var t=this.getAttribute(e);return t?t.source:[]}},{key:"vertices",get:function(){return this.getSource("aVertexPosition")}},{key:"normals",get:function(){return this.getSource("aNormal")}},{key:"coords",get:function(){return this.getSource("aTextureCoord")}},{key:"indices",get:function(){return this._indices}},{key:"vertexSize",get:function(){return this.vertices.length}},{key:"faces",get:function(){return this._faces}},{key:"attributes",get:function(){return this._attributes}},{key:"hasVAO",get:function(){return this._hasVAO}},{key:"vao",get:function(){return this._vao}},{key:"numInstance",get:function(){return this._numInstance}},{key:"isInstanced",get:function(){return this._isInstanced}}]),e}();t.default=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=(r=a)&&r.__esModule?r:{default:r},u=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._mesh=t,this._shader=n}return i(e,[{key:"draw",value:function(){this._shader.bind(),o.default.draw(this.mesh)}},{key:"mesh",get:function(){return this._mesh}},{key:"shader",get:function(){return this._shader}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(5),a=(r=i)&&r.__esModule?r:{default:r},o={},u=void 0;o.plane=function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"xy",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4,o=[],u=[],s=[],c=[],l=e/n,f=t/n,h=1/n,_=.5*-e,d=.5*-t,v=0,p=0;p<n;p++)for(var E=0;E<n;E++){var m=l*p+_,T=f*E+d,b=p/n,y=E/n;"xz"===r?(o.push([m,0,T+f]),o.push([m+l,0,T+f]),o.push([m+l,0,T]),o.push([m,0,T]),u.push([b,1-(y+h)]),u.push([b+h,1-(y+h)]),u.push([b+h,1-y]),u.push([b,1-y]),c.push([0,1,0]),c.push([0,1,0]),c.push([0,1,0]),c.push([0,1,0])):"yz"===r?(o.push([0,T,m]),o.push([0,T,m+l]),o.push([0,T+f,m+l]),o.push([0,T+f,m]),u.push([b,y]),u.push([b+h,y]),u.push([b+h,y+h]),u.push([b,y+h]),c.push([1,0,0]),c.push([1,0,0]),c.push([1,0,0]),c.push([1,0,0])):(o.push([m,T,0]),o.push([m+l,T,0]),o.push([m+l,T+f,0]),o.push([m,T+f,0]),u.push([b,y]),u.push([b+h,y]),u.push([b+h,y+h]),u.push([b,y+h]),c.push([0,0,1]),c.push([0,0,1]),c.push([0,0,1]),c.push([0,0,1])),s.push(4*v+0),s.push(4*v+1),s.push(4*v+2),s.push(4*v+0),s.push(4*v+2),s.push(4*v+3),v++}var R=new a.default(i);return R.bufferVertex(o),R.bufferTexCoord(u),R.bufferIndex(s),R.bufferNormal(c),R},o.sphere=function(e,t){function n(n,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=n/t*Math.PI-.5*Math.PI,o=r/t*Math.PI*2,u=i?1:e,s=[];s[1]=Math.sin(a)*u;var c=Math.cos(a)*u;return s[0]=Math.cos(o)*c,s[2]=Math.sin(o)*c,s[0]=Math.floor(1e4*s[0])/1e4,s[1]=Math.floor(1e4*s[1])/1e4,s[2]=Math.floor(1e4*s[2])/1e4,s}for(var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,o=[],u=[],s=[],c=[],l=1/t,f=0,h=0;h<t;h++)for(var _=0;_<t;_++){o.push(n(h,_)),o.push(n(h+1,_)),o.push(n(h+1,_+1)),o.push(n(h,_+1)),c.push(n(h,_,!0)),c.push(n(h+1,_,!0)),c.push(n(h+1,_+1,!0)),c.push(n(h,_+1,!0));var d=_/t,v=h/t;u.push([1-d,v]),u.push([1-d,v+l]),u.push([1-d-l,v+l]),u.push([1-d-l,v]),s.push(4*f+0),s.push(4*f+1),s.push(4*f+2),s.push(4*f+0),s.push(4*f+2),s.push(4*f+3),f++}r&&s.reverse();var p=new a.default(i);return p.bufferVertex(o),p.bufferTexCoord(u),p.bufferIndex(s),p.bufferNormal(c),p},o.cube=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,i=e/2,o=(t=t||e)/2,u=(n=n||e)/2,s=[],c=[],l=[],f=[],h=0;s.push([-i,o,-u]),s.push([i,o,-u]),s.push([i,-o,-u]),s.push([-i,-o,-u]),f.push([0,0,-1]),f.push([0,0,-1]),f.push([0,0,-1]),f.push([0,0,-1]),c.push([0,0]),c.push([1,0]),c.push([1,1]),c.push([0,1]),l.push(4*h+0),l.push(4*h+1),l.push(4*h+2),l.push(4*h+0),l.push(4*h+2),l.push(4*h+3),h++,s.push([i,o,-u]),s.push([i,o,u]),s.push([i,-o,u]),s.push([i,-o,-u]),f.push([1,0,0]),f.push([1,0,0]),f.push([1,0,0]),f.push([1,0,0]),c.push([0,0]),c.push([1,0]),c.push([1,1]),c.push([0,1]),l.push(4*h+0),l.push(4*h+1),l.push(4*h+2),l.push(4*h+0),l.push(4*h+2),l.push(4*h+3),h++,s.push([i,o,u]),s.push([-i,o,u]),s.push([-i,-o,u]),s.push([i,-o,u]),f.push([0,0,1]),f.push([0,0,1]),f.push([0,0,1]),f.push([0,0,1]),c.push([0,0]),c.push([1,0]),c.push([1,1]),c.push([0,1]),l.push(4*h+0),l.push(4*h+1),l.push(4*h+2),l.push(4*h+0),l.push(4*h+2),l.push(4*h+3),h++,s.push([-i,o,u]),s.push([-i,o,-u]),s.push([-i,-o,-u]),s.push([-i,-o,u]),f.push([-1,0,0]),f.push([-1,0,0]),f.push([-1,0,0]),f.push([-1,0,0]),c.push([0,0]),c.push([1,0]),c.push([1,1]),c.push([0,1]),l.push(4*h+0),l.push(4*h+1),l.push(4*h+2),l.push(4*h+0),l.push(4*h+2),l.push(4*h+3),h++,s.push([i,o,-u]),s.push([-i,o,-u]),s.push([-i,o,u]),s.push([i,o,u]),f.push([0,1,0]),f.push([0,1,0]),f.push([0,1,0]),f.push([0,1,0]),c.push([0,0]),c.push([1,0]),c.push([1,1]),c.push([0,1]),l.push(4*h+0),l.push(4*h+1),l.push(4*h+2),l.push(4*h+0),l.push(4*h+2),l.push(4*h+3),h++,s.push([i,-o,u]),s.push([-i,-o,u]),s.push([-i,-o,-u]),s.push([i,-o,-u]),f.push([0,-1,0]),f.push([0,-1,0]),f.push([0,-1,0]),f.push([0,-1,0]),c.push([0,0]),c.push([1,0]),c.push([1,1]),c.push([0,1]),l.push(4*h+0),l.push(4*h+1),l.push(4*h+2),l.push(4*h+0),l.push(4*h+2),l.push(4*h+3),h++;var _=new a.default(r);return _.bufferVertex(s),_.bufferTexCoord(c),_.bufferIndex(l),_.bufferNormal(f),_},o.skybox=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=[],r=[],i=[],o=[],u=0;n.push([e,e,-e]),n.push([-e,e,-e]),n.push([-e,-e,-e]),n.push([e,-e,-e]),o.push([0,0,-1]),o.push([0,0,-1]),o.push([0,0,-1]),o.push([0,0,-1]),r.push([0,0]),r.push([1,0]),r.push([1,1]),r.push([0,1]),i.push(4*u+0),i.push(4*u+1),i.push(4*u+2),i.push(4*u+0),i.push(4*u+2),i.push(4*u+3),u++,n.push([e,-e,-e]),n.push([e,-e,e]),n.push([e,e,e]),n.push([e,e,-e]),o.push([1,0,0]),o.push([1,0,0]),o.push([1,0,0]),o.push([1,0,0]),r.push([0,0]),r.push([1,0]),r.push([1,1]),r.push([0,1]),i.push(4*u+0),i.push(4*u+1),i.push(4*u+2),i.push(4*u+0),i.push(4*u+2),i.push(4*u+3),u++,n.push([-e,e,e]),n.push([e,e,e]),n.push([e,-e,e]),n.push([-e,-e,e]),o.push([0,0,1]),o.push([0,0,1]),o.push([0,0,1]),o.push([0,0,1]),r.push([0,0]),r.push([1,0]),r.push([1,1]),r.push([0,1]),i.push(4*u+0),i.push(4*u+1),i.push(4*u+2),i.push(4*u+0),i.push(4*u+2),i.push(4*u+3),u++,n.push([-e,-e,e]),n.push([-e,-e,-e]),n.push([-e,e,-e]),n.push([-e,e,e]),o.push([-1,0,0]),o.push([-1,0,0]),o.push([-1,0,0]),o.push([-1,0,0]),r.push([0,0]),r.push([1,0]),r.push([1,1]),r.push([0,1]),i.push(4*u+0),i.push(4*u+1),i.push(4*u+2),i.push(4*u+0),i.push(4*u+2),i.push(4*u+3),u++,n.push([e,e,e]),n.push([-e,e,e]),n.push([-e,e,-e]),n.push([e,e,-e]),o.push([0,1,0]),o.push([0,1,0]),o.push([0,1,0]),o.push([0,1,0]),r.push([0,0]),r.push([1,0]),r.push([1,1]),r.push([0,1]),i.push(4*u+0),i.push(4*u+1),i.push(4*u+2),i.push(4*u+0),i.push(4*u+2),i.push(4*u+3),u++,n.push([e,-e,-e]),n.push([-e,-e,-e]),n.push([-e,-e,e]),n.push([e,-e,e]),o.push([0,-1,0]),o.push([0,-1,0]),o.push([0,-1,0]),o.push([0,-1,0]),r.push([0,0]),r.push([1,0]),r.push([1,1]),r.push([0,1]),i.push(4*u+0),i.push(4*u+1),i.push(4*u+2),i.push(4*u+0),i.push(4*u+2),i.push(4*u+3);var s=new a.default(t);return s.bufferVertex(n),s.bufferTexCoord(r),s.bufferIndex(i),s.bufferNormal(o),s},o.bigTriangle=function(){return u||((u=new a.default).bufferData([[-1,-1],[-1,4],[4,-1]],"aPosition",2),u.bufferIndex([2,1,0])),u},t.default=o},function(e,t,n){"use strict";e.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6403:"RED",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33321:"R8",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},function(e,t){e.exports="// basic.vert\n\n#define SHADER_NAME BASIC_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvoid main(void) {\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);\n    vTextureCoord = aTextureCoord;\n    vNormal = aNormal;\n}"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(4),o=(r=a)&&r.__esModule?r:{default:r},u=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.easing=r,this._value=t,this._targetValue=t,this._efIndex=o.default.addEF(function(){return n._update()})}return i(e,[{key:"_update",value:function(){this._checkLimit(),this._value+=(this._targetValue-this._value)*this.easing,Math.abs(this._targetValue-this._value)<1e-4&&(this._value=this._targetValue)}},{key:"setTo",value:function(e){this._targetValue=this._value=e}},{key:"add",value:function(e){this._targetValue+=e}},{key:"limit",value:function(e,t){e>t?this.limit(t,e):(this._min=e,this._max=t,this._checkLimit())}},{key:"_checkLimit",value:function(){void 0!==this._min&&this._targetValue<this._min&&(this._targetValue=this._min),void 0!==this._max&&this._targetValue>this._max&&(this._targetValue=this._max)}},{key:"destroy",value:function(){o.default.removeEF(this._efIndex)}},{key:"value",set:function(e){this._targetValue=e},get:function(){return this._value}},{key:"targetValue",get:function(){return this._targetValue}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),a=i.vec3.create(),o=i.vec3.create(),u=i.vec3.create(),s=i.vec3.create(),c=i.vec3.create(),l=i.vec3.create(),f=i.vec3.create(),h=i.vec3.create(),_=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.origin=i.vec3.clone(t),this.direction=i.vec3.clone(n)}return r(e,[{key:"at",value:function(e){return i.vec3.copy(s,this.direction),i.vec3.scale(s,s,e),i.vec3.add(s,s,this.origin),s}},{key:"lookAt",value:function(e){i.vec3.sub(this.direction,e,this.origin),i.vec3.normalize(this.origin,this.origin)}},{key:"closestPointToPoint",value:function(e){var t=i.vec3.create();i.vec3.sub(e,this.origin);var n=i.vec3.dot(t,this.direction);return n<0?i.vec3.clone(this.origin):(i.vec3.copy(t,this.direction),i.vec3.scale(t,t,n),i.vec3.add(t,t,this.origin),t)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=i.vec3.create();i.vec3.sub(t,e,this.origin);var n=i.vec3.dot(t,this.direction);return n<0?i.vec3.squaredDistance(this.origin,e):(i.vec3.copy(t,this.direction),i.vec3.scale(t,t,n),i.vec3.add(t,t,this.origin),i.vec3.squaredDistance(t,e))}},{key:"intersectsSphere",value:function(e,t){return this.distanceToPoint(e)<=t}},{key:"intersectSphere",value:function(e,t){var n=i.vec3.create();i.vec3.sub(n,e,this.origin);var r=i.vec3.dot(n,this.direction),a=i.vec3.dot(n,n)-r*r,o=t*t;if(a>o)return null;var u=Math.sqrt(o-a),s=r-u,c=r+u;return s<0&&c<0?null:s<0?this.at(c):this.at(s)}},{key:"distanceToPlane",value:function(e,t){i.vec3.dot(t,this.direction)}},{key:"intersectTriangle",value:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];i.vec3.copy(a,e),i.vec3.copy(o,t),i.vec3.copy(u,n),i.vec3.sub(c,o,a),i.vec3.sub(l,u,a),i.vec3.cross(f,c,l);var s=i.vec3.dot(this.direction,f),_=void 0;if(s>0){if(r)return null;_=1}else{if(!(s<0))return null;_=-1,s=-s}i.vec3.sub(h,this.origin,a),i.vec3.cross(l,h,l);var d=_*i.vec3.dot(this.direction,l);if(d<0)return null;i.vec3.cross(c,c,h);var v=_*i.vec3.dot(this.direction,c);if(v<0)return null;if(d+v>s)return null;var p=-_*i.vec3.dot(h,f);return p<0?null:this.at(p/s)}}]),e}();t.default=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),a=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._matrix=i.mat4.create(),this._quat=i.quat.create(),this._orientation=i.mat4.create(),this._projection=i.mat4.create(),this.position=vec3.create()}return r(e,[{key:"lookAt",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,1,0];this._eye=vec3.clone(e),this._center=vec3.clone(t),vec3.copy(this.position,e),i.mat4.identity(this._matrix),i.mat4.lookAt(this._matrix,e,t,n)}},{key:"setFromOrientation",value:function(e,t,n,r){i.quat.set(this._quat,e,t,n,r),i.mat4.fromQuat(this._orientation,this._quat),i.mat4.translate(this._matrix,this._orientation,this.positionOffset)}},{key:"setProjection",value:function(e){this._projection=i.mat4.clone(e)}},{key:"setView",value:function(e){this._matrix=i.mat4.clone(e)}},{key:"setFromViewProj",value:function(e,t){this.setView(e),this.setProjection(t)}},{key:"matrix",get:function(){return this._matrix}},{key:"viewMatrix",get:function(){return this._matrix}},{key:"projection",get:function(){return this._projection}},{key:"projectionMatrix",get:function(){return this._projection}},{key:"eye",get:function(){return this._eye}},{key:"center",get:function(){return this._center}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(12),o=r(a),u=n(11),s=r(u),c=n(2),l=c.mat4.create(),f=c.vec3.create(),h=function(e){function t(e,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e&&a.setPerspective(e,n,r,i),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"setPerspective",value:function(e,t,n,r){this._fov=e,this._near=n,this._far=r,this._aspectRatio=t,c.mat4.perspective(this._projection,e,t,n,r)}},{key:"setAspectRatio",value:function(e){this._aspectRatio=e,c.mat4.perspective(this.projection,this._fov,e,this._near,this._far)}},{key:"generateRay",value:function(e,t){var n=this.projectionMatrix,r=this.viewMatrix;return c.mat4.multiply(l,n,r),c.mat4.invert(l,l),c.vec3.transformMat4(f,e,l),c.vec3.sub(f,f,this.position),c.vec3.normalize(f,f),t?(t.origin=this.position,t.direction=f):t=new s.default(this.position,f),t}}]),t}(o.default);t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._req=new XMLHttpRequest,this._req.addEventListener("load",function(e){return t._onLoaded(e)}),this._req.addEventListener("progress",function(e){return t._onProgress(e)}),n&&(this._req.responseType="arraybuffer")}return r(e,[{key:"load",value:function(e,t){console.log("Loading : ",e),this._callback=t,this._req.open("GET",e),this._req.send()}},{key:"_onLoaded",value:function(){this._callback(this._req.response)}},{key:"_onProgress",value:function(){}}]),e}();t.default=i},function(e,t){e.exports="// bigTriangle.vert\n\n#define SHADER_NAME BIG_TRIANGLE_VERTEX\n\nprecision mediump float;\n#define GLSLIFY 1\nattribute vec2 aPosition;\nvarying vec2 vTextureCoord;\n\nvoid main(void) {\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n    vTextureCoord = aPosition * .5 + .5;\n}"},function(e,t){e.exports="// copy.frag\n\n#define SHADER_NAME COPY_FRAGMENT\n\nprecision mediump float;\n#define GLSLIFY 1\n\nvarying vec2 vTextureCoord;\nuniform sampler2D texture;\n\nvoid main(void) {\n    gl_FragColor = texture2D(texture, vTextureCoord);\n}"},function(e,t){e.exports="// simpleColor.frag\n\n#define SHADER_NAME SIMPLE_COLOR\n\nprecision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 color;\nuniform float opacity;\n\nvoid main(void) {\n    gl_FragColor = vec4(color, opacity);\n}"},function(e,t,n){"use strict";function r(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],u=t[4],s=t[5],c=t[6],l=t[7],f=t[8],h=n[0],_=n[1],d=n[2],v=n[3],p=n[4],E=n[5],m=n[6],T=n[7],b=n[8];return e[0]=h*r+_*o+d*c,e[1]=h*i+_*u+d*l,e[2]=h*a+_*s+d*f,e[3]=v*r+p*o+E*c,e[4]=v*i+p*u+E*l,e[5]=v*a+p*s+E*f,e[6]=m*r+T*o+b*c,e[7]=m*i+T*u+b*l,e[8]=m*a+T*s+b*f,e}function i(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}Object.defineProperty(t,"__esModule",{value:!0}),t.sub=t.mul=void 0,t.create=function(){var e=new o.ARRAY_TYPE(9);return o.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},t.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},t.clone=function(e){var t=new o.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},t.fromValues=function(e,t,n,r,i,a,u,s,c){var l=new o.ARRAY_TYPE(9);return l[0]=e,l[1]=t,l[2]=n,l[3]=r,l[4]=i,l[5]=a,l[6]=u,l[7]=s,l[8]=c,l},t.set=function(e,t,n,r,i,a,o,u,s,c){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e[6]=u,e[7]=s,e[8]=c,e},t.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},t.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},t.invert=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],u=t[5],s=t[6],c=t[7],l=t[8],f=l*o-u*c,h=-l*a+u*s,_=c*a-o*s,d=n*f+r*h+i*_;return d?(d=1/d,e[0]=f*d,e[1]=(-l*r+i*c)*d,e[2]=(u*r-i*o)*d,e[3]=h*d,e[4]=(l*n-i*s)*d,e[5]=(-u*n+i*a)*d,e[6]=_*d,e[7]=(-c*n+r*s)*d,e[8]=(o*n-r*a)*d,e):null},t.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],u=t[5],s=t[6],c=t[7],l=t[8];return e[0]=o*l-u*c,e[1]=i*c-r*l,e[2]=r*u-i*o,e[3]=u*s-a*l,e[4]=n*l-i*s,e[5]=i*a-n*u,e[6]=a*c-o*s,e[7]=r*s-n*c,e[8]=n*o-r*a,e},t.determinant=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],u=e[6],s=e[7],c=e[8];return t*(c*a-o*s)+n*(-c*i+o*u)+r*(s*i-a*u)},t.multiply=r,t.translate=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],u=t[4],s=t[5],c=t[6],l=t[7],f=t[8],h=n[0],_=n[1];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=u,e[5]=s,e[6]=h*r+_*o+c,e[7]=h*i+_*u+l,e[8]=h*a+_*s+f,e},t.rotate=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],u=t[4],s=t[5],c=t[6],l=t[7],f=t[8],h=Math.sin(n),_=Math.cos(n);return e[0]=_*r+h*o,e[1]=_*i+h*u,e[2]=_*a+h*s,e[3]=_*o-h*r,e[4]=_*u-h*i,e[5]=_*s-h*a,e[6]=c,e[7]=l,e[8]=f,e},t.scale=function(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},t.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},t.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},t.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,u=r+r,s=i+i,c=n*o,l=r*o,f=r*u,h=i*o,_=i*u,d=i*s,v=a*o,p=a*u,E=a*s;return e[0]=1-f-d,e[3]=l-E,e[6]=h+p,e[1]=l+E,e[4]=1-c-d,e[7]=_-v,e[2]=h-p,e[5]=_+v,e[8]=1-c-f,e},t.normalFromMat4=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],u=t[5],s=t[6],c=t[7],l=t[8],f=t[9],h=t[10],_=t[11],d=t[12],v=t[13],p=t[14],E=t[15],m=n*u-r*o,T=n*s-i*o,b=n*c-a*o,y=r*s-i*u,R=r*c-a*u,g=i*c-a*s,M=l*v-f*d,x=l*p-h*d,A=l*E-_*d,P=f*p-h*v,O=f*E-_*v,w=h*E-_*p,S=m*w-T*O+b*P+y*A-R*x+g*M;return S?(S=1/S,e[0]=(u*w-s*O+c*P)*S,e[1]=(s*A-o*w-c*x)*S,e[2]=(o*O-u*A+c*M)*S,e[3]=(i*O-r*w-a*P)*S,e[4]=(n*w-i*A+a*x)*S,e[5]=(r*A-n*O-a*M)*S,e[6]=(v*g-p*R+E*y)*S,e[7]=(p*b-d*g-E*T)*S,e[8]=(d*R-v*b+E*m)*S,e):null},t.projection=function(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e},t.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e},t.subtract=i,t.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e},t.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},t.equals=function(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],l=e[7],f=e[8],h=t[0],_=t[1],d=t[2],v=t[3],p=t[4],E=t[5],m=t[6],T=t[7],b=t[8];return Math.abs(n-h)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-_)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(i-d)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(a-v)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(u-p)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))&&Math.abs(s-E)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(c-m)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(m))&&Math.abs(l-T)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(f-b)<=o.EPSILON*Math.max(1,Math.abs(f),Math.abs(b))};var a=n(3),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a);t.mul=r,t.sub=i},function(e,t,n){"use strict";function r(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function i(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],u=t[4],s=t[5],c=t[6],l=t[7],f=t[8],h=t[9],_=t[10],d=t[11],v=t[12],p=t[13],E=t[14],m=t[15],T=n[0],b=n[1],y=n[2],R=n[3];return e[0]=T*r+b*u+y*f+R*v,e[1]=T*i+b*s+y*h+R*p,e[2]=T*a+b*c+y*_+R*E,e[3]=T*o+b*l+y*d+R*m,T=n[4],b=n[5],y=n[6],R=n[7],e[4]=T*r+b*u+y*f+R*v,e[5]=T*i+b*s+y*h+R*p,e[6]=T*a+b*c+y*_+R*E,e[7]=T*o+b*l+y*d+R*m,T=n[8],b=n[9],y=n[10],R=n[11],e[8]=T*r+b*u+y*f+R*v,e[9]=T*i+b*s+y*h+R*p,e[10]=T*a+b*c+y*_+R*E,e[11]=T*o+b*l+y*d+R*m,T=n[12],b=n[13],y=n[14],R=n[15],e[12]=T*r+b*u+y*f+R*v,e[13]=T*i+b*s+y*h+R*p,e[14]=T*a+b*c+y*_+R*E,e[15]=T*o+b*l+y*d+R*m,e}function a(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],u=r+r,s=i+i,c=a+a,l=r*u,f=r*s,h=r*c,_=i*s,d=i*c,v=a*c,p=o*u,E=o*s,m=o*c;return e[0]=1-(_+v),e[1]=f+m,e[2]=h-E,e[3]=0,e[4]=f-m,e[5]=1-(l+v),e[6]=d+p,e[7]=0,e[8]=h+E,e[9]=d-p,e[10]=1-(l+_),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function o(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}Object.defineProperty(t,"__esModule",{value:!0}),t.sub=t.mul=void 0,t.create=function(){var e=new s.ARRAY_TYPE(16);return s.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},t.clone=function(e){var t=new s.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.fromValues=function(e,t,n,r,i,a,o,u,c,l,f,h,_,d,v,p){var E=new s.ARRAY_TYPE(16);return E[0]=e,E[1]=t,E[2]=n,E[3]=r,E[4]=i,E[5]=a,E[6]=o,E[7]=u,E[8]=c,E[9]=l,E[10]=f,E[11]=h,E[12]=_,E[13]=d,E[14]=v,E[15]=p,E},t.set=function(e,t,n,r,i,a,o,u,s,c,l,f,h,_,d,v,p){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e[6]=u,e[7]=s,e[8]=c,e[9]=l,e[10]=f,e[11]=h,e[12]=_,e[13]=d,e[14]=v,e[15]=p,e},t.identity=r,t.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],a=t[6],o=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},t.invert=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],u=t[5],s=t[6],c=t[7],l=t[8],f=t[9],h=t[10],_=t[11],d=t[12],v=t[13],p=t[14],E=t[15],m=n*u-r*o,T=n*s-i*o,b=n*c-a*o,y=r*s-i*u,R=r*c-a*u,g=i*c-a*s,M=l*v-f*d,x=l*p-h*d,A=l*E-_*d,P=f*p-h*v,O=f*E-_*v,w=h*E-_*p,S=m*w-T*O+b*P+y*A-R*x+g*M;return S?(S=1/S,e[0]=(u*w-s*O+c*P)*S,e[1]=(i*O-r*w-a*P)*S,e[2]=(v*g-p*R+E*y)*S,e[3]=(h*R-f*g-_*y)*S,e[4]=(s*A-o*w-c*x)*S,e[5]=(n*w-i*A+a*x)*S,e[6]=(p*b-d*g-E*T)*S,e[7]=(l*g-h*b+_*T)*S,e[8]=(o*O-u*A+c*M)*S,e[9]=(r*A-n*O-a*M)*S,e[10]=(d*R-v*b+E*m)*S,e[11]=(f*b-l*R-_*m)*S,e[12]=(u*x-o*P-s*M)*S,e[13]=(n*P-r*x+i*M)*S,e[14]=(v*T-d*y-p*m)*S,e[15]=(l*y-f*T+h*m)*S,e):null},t.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],u=t[5],s=t[6],c=t[7],l=t[8],f=t[9],h=t[10],_=t[11],d=t[12],v=t[13],p=t[14],E=t[15];return e[0]=u*(h*E-_*p)-f*(s*E-c*p)+v*(s*_-c*h),e[1]=-(r*(h*E-_*p)-f*(i*E-a*p)+v*(i*_-a*h)),e[2]=r*(s*E-c*p)-u*(i*E-a*p)+v*(i*c-a*s),e[3]=-(r*(s*_-c*h)-u*(i*_-a*h)+f*(i*c-a*s)),e[4]=-(o*(h*E-_*p)-l*(s*E-c*p)+d*(s*_-c*h)),e[5]=n*(h*E-_*p)-l*(i*E-a*p)+d*(i*_-a*h),e[6]=-(n*(s*E-c*p)-o*(i*E-a*p)+d*(i*c-a*s)),e[7]=n*(s*_-c*h)-o*(i*_-a*h)+l*(i*c-a*s),e[8]=o*(f*E-_*v)-l*(u*E-c*v)+d*(u*_-c*f),e[9]=-(n*(f*E-_*v)-l*(r*E-a*v)+d*(r*_-a*f)),e[10]=n*(u*E-c*v)-o*(r*E-a*v)+d*(r*c-a*u),e[11]=-(n*(u*_-c*f)-o*(r*_-a*f)+l*(r*c-a*u)),e[12]=-(o*(f*p-h*v)-l*(u*p-s*v)+d*(u*h-s*f)),e[13]=n*(f*p-h*v)-l*(r*p-i*v)+d*(r*h-i*f),e[14]=-(n*(u*p-s*v)-o*(r*p-i*v)+d*(r*s-i*u)),e[15]=n*(u*h-s*f)-o*(r*h-i*f)+l*(r*s-i*u),e},t.determinant=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],u=e[6],s=e[7],c=e[8],l=e[9],f=e[10],h=e[11],_=e[12],d=e[13],v=e[14],p=e[15];return(t*o-n*a)*(f*p-h*v)-(t*u-r*a)*(l*p-h*d)+(t*s-i*a)*(l*v-f*d)+(n*u-r*o)*(c*p-h*_)-(n*s-i*o)*(c*v-f*_)+(r*s-i*u)*(c*d-l*_)},t.multiply=i,t.translate=function(e,t,n){var r=n[0],i=n[1],a=n[2],o=void 0,u=void 0,s=void 0,c=void 0,l=void 0,f=void 0,h=void 0,_=void 0,d=void 0,v=void 0,p=void 0,E=void 0;return t===e?(e[12]=t[0]*r+t[4]*i+t[8]*a+t[12],e[13]=t[1]*r+t[5]*i+t[9]*a+t[13],e[14]=t[2]*r+t[6]*i+t[10]*a+t[14],e[15]=t[3]*r+t[7]*i+t[11]*a+t[15]):(o=t[0],u=t[1],s=t[2],c=t[3],l=t[4],f=t[5],h=t[6],_=t[7],d=t[8],v=t[9],p=t[10],E=t[11],e[0]=o,e[1]=u,e[2]=s,e[3]=c,e[4]=l,e[5]=f,e[6]=h,e[7]=_,e[8]=d,e[9]=v,e[10]=p,e[11]=E,e[12]=o*r+l*i+d*a+t[12],e[13]=u*r+f*i+v*a+t[13],e[14]=s*r+h*i+p*a+t[14],e[15]=c*r+_*i+E*a+t[15]),e},t.scale=function(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.rotate=function(e,t,n,r){var i=r[0],a=r[1],o=r[2],u=Math.sqrt(i*i+a*a+o*o),c=void 0,l=void 0,f=void 0,h=void 0,_=void 0,d=void 0,v=void 0,p=void 0,E=void 0,m=void 0,T=void 0,b=void 0,y=void 0,R=void 0,g=void 0,M=void 0,x=void 0,A=void 0,P=void 0,O=void 0,w=void 0,S=void 0,L=void 0,I=void 0;return u<s.EPSILON?null:(i*=u=1/u,a*=u,o*=u,c=Math.sin(n),l=Math.cos(n),f=1-l,h=t[0],_=t[1],d=t[2],v=t[3],p=t[4],E=t[5],m=t[6],T=t[7],b=t[8],y=t[9],R=t[10],g=t[11],M=i*i*f+l,x=a*i*f+o*c,A=o*i*f-a*c,P=i*a*f-o*c,O=a*a*f+l,w=o*a*f+i*c,S=i*o*f+a*c,L=a*o*f-i*c,I=o*o*f+l,e[0]=h*M+p*x+b*A,e[1]=_*M+E*x+y*A,e[2]=d*M+m*x+R*A,e[3]=v*M+T*x+g*A,e[4]=h*P+p*O+b*w,e[5]=_*P+E*O+y*w,e[6]=d*P+m*O+R*w,e[7]=v*P+T*O+g*w,e[8]=h*S+p*L+b*I,e[9]=_*S+E*L+y*I,e[10]=d*S+m*L+R*I,e[11]=v*S+T*L+g*I,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},t.rotateX=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],u=t[6],s=t[7],c=t[8],l=t[9],f=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+c*r,e[5]=o*i+l*r,e[6]=u*i+f*r,e[7]=s*i+h*r,e[8]=c*i-a*r,e[9]=l*i-o*r,e[10]=f*i-u*r,e[11]=h*i-s*r,e},t.rotateY=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],u=t[2],s=t[3],c=t[8],l=t[9],f=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-c*r,e[1]=o*i-l*r,e[2]=u*i-f*r,e[3]=s*i-h*r,e[8]=a*r+c*i,e[9]=o*r+l*i,e[10]=u*r+f*i,e[11]=s*r+h*i,e},t.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],u=t[2],s=t[3],c=t[4],l=t[5],f=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+c*r,e[1]=o*i+l*r,e[2]=u*i+f*r,e[3]=s*i+h*r,e[4]=c*i-a*r,e[5]=l*i-o*r,e[6]=f*i-u*r,e[7]=h*i-s*r,e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotation=function(e,t,n){var r=n[0],i=n[1],a=n[2],o=Math.sqrt(r*r+i*i+a*a),u=void 0,c=void 0,l=void 0;return o<s.EPSILON?null:(r*=o=1/o,i*=o,a*=o,u=Math.sin(t),c=Math.cos(t),l=1-c,e[0]=r*r*l+c,e[1]=i*r*l+a*u,e[2]=a*r*l-i*u,e[3]=0,e[4]=r*i*l-a*u,e[5]=i*i*l+c,e[6]=a*i*l+r*u,e[7]=0,e[8]=r*a*l+i*u,e[9]=i*a*l-r*u,e[10]=a*a*l+c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},t.fromXRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromYRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromZRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotationTranslation=a,t.fromQuat2=function(e,t){var n=new s.ARRAY_TYPE(3),r=-t[0],i=-t[1],o=-t[2],u=t[3],c=t[4],l=t[5],f=t[6],h=t[7],_=r*r+i*i+o*o+u*u;return _>0?(n[0]=2*(c*u+h*r+l*o-f*i)/_,n[1]=2*(l*u+h*i+f*r-c*o)/_,n[2]=2*(f*u+h*o+c*i-l*r)/_):(n[0]=2*(c*u+h*r+l*o-f*i),n[1]=2*(l*u+h*i+f*r-c*o),n[2]=2*(f*u+h*o+c*i-l*r)),a(e,t,n),e},t.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},t.getScaling=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[4],o=t[5],u=t[6],s=t[8],c=t[9],l=t[10];return e[0]=Math.sqrt(n*n+r*r+i*i),e[1]=Math.sqrt(a*a+o*o+u*u),e[2]=Math.sqrt(s*s+c*c+l*l),e},t.getRotation=function(e,t){var n=t[0]+t[5]+t[10],r=0;return n>0?(r=2*Math.sqrt(n+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e},t.fromRotationTranslationScale=function(e,t,n,r){var i=t[0],a=t[1],o=t[2],u=t[3],s=i+i,c=a+a,l=o+o,f=i*s,h=i*c,_=i*l,d=a*c,v=a*l,p=o*l,E=u*s,m=u*c,T=u*l,b=r[0],y=r[1],R=r[2];return e[0]=(1-(d+p))*b,e[1]=(h+T)*b,e[2]=(_-m)*b,e[3]=0,e[4]=(h-T)*y,e[5]=(1-(f+p))*y,e[6]=(v+E)*y,e[7]=0,e[8]=(_+m)*R,e[9]=(v-E)*R,e[10]=(1-(f+d))*R,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},t.fromRotationTranslationScaleOrigin=function(e,t,n,r,i){var a=t[0],o=t[1],u=t[2],s=t[3],c=a+a,l=o+o,f=u+u,h=a*c,_=a*l,d=a*f,v=o*l,p=o*f,E=u*f,m=s*c,T=s*l,b=s*f,y=r[0],R=r[1],g=r[2],M=i[0],x=i[1],A=i[2],P=(1-(v+E))*y,O=(_+b)*y,w=(d-T)*y,S=(_-b)*R,L=(1-(h+E))*R,I=(p+m)*R,N=(d+T)*g,C=(p-m)*g,F=(1-(h+v))*g;return e[0]=P,e[1]=O,e[2]=w,e[3]=0,e[4]=S,e[5]=L,e[6]=I,e[7]=0,e[8]=N,e[9]=C,e[10]=F,e[11]=0,e[12]=n[0]+M-(P*M+S*x+N*A),e[13]=n[1]+x-(O*M+L*x+C*A),e[14]=n[2]+A-(w*M+I*x+F*A),e[15]=1,e},t.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,u=r+r,s=i+i,c=n*o,l=r*o,f=r*u,h=i*o,_=i*u,d=i*s,v=a*o,p=a*u,E=a*s;return e[0]=1-f-d,e[1]=l+E,e[2]=h-p,e[3]=0,e[4]=l-E,e[5]=1-c-d,e[6]=_+v,e[7]=0,e[8]=h+p,e[9]=_-v,e[10]=1-c-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.frustum=function(e,t,n,r,i,a,o){var u=1/(n-t),s=1/(i-r),c=1/(a-o);return e[0]=2*a*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*s,e[6]=0,e[7]=0,e[8]=(n+t)*u,e[9]=(i+r)*s,e[10]=(o+a)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*c,e[15]=0,e},t.perspective=function(e,t,n,r,i){var a=1/Math.tan(t/2),o=void 0;return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(o=1/(r-i),e[10]=(i+r)*o,e[14]=2*i*r*o):(e[10]=-1,e[14]=-2*r),e},t.perspectiveFromFieldOfView=function(e,t,n,r){var i=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),u=Math.tan(t.rightDegrees*Math.PI/180),s=2/(o+u),c=2/(i+a);return e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(o-u)*s*.5,e[9]=(i-a)*c*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e},t.ortho=function(e,t,n,r,i,a,o){var u=1/(t-n),s=1/(r-i),c=1/(a-o);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*u,e[13]=(i+r)*s,e[14]=(o+a)*c,e[15]=1,e},t.lookAt=function(e,t,n,i){var a=void 0,o=void 0,u=void 0,c=void 0,l=void 0,f=void 0,h=void 0,_=void 0,d=void 0,v=void 0,p=t[0],E=t[1],m=t[2],T=i[0],b=i[1],y=i[2],R=n[0],g=n[1],M=n[2];return Math.abs(p-R)<s.EPSILON&&Math.abs(E-g)<s.EPSILON&&Math.abs(m-M)<s.EPSILON?r(e):(h=p-R,_=E-g,d=m-M,v=1/Math.sqrt(h*h+_*_+d*d),a=b*(d*=v)-y*(_*=v),o=y*(h*=v)-T*d,u=T*_-b*h,(v=Math.sqrt(a*a+o*o+u*u))?(a*=v=1/v,o*=v,u*=v):(a=0,o=0,u=0),c=_*u-d*o,l=d*a-h*u,f=h*o-_*a,(v=Math.sqrt(c*c+l*l+f*f))?(c*=v=1/v,l*=v,f*=v):(c=0,l=0,f=0),e[0]=a,e[1]=c,e[2]=h,e[3]=0,e[4]=o,e[5]=l,e[6]=_,e[7]=0,e[8]=u,e[9]=f,e[10]=d,e[11]=0,e[12]=-(a*p+o*E+u*m),e[13]=-(c*p+l*E+f*m),e[14]=-(h*p+_*E+d*m),e[15]=1,e)},t.targetTo=function(e,t,n,r){var i=t[0],a=t[1],o=t[2],u=r[0],s=r[1],c=r[2],l=i-n[0],f=a-n[1],h=o-n[2],_=l*l+f*f+h*h;_>0&&(_=1/Math.sqrt(_),l*=_,f*=_,h*=_);var d=s*h-c*f,v=c*l-u*h,p=u*f-s*l;return(_=d*d+v*v+p*p)>0&&(_=1/Math.sqrt(_),d*=_,v*=_,p*=_),e[0]=d,e[1]=v,e[2]=p,e[3]=0,e[4]=f*p-h*v,e[5]=h*d-l*p,e[6]=l*v-f*d,e[7]=0,e[8]=l,e[9]=f,e[10]=h,e[11]=0,e[12]=i,e[13]=a,e[14]=o,e[15]=1,e},t.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e},t.subtract=o,t.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e},t.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},t.equals=function(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],_=e[10],d=e[11],v=e[12],p=e[13],E=e[14],m=e[15],T=t[0],b=t[1],y=t[2],R=t[3],g=t[4],M=t[5],x=t[6],A=t[7],P=t[8],O=t[9],w=t[10],S=t[11],L=t[12],I=t[13],N=t[14],C=t[15];return Math.abs(n-T)<=s.EPSILON*Math.max(1,Math.abs(n),Math.abs(T))&&Math.abs(r-b)<=s.EPSILON*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(i-y)<=s.EPSILON*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(a-R)<=s.EPSILON*Math.max(1,Math.abs(a),Math.abs(R))&&Math.abs(o-g)<=s.EPSILON*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(u-M)<=s.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(c-x)<=s.EPSILON*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(l-A)<=s.EPSILON*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(f-P)<=s.EPSILON*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(h-O)<=s.EPSILON*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(_-w)<=s.EPSILON*Math.max(1,Math.abs(_),Math.abs(w))&&Math.abs(d-S)<=s.EPSILON*Math.max(1,Math.abs(d),Math.abs(S))&&Math.abs(v-L)<=s.EPSILON*Math.max(1,Math.abs(v),Math.abs(L))&&Math.abs(p-I)<=s.EPSILON*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(E-N)<=s.EPSILON*Math.max(1,Math.abs(E),Math.abs(N))&&Math.abs(m-C)<=s.EPSILON*Math.max(1,Math.abs(m),Math.abs(C))};var u=n(3),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u);t.mul=i,t.sub=o},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(){var e=new p.ARRAY_TYPE(4);return p.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function a(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function o(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],u=n[0],s=n[1],c=n[2],l=n[3];return e[0]=r*l+o*u+i*c-a*s,e[1]=i*l+o*s+a*u-r*c,e[2]=a*l+o*c+r*s-i*u,e[3]=o*l-r*u-i*s-a*c,e}function u(e,t,n,r){var i=t[0],a=t[1],o=t[2],u=t[3],s=n[0],c=n[1],l=n[2],f=n[3],h=void 0,_=void 0,d=void 0,v=void 0,E=void 0;return(_=i*s+a*c+o*l+u*f)<0&&(_=-_,s=-s,c=-c,l=-l,f=-f),1-_>p.EPSILON?(h=Math.acos(_),d=Math.sin(h),v=Math.sin((1-r)*h)/d,E=Math.sin(r*h)/d):(v=1-r,E=r),e[0]=v*i+E*s,e[1]=v*a+E*c,e[2]=v*o+E*l,e[3]=v*u+E*f,e}function s(e,t){var n=t[0]+t[4]+t[8],r=void 0;if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;r=Math.sqrt(t[3*i+i]-t[3*a+a]-t[3*o+o]+1),e[i]=.5*r,r=.5/r,e[3]=(t[3*a+o]-t[3*o+a])*r,e[a]=(t[3*a+i]+t[3*i+a])*r,e[o]=(t[3*o+i]+t[3*i+o])*r}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.setAxes=t.sqlerp=t.rotationTo=t.equals=t.exactEquals=t.normalize=t.sqrLen=t.squaredLength=t.len=t.length=t.lerp=t.dot=t.scale=t.mul=t.add=t.set=t.copy=t.fromValues=t.clone=void 0,t.create=i,t.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},t.setAxisAngle=a,t.getAxisAngle=function(e,t){var n=2*Math.acos(t[3]),r=Math.sin(n/2);return r>p.EPSILON?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n},t.multiply=o,t.rotateX=function(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],u=Math.sin(n),s=Math.cos(n);return e[0]=r*s+o*u,e[1]=i*s+a*u,e[2]=a*s-i*u,e[3]=o*s-r*u,e},t.rotateY=function(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],u=Math.sin(n),s=Math.cos(n);return e[0]=r*s-a*u,e[1]=i*s+o*u,e[2]=a*s+r*u,e[3]=o*s-i*u,e},t.rotateZ=function(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],u=Math.sin(n),s=Math.cos(n);return e[0]=r*s+i*u,e[1]=i*s-r*u,e[2]=a*s+o*u,e[3]=o*s-a*u,e},t.calculateW=function(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e},t.slerp=u,t.random=function(e){var t=p.RANDOM(),n=p.RANDOM(),r=p.RANDOM(),i=Math.sqrt(1-t),a=Math.sqrt(t);return e[0]=i*Math.sin(2*Math.PI*n),e[1]=i*Math.cos(2*Math.PI*n),e[2]=a*Math.sin(2*Math.PI*r),e[3]=a*Math.cos(2*Math.PI*r),e},t.invert=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*n+r*r+i*i+a*a,u=o?1/o:0;return e[0]=-n*u,e[1]=-r*u,e[2]=-i*u,e[3]=a*u,e},t.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},t.fromMat3=s,t.fromEuler=function(e,t,n,r){var i=.5*Math.PI/180;t*=i,n*=i,r*=i;var a=Math.sin(t),o=Math.cos(t),u=Math.sin(n),s=Math.cos(n),c=Math.sin(r),l=Math.cos(r);return e[0]=a*s*l-o*u*c,e[1]=o*u*l+a*s*c,e[2]=o*s*c-a*u*l,e[3]=o*s*l+a*u*c,e},t.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"};var c,l,f,h,_,d,v=n(3),p=r(v),E=n(18),m=r(E),T=n(21),b=r(T),y=n(22),R=r(y),g=(t.clone=R.clone,t.fromValues=R.fromValues,t.copy=R.copy,t.set=R.set,t.add=R.add,t.mul=o,t.scale=R.scale,t.dot=R.dot,t.lerp=R.lerp,t.length=R.length),M=(t.len=g,t.squaredLength=R.squaredLength),x=(t.sqrLen=M,t.normalize=R.normalize);t.exactEquals=R.exactEquals,t.equals=R.equals,t.rotationTo=(h=b.create(),_=b.fromValues(1,0,0),d=b.fromValues(0,1,0),function(e,t,n){var r=b.dot(t,n);return r<-.999999?(b.cross(h,_,t),b.len(h)<1e-6&&b.cross(h,d,t),b.normalize(h,h),a(e,h,Math.PI),e):r>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(b.cross(h,t,n),e[0]=h[0],e[1]=h[1],e[2]=h[2],e[3]=1+r,x(e,e))}),t.sqlerp=(l=i(),f=i(),function(e,t,n,r,i,a){return u(l,t,i,a),u(f,n,r,a),u(e,l,f,2*a*(1-a)),e}),t.setAxes=(c=m.create(),function(e,t,n,r){return c[0]=n[0],c[3]=n[1],c[6]=n[2],c[1]=r[0],c[4]=r[1],c[7]=r[2],c[2]=-t[0],c[5]=-t[1],c[8]=-t[2],x(e,s(e,c))})},function(e,t,n){"use strict";function r(){var e=new p.ARRAY_TYPE(3);return p.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function i(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function a(e,t,n){var r=new p.ARRAY_TYPE(3);return r[0]=e,r[1]=t,r[2]=n,r}function o(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function u(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function s(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function c(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)}function l(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}function f(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function h(e,t){var n=t[0],r=t[1],i=t[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a),e}function _(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}Object.defineProperty(t,"__esModule",{value:!0}),t.forEach=t.sqrLen=t.len=t.sqrDist=t.dist=t.div=t.mul=t.sub=void 0,t.create=r,t.clone=function(e){var t=new p.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},t.length=i,t.fromValues=a,t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},t.subtract=o,t.multiply=u,t.divide=s,t.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},t.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},t.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},t.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},t.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},t.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},t.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e},t.distance=c,t.squaredDistance=l,t.squaredLength=f,t.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},t.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},t.normalize=h,t.dot=_,t.cross=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],u=n[1],s=n[2];return e[0]=i*s-a*u,e[1]=a*o-r*s,e[2]=r*u-i*o,e},t.lerp=function(e,t,n,r){var i=t[0],a=t[1],o=t[2];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e[2]=o+r*(n[2]-o),e},t.hermite=function(e,t,n,r,i,a){var o=a*a,u=o*(2*a-3)+1,s=o*(a-2)+a,c=o*(a-1),l=o*(3-2*a);return e[0]=t[0]*u+n[0]*s+r[0]*c+i[0]*l,e[1]=t[1]*u+n[1]*s+r[1]*c+i[1]*l,e[2]=t[2]*u+n[2]*s+r[2]*c+i[2]*l,e},t.bezier=function(e,t,n,r,i,a){var o=1-a,u=o*o,s=a*a,c=u*o,l=3*a*u,f=3*s*o,h=s*a;return e[0]=t[0]*c+n[0]*l+r[0]*f+i[0]*h,e[1]=t[1]*c+n[1]*l+r[1]*f+i[1]*h,e[2]=t[2]*c+n[2]*l+r[2]*f+i[2]*h,e},t.random=function(e,t){t=t||1;var n=2*p.RANDOM()*Math.PI,r=2*p.RANDOM()-1,i=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=r*t,e},t.transformMat4=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[3]*r+n[7]*i+n[11]*a+n[15];return o=o||1,e[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/o,e[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/o,e[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/o,e},t.transformMat3=function(e,t,n){var r=t[0],i=t[1],a=t[2];return e[0]=r*n[0]+i*n[3]+a*n[6],e[1]=r*n[1]+i*n[4]+a*n[7],e[2]=r*n[2]+i*n[5]+a*n[8],e},t.transformQuat=function(e,t,n){var r=n[0],i=n[1],a=n[2],o=n[3],u=t[0],s=t[1],c=t[2],l=i*c-a*s,f=a*u-r*c,h=r*s-i*u,_=i*h-a*f,d=a*l-r*h,v=r*f-i*l,p=2*o;return l*=p,f*=p,h*=p,_*=2,d*=2,v*=2,e[0]=u+l+_,e[1]=s+f+d,e[2]=c+h+v,e},t.rotateX=function(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[0],a[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),a[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e},t.rotateY=function(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),a[1]=i[1],a[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e},t.rotateZ=function(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),a[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),a[2]=i[2],e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e},t.angle=function(e,t){var n=a(e[0],e[1],e[2]),r=a(t[0],t[1],t[2]);h(n,n),h(r,r);var i=_(n,r);return i>1?0:i<-1?Math.PI:Math.acos(i)},t.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},t.equals=function(e,t){var n=e[0],r=e[1],i=e[2],a=t[0],o=t[1],u=t[2];return Math.abs(n-a)<=p.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-o)<=p.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-u)<=p.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))};var d,v=n(3),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(v);t.sub=o,t.mul=u,t.div=s,t.dist=c,t.sqrDist=l,t.len=i,t.sqrLen=f,t.forEach=(d=r(),function(e,t,n,r,i,a){var o=void 0,u=void 0;for(t||(t=3),n||(n=0),u=r?Math.min(r*t+n,e.length):e.length,o=n;o<u;o+=t)d[0]=e[o],d[1]=e[o+1],d[2]=e[o+2],i(d,d,a),e[o]=d[0],e[o+1]=d[1],e[o+2]=d[2];return e})},function(e,t,n){"use strict";function r(){var e=new _.ARRAY_TYPE(4);return _.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function i(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function a(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function o(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}function u(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return Math.sqrt(n*n+r*r+i*i+a*a)}function s(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return n*n+r*r+i*i+a*a}function c(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)}function l(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i}Object.defineProperty(t,"__esModule",{value:!0}),t.forEach=t.sqrLen=t.len=t.sqrDist=t.dist=t.div=t.mul=t.sub=void 0,t.create=r,t.clone=function(e){var t=new _.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},t.fromValues=function(e,t,n,r){var i=new _.ARRAY_TYPE(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},t.set=function(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},t.subtract=i,t.multiply=a,t.divide=o,t.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},t.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},t.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},t.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},t.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},t.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},t.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},t.distance=u,t.squaredDistance=s,t.length=c,t.squaredLength=l,t.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},t.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},t.normalize=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*n+r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o),e[0]=n*o,e[1]=r*o,e[2]=i*o,e[3]=a*o),e},t.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},t.lerp=function(e,t,n,r){var i=t[0],a=t[1],o=t[2],u=t[3];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e[2]=o+r*(n[2]-o),e[3]=u+r*(n[3]-u),e},t.random=function(e,t){var n,r,i,a,o,u;t=t||1;do{n=2*_.RANDOM()-1,r=2*_.RANDOM()-1,o=n*n+r*r}while(o>=1);do{i=2*_.RANDOM()-1,a=2*_.RANDOM()-1,u=i*i+a*a}while(u>=1);var s=Math.sqrt((1-o)/u);return e[0]=t*n,e[1]=t*r,e[2]=t*i*s,e[3]=t*a*s,e},t.transformMat4=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e},t.transformQuat=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],u=n[1],s=n[2],c=n[3],l=c*r+u*a-s*i,f=c*i+s*r-o*a,h=c*a+o*i-u*r,_=-o*r-u*i-s*a;return e[0]=l*c+_*-o+f*-s-h*-u,e[1]=f*c+_*-u+h*-o-l*-s,e[2]=h*c+_*-s+l*-u-f*-o,e[3]=t[3],e},t.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},t.equals=function(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],o=t[0],u=t[1],s=t[2],c=t[3];return Math.abs(n-o)<=_.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-u)<=_.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(i-s)<=_.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(a-c)<=_.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))};var f,h=n(3),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(h);t.sub=i,t.mul=a,t.div=o,t.dist=u,t.sqrDist=s,t.len=c,t.sqrLen=l,t.forEach=(f=r(),function(e,t,n,r,i,a){var o=void 0,u=void 0;for(t||(t=4),n||(n=0),u=r?Math.min(r*t+n,e.length):e.length,o=n;o<u;o+=t)f[0]=e[o],f[1]=e[o+1],f[2]=e[o+2],f[3]=e[o+3],i(f,f,a),e[o]=f[0],e[o+1]=f[1],e[o+2]=f[2],e[o+3]=f[3];return e})},function(e,t,n){"use strict";e.exports={ACTIVE_ATTRIBUTES:35721,ACTIVE_ATTRIBUTE_MAX_LENGTH:35722,ACTIVE_TEXTURE:34016,ACTIVE_UNIFORMS:35718,ACTIVE_UNIFORM_MAX_LENGTH:35719,ALIASED_LINE_WIDTH_RANGE:33902,ALIASED_POINT_SIZE_RANGE:33901,ALPHA:6406,ALPHA_BITS:3413,ALWAYS:519,ARRAY_BUFFER:34962,ARRAY_BUFFER_BINDING:34964,ATTACHED_SHADERS:35717,BACK:1029,BLEND:3042,BLEND_COLOR:32773,BLEND_DST_ALPHA:32970,BLEND_DST_RGB:32968,BLEND_EQUATION:32777,BLEND_EQUATION_ALPHA:34877,BLEND_EQUATION_RGB:32777,BLEND_SRC_ALPHA:32971,BLEND_SRC_RGB:32969,BLUE_BITS:3412,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,BROWSER_DEFAULT_WEBGL:37444,BUFFER_SIZE:34660,BUFFER_USAGE:34661,BYTE:5120,CCW:2305,CLAMP_TO_EDGE:33071,COLOR_ATTACHMENT0:36064,COLOR_BUFFER_BIT:16384,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,COMPILE_STATUS:35713,COMPRESSED_TEXTURE_FORMATS:34467,CONSTANT_ALPHA:32771,CONSTANT_COLOR:32769,CONTEXT_LOST_WEBGL:37442,CULL_FACE:2884,CULL_FACE_MODE:2885,CURRENT_PROGRAM:35725,CURRENT_VERTEX_ATTRIB:34342,CW:2304,DECR:7683,DECR_WRAP:34056,DELETE_STATUS:35712,DEPTH_ATTACHMENT:36096,DEPTH_BITS:3414,DEPTH_BUFFER_BIT:256,DEPTH_CLEAR_VALUE:2931,DEPTH_COMPONENT:6402,RED:6403,DEPTH_COMPONENT16:33189,DEPTH_FUNC:2932,DEPTH_RANGE:2928,DEPTH_STENCIL:34041,DEPTH_STENCIL_ATTACHMENT:33306,DEPTH_TEST:2929,DEPTH_WRITEMASK:2930,DITHER:3024,DONT_CARE:4352,DST_ALPHA:772,DST_COLOR:774,DYNAMIC_DRAW:35048,ELEMENT_ARRAY_BUFFER:34963,ELEMENT_ARRAY_BUFFER_BINDING:34965,EQUAL:514,FASTEST:4353,FLOAT:5126,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,FRAGMENT_SHADER:35632,FRAMEBUFFER:36160,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_BINDING:36006,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_UNSUPPORTED:36061,FRONT:1028,FRONT_AND_BACK:1032,FRONT_FACE:2886,FUNC_ADD:32774,FUNC_REVERSE_SUBTRACT:32779,FUNC_SUBTRACT:32778,GENERATE_MIPMAP_HINT:33170,GEQUAL:518,GREATER:516,GREEN_BITS:3411,HIGH_FLOAT:36338,HIGH_INT:36341,INCR:7682,INCR_WRAP:34055,INFO_LOG_LENGTH:35716,INT:5124,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,INVALID_ENUM:1280,INVALID_FRAMEBUFFER_OPERATION:1286,INVALID_OPERATION:1282,INVALID_VALUE:1281,INVERT:5386,KEEP:7680,LEQUAL:515,LESS:513,LINEAR:9729,LINEAR_MIPMAP_LINEAR:9987,LINEAR_MIPMAP_NEAREST:9985,LINES:1,LINE_LOOP:2,LINE_STRIP:3,LINE_WIDTH:2849,LINK_STATUS:35714,LOW_FLOAT:36336,LOW_INT:36339,LUMINANCE:6409,LUMINANCE_ALPHA:6410,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_CUBE_MAP_TEXTURE_SIZE:34076,MAX_FRAGMENT_UNIFORM_VECTORS:36349,MAX_RENDERBUFFER_SIZE:34024,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_TEXTURE_SIZE:3379,MAX_VARYING_VECTORS:36348,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VIEWPORT_DIMS:3386,MEDIUM_FLOAT:36337,MEDIUM_INT:36340,MIRRORED_REPEAT:33648,NEAREST:9728,NEAREST_MIPMAP_LINEAR:9986,NEAREST_MIPMAP_NEAREST:9984,NEVER:512,NICEST:4354,NONE:0,NOTEQUAL:517,NO_ERROR:0,NUM_COMPRESSED_TEXTURE_FORMATS:34466,ONE:1,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,OUT_OF_MEMORY:1285,PACK_ALIGNMENT:3333,POINTS:0,POLYGON_OFFSET_FACTOR:32824,POLYGON_OFFSET_FILL:32823,POLYGON_OFFSET_UNITS:10752,RED_BITS:3410,RENDERBUFFER:36161,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_BINDING:36007,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_STENCIL_SIZE:36181,RENDERBUFFER_WIDTH:36162,RENDERER:7937,REPEAT:10497,REPLACE:7681,RGB:6407,RGB5_A1:32855,RGB565:36194,RGBA:6408,RGBA4:32854,SAMPLER_2D:35678,SAMPLER_CUBE:35680,SAMPLES:32937,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_BUFFERS:32936,SAMPLE_COVERAGE:32928,SAMPLE_COVERAGE_INVERT:32939,SAMPLE_COVERAGE_VALUE:32938,SCISSOR_BOX:3088,SCISSOR_TEST:3089,SHADER_COMPILER:36346,SHADER_SOURCE_LENGTH:35720,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,SHORT:5122,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,STATIC_DRAW:35044,STENCIL_ATTACHMENT:36128,STENCIL_BACK_FAIL:34817,STENCIL_BACK_FUNC:34816,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,STENCIL_BITS:3415,STENCIL_BUFFER_BIT:1024,STENCIL_CLEAR_VALUE:2961,STENCIL_FAIL:2964,STENCIL_FUNC:2962,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_TEST:2960,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STREAM_DRAW:35040,SUBPIXEL_BITS:3408,TEXTURE:5890,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,TEXTURE_2D:3553,TEXTURE_BINDING_2D:32873,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,UNPACK_ALIGNMENT:3317,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,VALIDATE_STATUS:35715,VENDOR:7936,VERSION:7938,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_SHADER:35633,VIEWPORT:2978,ZERO:0,R8:33321}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return void 0===t.cacheAttribLoc&&(t.cacheAttribLoc={}),void 0===t.cacheAttribLoc[n]&&(t.cacheAttribLoc[n]=e.getAttribLocation(t,n)),t.cacheAttribLoc[n]}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return 0!==e&&!(e&e-1)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),u=r(o),s=n(8),c=void r(s),l=function(){function e(t){var n,r,a,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c=u.default.gl,o)this._texture=t;else{this._mSource=t,this._texture=c.createTexture(),this._isVideo="VIDEO"===t.tagName,this._premultiplyAlpha=!0,this._magFilter=s.magFilter||c.LINEAR,this._minFilter=s.minFilter||c.NEAREST_MIPMAP_LINEAR,this._wrapS=s.wrapS||c.MIRRORED_REPEAT,this._wrapT=s.wrapT||c.MIRRORED_REPEAT,t.width||t.videoWidth?(r=(n=t).width||n.videoWidth,a=n.height||n.videoHeight,!(!r||!a)&&i(r)&&i(a)||(this._wrapS=this._wrapT=c.CLAMP_TO_EDGE,this._minFilter===c.NEAREST_MIPMAP_LINEAR&&(this._minFilter=c.LINEAR))):(this._wrapS=this._wrapT=c.CLAMP_TO_EDGE,this._minFilter===c.NEAREST_MIPMAP_LINEAR&&(this._minFilter=c.LINEAR)),c.bindTexture(c.TEXTURE_2D,this._texture),c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0),t.exposure?c.texImage2D(c.TEXTURE_2D,0,c.RGBA,t.shape[0],t.shape[1],0,c.RGBA,c.FLOAT,t.data):c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,t),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,this._magFilter),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,this._minFilter),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,this._wrapS),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,this._wrapT);var l=u.default.getExtension("EXT_texture_filter_anisotropic");if(l){var f=c.getParameter(l.MAX_TEXTURE_MAX_ANISOTROPY_EXT);c.texParameterf(c.TEXTURE_2D,l.TEXTURE_MAX_ANISOTROPY_EXT,f)}this._canGenerateMipmap()&&c.generateMipmap(c.TEXTURE_2D),c.bindTexture(c.TEXTURE_2D,null)}}return a(e,[{key:"generateMipmap",value:function(){this._canGenerateMipmap()&&(c.bindTexture(c.TEXTURE_2D,this._texture),c.generateMipmap(c.TEXTURE_2D),c.bindTexture(c.TEXTURE_2D,null))}},{key:"updateTexture",value:function(e){e&&(this._mSource=e),c.bindTexture(c.TEXTURE_2D,this._texture),c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,this._mSource),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,this._magFilter),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,this._minFilter),this._canGenerateMipmap()&&c.generateMipmap(c.TEXTURE_2D),c.bindTexture(c.TEXTURE_2D,null)}},{key:"bind",value:function(e){void 0===e&&(e=0),u.default.shader&&(c.activeTexture(c.TEXTURE0+e),c.bindTexture(c.TEXTURE_2D,this._texture),this._bindIndex=e)}},{key:"_canGenerateMipmap",value:function(){return this._minFilter===c.LINEAR_MIPMAP_NEAREST||this._minFilter===c.NEAREST_MIPMAP_LINEAR||this._minFilter===c.LINEAR_MIPMAP_LINEAR||this._minFilter===c.NEAREST_MIPMAP_NEAREST}},{key:"minFilter",set:function(e){if(e!==c.LINEAR&&e!==c.NEAREST&&e!==c.NEAREST_MIPMAP_LINEAR&&e!==c.NEAREST_MIPMAP_LINEAR&&e!==c.LINEAR_MIPMAP_LINEAR&&e!==c.NEAREST_MIPMAP_NEAREST)return this;this._minFilter=e,c.bindTexture(c.TEXTURE_2D,this._texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,this._minFilter),c.bindTexture(c.TEXTURE_2D,null)},get:function(){return this._minFilter}},{key:"magFilter",set:function(e){if(e!==c.LINEAR&&e!==c.NEAREST)return this;this._magFilter=e,c.bindTexture(c.TEXTURE_2D,this._texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,this._magFilter),c.bindTexture(c.TEXTURE_2D,null)},get:function(){return this._magFilter}},{key:"wrapS",set:function(e){if(e!==c.CLAMP_TO_EDGE&&e!==c.REPEAT&&e!==c.MIRRORED_REPEAT)return this;this._wrapS=e,c.bindTexture(c.TEXTURE_2D,this._texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,this._wrapS),c.bindTexture(c.TEXTURE_2D,null)},get:function(){return this._wrapS}},{key:"wrapT",set:function(e){if(e!==c.CLAMP_TO_EDGE&&e!==c.REPEAT&&e!==c.MIRRORED_REPEAT)return this;this._wrapT=e,c.bindTexture(c.TEXTURE_2D,this._texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,this._wrapT),c.bindTexture(c.TEXTURE_2D,null)},get:function(){return this._wrapT}},{key:"premultiplyAlpha",set:function(e){this._premultiplyAlpha=e,c.bindTexture(c.TEXTURE_2D,this._texture),console.log("premultiplyAlpha:",e),c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiplyAlpha),c.bindTexture(c.TEXTURE_2D,null)},get:function(){return this._premultiplyAlpha}},{key:"texture",get:function(){return this._texture}}]),e}(),f=void 0,h=void 0,_=void 0;l.whiteTexture=function(){if(void 0===f){var e=document.createElement("canvas");e.width=e.height=4;var t=e.getContext("2d");t.fillStyle="#fff",t.fillRect(0,0,4,4),f=new l(e)}return f},l.greyTexture=function(){if(void 0===h){var e=document.createElement("canvas");e.width=e.height=4;var t=e.getContext("2d");t.fillStyle="rgb(127, 127, 127)",t.fillRect(0,0,4,4),h=new l(e)}return h},l.blackTexture=function(){if(void 0===_){var e=document.createElement("canvas");e.width=e.height=4;var t=e.getContext("2d");t.fillStyle="rgb(127, 127, 127)",t.fillRect(0,0,4,4),_=new l(e)}return _},t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return 0!==e&&!(e&e-1)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(49),u=r(o),s=n(8),c=r(s),l=n(0),f=r(l),h=n(4),_=r(h),d=void 0,v=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),d=f.default.gl,this._source=t,this._getDimension(t,i,a),this._sourceType=n.type||function(e){var t=f.default.UNSIGNED_BYTE;return e instanceof Array?t=f.default.UNSIGNED_BYTE:e instanceof Uint8Array?t=f.default.UNSIGNED_BYTE:e instanceof Float32Array?t=f.default.FLOAT:e instanceof HTMLImageElement?t="image":e instanceof HTMLCanvasElement?t="canvas":e instanceof HTMLVideoElement&&(t="video"),t}(t),this._checkSource(),this._texelType=this._getTexelType(),this._isTextureReady=!0,this._params=(0,u.default)(n,t,this._width,this._height),this._checkMipmap(),this._checkWrapping(),this._texture=d.createTexture(),"video"===this._sourceType?(this._isTextureReady=!1,_.default.addEF(function(){return r._loop()})):this._uploadTexture()}return a(e,[{key:"_loop",value:function(){4==this._source.readyState&&(this._isTextureReady=!0,this._uploadTexture())}},{key:"_uploadTexture",value:function(){d.bindTexture(d.TEXTURE_2D,this._texture),d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,!0),this._isSourceHtmlElement()?d.texImage2D(d.TEXTURE_2D,0,this._params.internalFormat,this._params.format,this._texelType,this._source):d.texImage2D(d.TEXTURE_2D,0,this._params.internalFormat,this._width,this._height,0,this._params.format,this._texelType,this._source),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,this._params.magFilter),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,this._params.minFilter),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,this._params.wrapS),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,this._params.wrapT),d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiplyAlpha),this._generateMipmap&&d.generateMipmap(d.TEXTURE_2D),d.bindTexture(d.TEXTURE_2D,null)}},{key:"bind",value:function(t){void 0===t&&(t=0),f.default.shader&&(d.activeTexture(d.TEXTURE0+t),this._isTextureReady?d.bindTexture(d.TEXTURE_2D,this._texture):d.bindTexture(d.TEXTURE_2D,e.blackTexture().texture),this._bindIndex=t)}},{key:"updateTexture",value:function(e){this._source=e,this._checkSource(),this._uploadTexture()}},{key:"generateMipmap",value:function(){this._generateMipmap&&(d.bindTexture(d.TEXTURE_2D,this._texture),d.generateMipmap(d.TEXTURE_2D),d.bindTexture(d.TEXTURE_2D,null))}},{key:"showParameters",value:function(){for(var e in console.log("Source type : ",c.default[this._sourceType]||this._sourceType),console.log("Texel type:",c.default[this.texelType]),console.log("Dimension :",this._width,this._height),this._params)console.log(e,c.default[this._params[e]]||this._params[e]);console.log("Mipmapping :",this._generateMipmap)}},{key:"_getDimension",value:function(e,t,n){e?(this._width=e.width||e.videoWidth,this._height=e.height||e.videoWidth,this._width=this._width||t,this._height=this._height||n,this._width&&this._height||(this._width=this._height=Math.sqrt(e.length/4))):(this._width=t,this._height=n)}},{key:"_checkSource",value:function(){this._source&&(this._sourceType===f.default.UNSIGNED_BYTE?this._source instanceof Uint8Array||(this._source=new Uint8Array(this._source)):this._sourceType===f.default.FLOAT&&(this._source instanceof Float32Array||(this._source=new Float32Array(this._source))))}},{key:"_getTexelType",value:function(){return this._isSourceHtmlElement()?f.default.UNSIGNED_BYTE:f.default[c.default[this._sourceType]]}},{key:"_checkMipmap",value:function(){this._generateMipmap=this._params.mipmap,i(this._width)&&i(this._height)||(this._generateMipmap=!1),-1==c.default[this._params.minFilter].indexOf("MIPMAP")&&(this._generateMipmap=!1)}},{key:"_checkWrapping",value:function(){this._generateMipmap||(this._params.wrapS=f.default.CLAMP_TO_EDGE,this._params.wrapT=f.default.CLAMP_TO_EDGE)}},{key:"_isSourceHtmlElement",value:function(){return"image"===this._sourceType||"video"===this._sourceType||"canvas"===this._sourceType}},{key:"minFilter",get:function(){return this._params.minFilter},set:function(e){console.log("set min filter : ",c.default[e]),this._params.minFilter=e,this._checkMipmap(),d.bindTexture(d.TEXTURE_2D,this._texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,this._params.minFilter),d.bindTexture(d.TEXTURE_2D,null),this.generateMipmap()}},{key:"magFilter",get:function(){return this._params.minFilter},set:function(e){console.log("set mag filter : ",c.default[e]),this._params.magFilter=e,d.bindTexture(d.TEXTURE_2D,this._texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,this._params.magFilter),d.bindTexture(d.TEXTURE_2D,null)}},{key:"wrapS",get:function(){return this._params.wrapS},set:function(e){this._params.wrapS=e,this._checkWrapping(),d.bindTexture(d.TEXTURE_2D,this._texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,this._params.wrapS),d.bindTexture(d.TEXTURE_2D,null)}},{key:"wrapT",get:function(){return this._params.wrapT},set:function(e){this._params.wrapT=e,this._checkWrapping(),d.bindTexture(d.TEXTURE_2D,this._texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,this._params.wrapT),d.bindTexture(d.TEXTURE_2D,null)}},{key:"texelType",get:function(){return this._texelType}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"texture",get:function(){return this._texture}},{key:"isTextureReady",get:function(){return this._isTextureReady}}]),e}(),p=void 0,E=void 0,m=void 0;v.whiteTexture=function(){if(void 0===p){var e=document.createElement("canvas");e.width=e.height=2;var t=e.getContext("2d");t.fillStyle="#fff",t.fillRect(0,0,2,2),p=new v(e)}return p},v.greyTexture=function(){if(void 0===E){var e=document.createElement("canvas");e.width=e.height=2;var t=e.getContext("2d");t.fillStyle="rgb(127, 127, 127)",t.fillRect(0,0,2,2),E=new v(e)}return E},v.blackTexture=function(){if(void 0===m){var e=document.createElement("canvas");e.width=e.height=2;var t=e.getContext("2d");t.fillStyle="rgb(0, 0, 0)",t.fillRect(0,0,2,2),m=new v(e)}return m},t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=r(a),u=n(50),s=r(u),c=void 0,l=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c=o.default.gl,r)this.texture=t;else{var i=t.length>6;t[0].mipmapCount&&(i=t[0].mipmapCount>1),this.texture=c.createTexture(),this.magFilter=n.magFilter||c.LINEAR,this.minFilter=n.minFilter||c.LINEAR_MIPMAP_LINEAR,this.wrapS=n.wrapS||c.CLAMP_TO_EDGE,this.wrapT=n.wrapT||c.CLAMP_TO_EDGE,i||this.minFilter!=c.LINEAR_MIPMAP_LINEAR||(this.minFilter=c.LINEAR),c.bindTexture(c.TEXTURE_CUBE_MAP,this.texture);var a=[c.TEXTURE_CUBE_MAP_POSITIVE_X,c.TEXTURE_CUBE_MAP_NEGATIVE_X,c.TEXTURE_CUBE_MAP_POSITIVE_Y,c.TEXTURE_CUBE_MAP_NEGATIVE_Y,c.TEXTURE_CUBE_MAP_POSITIVE_Z,c.TEXTURE_CUBE_MAP_NEGATIVE_Z],u=1,s=0;if(u=t.length/6,this.numLevels=u,i)for(var l=0;l<6;l++)for(var f=0;f<u;f++)c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1),t[s=l*u+f].shape?c.texImage2D(a[l],f,c.RGBA,t[s].shape[0],t[s].shape[1],0,c.RGBA,c.FLOAT,t[s].data):c.texImage2D(a[l],f,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,t[s]),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_S,this.wrapS),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_T,this.wrapT),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_MAG_FILTER,this.magFilter),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_MIN_FILTER,this.minFilter);else{for(var h=0,_=0;_<6;_++)h=_*u,c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1),t[h].shape?c.texImage2D(a[_],0,c.RGBA,t[h].shape[0],t[h].shape[1],0,c.RGBA,c.FLOAT,t[h].data):c.texImage2D(a[_],0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,t[h]),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_S,this.wrapS),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_T,this.wrapT),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_MAG_FILTER,this.magFilter),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_MIN_FILTER,this.minFilter);c.generateMipmap(c.TEXTURE_CUBE_MAP)}c.bindTexture(c.TEXTURE_CUBE_MAP,null)}}return i(e,[{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;o.default.shader&&(c.activeTexture(c.TEXTURE0+e),c.bindTexture(c.TEXTURE_CUBE_MAP,this.texture),c.uniform1i(o.default.shader.uniformTextures[e],e),this._bindIndex=e)}},{key:"unbind",value:function(){c.bindTexture(c.TEXTURE_CUBE_MAP,null)}}]),e}();l.parseDDS=function(e){var t=(0,s.default)(e),n=t.flags,r=new Int32Array(e,0,31),i=1;131072&n&&(i=Math.max(1,r[7]));var a=t.images.map(function(t){return{data:new Float32Array(e.slice(t.offset,t.offset+t.length)),shape:t.shape,mipmapCount:i}});return new l(a)},t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=r(a),u=n(26),s=r(u),c=n(8),l=void r(c),f=void 0,h=!1,_=void 0,d=function(){return!!o.default.webgl2||!!(_=o.default.getExtension("WEBGL_draw_buffers"))},v=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),l=o.default.gl,f=o.default.checkExtension("WEBGL_depth_texture"),this.width=t,this.height=n,this._numTargets=i,this._multipleTargets=i>1,this._parameters=r,h||d(),this._multipleTargets&&this._checkMaxNumRenderTarget(),this._init()}return i(e,[{key:"_init",value:function(){if(this._initTextures(),this.frameBuffer=l.createFramebuffer(),l.bindFramebuffer(l.FRAMEBUFFER,this.frameBuffer),o.default.webgl2){for(var e=[],t=0;t<this._numTargets;t++)l.framebufferTexture2D(l.DRAW_FRAMEBUFFER,l.COLOR_ATTACHMENT0+t,l.TEXTURE_2D,this._textures[t].texture,0),e.push(l["COLOR_ATTACHMENT"+t]);l.drawBuffers(e),l.framebufferTexture2D(l.DRAW_FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.TEXTURE_2D,this.glDepthTexture.texture,0)}else{for(var n=0;n<this._numTargets;n++)l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0+n,l.TEXTURE_2D,this._textures[n].texture,0);if(this._multipleTargets){for(var r=[],i=0;i<this._numTargets;i++)r.push(_["COLOR_ATTACHMENT"+i+"_WEBGL"]);_.drawBuffersWEBGL(r)}f&&l.framebufferTexture2D(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.TEXTURE_2D,this.glDepthTexture.texture,0)}var a=l.checkFramebufferStatus(l.FRAMEBUFFER);a!=l.FRAMEBUFFER_COMPLETE&&(console.error("FBOstatus",a),console.error("GL_FRAMEBUFFER_COMPLETE failed, CANNOT use Framebuffer")),l.bindTexture(l.TEXTURE_2D,null),l.bindRenderbuffer(l.RENDERBUFFER,null),l.bindFramebuffer(l.FRAMEBUFFER,null),this.clear()}},{key:"_checkMaxNumRenderTarget",value:function(){var e=o.default.gl.getParameter(_.MAX_DRAW_BUFFERS_WEBGL);this._numTargets>e&&(console.error("Over max number of draw buffers supported : ",e),this._numTargets=e)}},{key:"_initTextures",value:function(){this._textures=[];for(var e=0;e<this._numTargets;e++){var t=this._createTexture();this._textures.push(t)}o.default.webgl2?this.glDepthTexture=this._createTexture(l.DEPTH_COMPONENT16,l.UNSIGNED_SHORT,l.DEPTH_COMPONENT,!0):this.glDepthTexture=this._createTexture(l.DEPTH_COMPONENT,l.UNSIGNED_SHORT,l.DEPTH_COMPONENT,{minFilter:o.default.LINEAR})}},{key:"_createTexture",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=Object.assign({},this._parameters);for(var a in n||(n=e),i.internalFormat=e||l.RGBA,i.format=n,i.type=i.type||t||o.default.UNSIGNED_BYTE,t===l.UNSIGNED_SHORT&&(i.type=t),r)i[a]=r[a];return new s.default(null,i,this.width,this.height)}},{key:"bind",value:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&o.default.viewport(0,0,this.width,this.height),l.bindFramebuffer(l.FRAMEBUFFER,this.frameBuffer)}},{key:"unbind",value:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&o.default.viewport(0,0,o.default.width,o.default.height),l.bindFramebuffer(l.FRAMEBUFFER,null),this._textures.forEach(function(e){e.generateMipmap()})}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.bind(),o.default.clear(e,t,n,r),this.unbind()}},{key:"getTexture",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._textures[e]}},{key:"getDepthTexture",value:function(){return this.glDepthTexture}},{key:"showParameters",value:function(){this._textures[0].showParameters()}},{key:"texture",get:function(){return this._textures[0]}},{key:"depthTexture",get:function(){return this.glDepthTexture}},{key:"minFilter",get:function(){return this._textures[0].minFilter},set:function(e){this._textures.forEach(function(t){t.minFilter=e})}},{key:"magFilter",get:function(){return this._textures[0].magFilter},set:function(e){this._textures.forEach(function(t){t.magFilter=e})}},{key:"wrapS",get:function(){return this._textures[0].wrapS},set:function(e){this._textures.forEach(function(t){t.wrapS=e})}},{key:"wrapT",get:function(){return this._textures[0].wrapT},set:function(e){this._textures.forEach(function(t){t.wrapT=e})}},{key:"numTargets",get:function(){return this._numTargets}}]),e}();t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=!0;try{document.createEvent("CustomEvent")}catch(e){i=!1}var a=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._eventListeners={}}return r(e,[{key:"addEventListener",value:function(e,t){return null!==this._eventListeners&&void 0!==this._eventListeners||(this._eventListeners={}),this._eventListeners[e]||(this._eventListeners[e]=[]),this._eventListeners[e].push(t),this}},{key:"on",value:function(e,t){return this.addEventListener(e,t)}},{key:"removeEventListener",value:function(e,t){null!==this._eventListeners&&void 0!==this._eventListeners||(this._eventListeners={});var n=this._eventListeners[e];if(void 0===n)return this;for(var r=n.length,i=0;i<r;i++)n[i]===t&&(n.splice(i,1),i--,r--);return this}},{key:"off",value:function(e,t){return this.removeEventListener(e,t)}},{key:"dispatchEvent",value:function(e){null!==this._eventListeners&&void 0!==this._eventListeners||(this._eventListeners={});var t=e.type;try{null===e.target&&(e.target=this),e.currentTarget=this}catch(r){var n={type:t,detail:e.detail,dispatcher:this};return this.dispatchEvent(n)}var r=this._eventListeners[t];if(null!=r)for(var i=this._copyArray(r),a=i.length,o=0;o<a;o++){var u=i[o];u.call(this,e)}return this}},{key:"dispatchCustomEvent",value:function(e,t){var n=void 0;return i?((n=document.createEvent("CustomEvent")).dispatcher=this,n.initCustomEvent(e,!1,!1,t)):n={type:e,detail:t,dispatcher:this},this.dispatchEvent(n)}},{key:"trigger",value:function(e,t){return this.dispatchCustomEvent(e,t)}},{key:"_destroy",value:function(){if(null!==this._eventListeners){for(var e in this._eventListeners)if(this._eventListeners.hasOwnProperty(e)){for(var t=this._eventListeners[e],n=t.length,r=0;r<n;r++)t[r]=null;delete this._eventListeners[e]}this._eventListeners=null}}},{key:"_copyArray",value:function(e){for(var t=new Array(e.length),n=t.length,r=0;r<n;r++)t[r]=e[r];return t}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(10),o=r(a),u=n(4),s=r(u),c=n(2),l=function(e,t){var n=t||{};return e.touches?(n.x=e.touches[0].pageX,n.y=e.touches[0].pageY):(n.x=e.clientX,n.y=e.clientY),n},f=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._target=t,this._listenerTarget=r,this._mouse={},this._preMouse={},this.center=c.vec3.create(),this._up=c.vec3.fromValues(0,1,0),this.radius=new o.default(i),this.position=c.vec3.fromValues(0,0,this.radius.value),this.positionOffset=c.vec3.create(),this._rx=new o.default(0),this._rx.limit(-Math.PI/2,Math.PI/2),this._ry=new o.default(0),this._preRX=0,this._preRY=0,this._isLockZoom=!1,this._isLockRotation=!1,this._isInvert=!1,this.sensitivity=1,this._wheelBind=function(e){return n._onWheel(e)},this._downBind=function(e){return n._onDown(e)},this._moveBind=function(e){return n._onMove(e)},this._upBind=function(){return n._onUp()},this.connect(),s.default.addEF(function(){return n._loop()})}return i(e,[{key:"connect",value:function(){this.disconnect(),this._listenerTarget.addEventListener("mousewheel",this._wheelBind),this._listenerTarget.addEventListener("DOMMouseScroll",this._wheelBind),this._listenerTarget.addEventListener("mousedown",this._downBind),this._listenerTarget.addEventListener("touchstart",this._downBind),this._listenerTarget.addEventListener("mousemove",this._moveBind),this._listenerTarget.addEventListener("touchmove",this._moveBind),window.addEventListener("touchend",this._upBind),window.addEventListener("mouseup",this._upBind)}},{key:"disconnect",value:function(){this._listenerTarget.removeEventListener("mousewheel",this._wheelBind),this._listenerTarget.removeEventListener("DOMMouseScroll",this._wheelBind),this._listenerTarget.removeEventListener("mousedown",this._downBind),this._listenerTarget.removeEventListener("touchstart",this._downBind),this._listenerTarget.removeEventListener("mousemove",this._moveBind),this._listenerTarget.removeEventListener("touchmove",this._moveBind),window.removeEventListener("touchend",this._upBind),window.removeEventListener("mouseup",this._upBind)}},{key:"lock",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isLockZoom=e,this._isLockRotation=e,this._isMouseDown=!1}},{key:"lockZoom",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isLockZoom=e}},{key:"lockRotation",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isLockRotation=e}},{key:"inverseControl",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isInvert=e}},{key:"_onDown",value:function(e){this._isLockRotation||(this._isMouseDown=!0,l(e,this._mouse),l(e,this._preMouse),this._preRX=this._rx.targetValue,this._preRY=this._ry.targetValue)}},{key:"_onMove",value:function(e){if(!this._isLockRotation&&(l(e,this._mouse),e.touches&&e.preventDefault(),this._isMouseDown)){var t=-(this._mouse.x-this._preMouse.x);this._isInvert&&(t*=-1),this._ry.value=this._preRY-.01*t*this.sensitivity;var n=-(this._mouse.y-this._preMouse.y);this._isInvert&&(n*=-1),this._rx.value=this._preRX-.01*n*this.sensitivity}}},{key:"_onUp",value:function(){this._isLockRotation||(this._isMouseDown=!1)}},{key:"_onWheel",value:function(e){if(!this._isLockZoom){var t=e.wheelDelta,n=e.detail,r=0;r=n?t?t/n/40*n>0?1:-1:-n/3:t/120,this.radius.add(2*-r)}}},{key:"_loop",value:function(){this._updatePosition(),this._target&&this._updateCamera()}},{key:"_updatePosition",value:function(){this.position[1]=Math.sin(this._rx.value)*this.radius.value;var e=Math.cos(this._rx.value)*this.radius.value;this.position[0]=Math.cos(this._ry.value+.5*Math.PI)*e,this.position[2]=Math.sin(this._ry.value+.5*Math.PI)*e,c.vec3.add(this.position,this.position,this.positionOffset)}},{key:"_updateCamera",value:function(){this._target.lookAt(this.position,this.center,this._up)}},{key:"rx",get:function(){return this._rx}},{key:"ry",get:function(){return this._ry}}]),e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(12),o=(r=a)&&r.__esModule?r:{default:r},u=n(2),s=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=u.vec3.clone([0,0,5]),r=u.vec3.create(),i=u.vec3.clone([0,1,0]);return e.lookAt(n,r,i),e.ortho(-1,1,1,-1),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"setBoundary",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:100;this.ortho(e,t,n,r,i,a)}},{key:"ortho",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:100;this.left=e,this.right=t,this.top=n,this.bottom=r,mat4.ortho(this._projection,e,t,r,n,i,a)}}]),t}(o.default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2),o=n(4),u=(r=o)&&r.__esModule?r:{default:r},s=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._needUpdate=!0,this._x=0,this._y=0,this._z=0,this._sx=1,this._sy=1,this._sz=1,this._rx=0,this._ry=0,this._rz=0,this._position=a.vec3.create(),this._scale=a.vec3.fromValues(1,1,1),this._rotation=a.vec3.create(),this._matrix=a.mat4.create(),this._matrixParent=a.mat4.create(),this._matrixRotation=a.mat4.create(),this._matrixScale=a.mat4.create(),this._matrixTranslation=a.mat4.create(),this._matrixQuaternion=a.mat4.create(),this._quat=a.quat.create(),this._children=[]}return i(e,[{key:"addChild",value:function(e){this._children.push(e)}},{key:"removeChild",value:function(e){var t=this._children.indexOf(e);-1!=t?this._children.splice(t,1):console.warn("Child no exist")}},{key:"_update",value:function(){this._needUpdate&&(a.vec3.set(this._scale,this._sx,this._sy,this._sz),a.vec3.set(this._rotation,this._rx,this._ry,this._rz),a.vec3.set(this._position,this._x,this._y,this._z),a.mat4.identity(this._matrixTranslation,this._matrixTranslation),a.mat4.identity(this._matrixScale,this._matrixScale),a.mat4.identity(this._matrixRotation,this._matrixRotation),a.mat4.rotateX(this._matrixRotation,this._matrixRotation,this._rx),a.mat4.rotateY(this._matrixRotation,this._matrixRotation,this._ry),a.mat4.rotateZ(this._matrixRotation,this._matrixRotation,this._rz),a.mat4.fromQuat(this._matrixQuaternion,this._quat),a.mat4.mul(this._matrixRotation,this._matrixQuaternion,this._matrixRotation),a.mat4.scale(this._matrixScale,this._matrixScale,this._scale),a.mat4.translate(this._matrixTranslation,this._matrixTranslation,this._position),a.mat4.mul(this._matrix,this._matrixTranslation,this._matrixRotation),a.mat4.mul(this._matrix,this._matrix,this._matrixScale),a.mat4.mul(this._matrix,this._matrixParent,this._matrix),this.updateMatrix(),this._needUpdate=!1)}},{key:"updateMatrix",value:function(e){var t=this;e&&(this._needUpdate=!0,a.mat4.copy(this._matrixParent,e)),this._needUpdate&&this._children.forEach(function(e){e.updateMatrix(t._matrix)})}},{key:"setRotationFromQuaternion",value:function(e){var t=this;a.quat.copy(this._quat,e),this._needUpdate=!0,u.default.next(function(){return t._update()})}},{key:"matrix",get:function(){return this._needUpdate&&this._update(),this._matrix}},{key:"x",get:function(){return this._x},set:function(e){var t=this;this._needUpdate=!0,this._x=e,u.default.next(function(){return t._update()})}},{key:"y",get:function(){return this._y},set:function(e){var t=this;this._needUpdate=!0,this._y=e,u.default.next(function(){return t._update()})}},{key:"z",get:function(){return this._z},set:function(e){var t=this;this._needUpdate=!0,this._z=e,u.default.next(function(){return t._update()})}},{key:"scaleX",get:function(){return this._sx},set:function(e){var t=this;this._needUpdate=!0,this._sx=e,u.default.next(function(){return t._update()})}},{key:"scaleY",get:function(){return this._sy},set:function(e){var t=this;this._needUpdate=!0,this._sy=e,u.default.next(function(){return t._update()})}},{key:"scaleZ",get:function(){return this._sz},set:function(e){var t=this;this._needUpdate=!0,this._sz=e,u.default.next(function(){return t._update()})}},{key:"rotationX",get:function(){return this._rx},set:function(e){var t=this;this._needUpdate=!0,this._rx=e,u.default.next(function(){return t._update()})}},{key:"rotationY",get:function(){return this._ry},set:function(e){var t=this;this._needUpdate=!0,this._ry=e,u.default.next(function(){return t._update()})}},{key:"rotationZ",get:function(){return this._rz},set:function(e){var t=this;this._needUpdate=!0,this._rz=e,u.default.next(function(){return t._update()})}},{key:"children",get:function(){return this._children}}]),e}();t.default=s},function(e,t){e.exports="// generalWithNormal.vert\n\n#define SHADER_NAME GENERAL_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nuniform vec3 position;\nuniform vec3 scale;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvoid main(void) {\n\tvec3 pos      = aVertexPosition * scale;\n\tpos           += position;\n\tgl_Position   = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(pos, 1.0);\n\t\n\tvTextureCoord = aTextureCoord;\n\tvNormal       = normalize(uNormalMatrix * aNormal);\n}"},function(e,t){e.exports="// basic.vert\n\n#define SHADER_NAME SKYBOX_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vVertex;\nvarying vec3 vNormal;\n\nvoid main(void) {\n\tmat4 matView = uViewMatrix;\n\tmatView[3][0] = 0.0;\n\tmatView[3][1] = 0.0;\n\tmatView[3][2] = 0.0;\n\t\n\tgl_Position = uProjectionMatrix * matView * uModelMatrix * vec4(aVertexPosition, 1.0);\n\tvTextureCoord = aTextureCoord;\n\t\n\tvVertex = aVertexPosition;\n\tvNormal = aNormal;\n}"},function(e,t){e.exports="// basic.frag\n\n#define SHADER_NAME SKYBOX_FRAGMENT\n\nprecision mediump float;\n#define GLSLIFY 1\nuniform samplerCube texture;\nvarying vec2 vTextureCoord;\nvarying vec3 vVertex;\n\nvoid main(void) {\n    gl_FragColor = textureCube(texture, vVertex);\n}"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(28),o=(r=a)&&r.__esModule?r:{default:r},u=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._fbos=[];for(var u=0;u<t;u++){var s=new o.default(n,r,i,a);this._fbos.push(s)}}return i(e,[{key:"swap",value:function(){var e=this._fbos.shift();this._fbos.push(e)}},{key:"read",get:function(){return this._fbos[this._fbos.length-1]}},{key:"write",get:function(){return this._fbos[0]}},{key:"all",get:function(){return this._fbos}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.FboPingPong=t.FboArray=t.ShaderLibs=t.Draw=t.View3D=t.View=t.Scene=t.BatchFXAA=t.BatchSky=t.BatchSkybox=t.BatchLine=t.BatchDotsPlane=t.BatchBall=t.BatchAxis=t.BatchCopy=t.GLTFParser=t.HDRLoader=t.ObjLoader=t.BinaryLoader=t.Object3D=t.Ray=t.CameraCube=t.CameraPerspective=t.CameraOrtho=t.Camera=t.TouchDetector=t.QuatRotation=t.WebglNumber=t.OrbitalControl=t.TweenNumber=t.SpringNumber=t.EaseNumber=t.EventDispatcher=t.Scheduler=t.TransformFeedbackObject=t.MultisampleFrameBuffer=t.CubeFrameBuffer=t.FrameBuffer=t.Batch=t.Geom=t.Mesh=t.GLCubeTexture=t.GLTextureOld=t.GLTexture=t.GLShader=t.GL=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),u=n(0),s=r(u),c=n(1),l=r(c),f=n(25),h=r(f),_=n(26),d=r(_),v=n(27),p=r(v),E=n(5),m=r(E),T=n(7),b=r(T),y=n(6),R=r(y),g=n(28),M=r(g),x=n(51),A=r(x),P=n(52),O=r(P),w=n(53),S=r(w),L=n(4),I=r(L),N=n(29),C=r(N),F=n(10),U=r(F),D=n(54),B=r(D),k=n(55),V=r(k),X=n(30),G=r(X),j=n(56),Y=r(j),H=n(57),q=r(H),z=n(8),W=r(z),Z=n(23),K=(r(Z),n(12)),Q=r(K),$=n(31),J=r($),ee=n(13),te=r(ee),ne=n(59),re=r(ne),ie=n(11),ae=r(ie),oe=n(32),ue=r(oe),se=n(14),ce=r(se),le=n(60),fe=r(le),he=n(61),_e=r(he),de=n(63),ve=r(de),pe=n(64),Ee=r(pe),me=n(65),Te=r(me),be=n(68),ye=r(be),Re=n(69),ge=r(Re),Me=n(72),xe=r(Me),Ae=n(73),Pe=r(Ae),Oe=n(74),we=r(Oe),Se=n(76),Le=r(Se),Ie=n(78),Ne=r(Ie),Ce=n(79),Fe=r(Ce),Ue=n(80),De=r(Ue),Be=n(81),ke=r(Be),Ve=n(82),Xe=r(Ve),Ge=n(36),je=r(Ge),Ye=n(83),He=r(Ye),qe=function(){function e(){for(var t in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.glm=o,this.GL=s.default,this.GLTool=s.default,this.GLShader=l.default,this.GLTexture=d.default,this.GLTextureOld=h.default,this.GLCubeTexture=p.default,this.Mesh=m.default,this.Geom=b.default,this.Batch=R.default,this.FrameBuffer=M.default,this.CubeFrameBuffer=A.default,this.Scheduler=I.default,this.EventDispatcher=C.default,this.EaseNumber=U.default,this.SpringNumber=B.default,this.TweenNumber=V.default,this.Camera=Q.default,this.CameraOrtho=J.default,this.CameraPerspective=te.default,this.Ray=ae.default,this.CameraCube=re.default,this.OrbitalControl=G.default,this.QuatRotation=Y.default,this.BinaryLoader=ce.default,this.ObjLoader=fe.default,this.GLTFParser=ve.default,this.HDRLoader=_e.default,this.BatchCopy=Ee.default,this.BatchAxis=Te.default,this.BatchBall=ye.default,this.BatchBall=ye.default,this.BatchLine=xe.default,this.BatchSkybox=Pe.default,this.BatchSky=we.default,this.BatchFXAA=Le.default,this.BatchDotsPlane=ge.default,this.Scene=Ne.default,this.View=Fe.default,this.View3D=De.default,this.Draw=ke.default,this.Object3D=ue.default,this.ShaderLibs=Xe.default,this.WebglNumber=W.default,this.FboArray=je.default,this.FboPingPong=He.default,this.MultisampleFrameBuffer=O.default,this.TransformFeedbackObject=S.default,o)o[t]&&(window[t]=o[t])}return i(e,[{key:"log",value:function(){for(var e in navigator.userAgent.indexOf("Chrome")>-1?console.log("%clib alfrid : VERSION 0.3.6","background: #193441; color: #FCFFF5"):console.log("lib alfrid : VERSION ","0.3.6"),console.log("%cClasses : ","color: #193441"),this)this[e]&&console.log("%c - "+e,"color: #3E606F")}}]),e}(),ze=new qe;t.default=ze,t.GL=s.default,t.GLShader=l.default,t.GLTexture=d.default,t.GLTextureOld=h.default,t.GLCubeTexture=p.default,t.Mesh=m.default,t.Geom=b.default,t.Batch=R.default,t.FrameBuffer=M.default,t.CubeFrameBuffer=A.default,t.MultisampleFrameBuffer=O.default,t.TransformFeedbackObject=S.default,t.Scheduler=I.default,t.EventDispatcher=C.default,t.EaseNumber=U.default,t.SpringNumber=B.default,t.TweenNumber=V.default,t.OrbitalControl=G.default,t.WebglNumber=W.default,t.QuatRotation=Y.default,t.TouchDetector=q.default,t.Camera=Q.default,t.CameraOrtho=J.default,t.CameraPerspective=te.default,t.CameraCube=re.default,t.Ray=ae.default,t.Object3D=ue.default,t.BinaryLoader=ce.default,t.ObjLoader=fe.default,t.HDRLoader=_e.default,t.GLTFParser=ve.default,t.BatchCopy=Ee.default,t.BatchAxis=Te.default,t.BatchBall=ye.default,t.BatchDotsPlane=ge.default,t.BatchLine=xe.default,t.BatchSkybox=Pe.default,t.BatchSky=we.default,t.BatchFXAA=Le.default,t.Scene=Ne.default,t.View=Fe.default,t.View3D=De.default,t.Draw=ke.default,t.ShaderLibs=Xe.default,t.FboArray=je.default,t.FboPingPong=He.default},function(e,t,n){"use strict";function r(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],u=n[0],s=n[1],c=n[2],l=n[3];return e[0]=r*u+a*s,e[1]=i*u+o*s,e[2]=r*c+a*l,e[3]=i*c+o*l,e}function i(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}Object.defineProperty(t,"__esModule",{value:!0}),t.sub=t.mul=void 0,t.create=function(){var e=new o.ARRAY_TYPE(4);return o.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},t.clone=function(e){var t=new o.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},t.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},t.fromValues=function(e,t,n,r){var i=new o.ARRAY_TYPE(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i},t.set=function(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e},t.transpose=function(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},t.invert=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*a-i*r;return o?(o=1/o,e[0]=a*o,e[1]=-r*o,e[2]=-i*o,e[3]=n*o,e):null},t.adjoint=function(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e},t.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},t.multiply=r,t.rotate=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],u=Math.sin(n),s=Math.cos(n);return e[0]=r*s+a*u,e[1]=i*s+o*u,e[2]=r*-u+a*s,e[3]=i*-u+o*s,e},t.scale=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],u=n[0],s=n[1];return e[0]=r*u,e[1]=i*u,e[2]=a*s,e[3]=o*s,e},t.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e},t.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))},t.LDU=function(e,t,n,r){return e[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-e[2]*n[1],[e,t,n]},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},t.subtract=i,t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},t.equals=function(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],u=t[0],s=t[1],c=t[2],l=t[3];return Math.abs(n-u)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-s)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-c)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(a-l)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))},t.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},t.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e};var a=n(3),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a);t.mul=r,t.sub=i},function(e,t,n){"use strict";function r(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],u=t[4],s=t[5],c=n[0],l=n[1],f=n[2],h=n[3],_=n[4],d=n[5];return e[0]=r*c+a*l,e[1]=i*c+o*l,e[2]=r*f+a*h,e[3]=i*f+o*h,e[4]=r*_+a*d+u,e[5]=i*_+o*d+s,e}function i(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e}Object.defineProperty(t,"__esModule",{value:!0}),t.sub=t.mul=void 0,t.create=function(){var e=new o.ARRAY_TYPE(6);return o.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e},t.clone=function(e){var t=new o.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},t.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},t.fromValues=function(e,t,n,r,i,a){var u=new o.ARRAY_TYPE(6);return u[0]=e,u[1]=t,u[2]=n,u[3]=r,u[4]=i,u[5]=a,u},t.set=function(e,t,n,r,i,a,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e},t.invert=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],u=t[5],s=n*a-r*i;return s?(s=1/s,e[0]=a*s,e[1]=-r*s,e[2]=-i*s,e[3]=n*s,e[4]=(i*u-a*o)*s,e[5]=(r*o-n*u)*s,e):null},t.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},t.multiply=r,t.rotate=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],u=t[4],s=t[5],c=Math.sin(n),l=Math.cos(n);return e[0]=r*l+a*c,e[1]=i*l+o*c,e[2]=r*-c+a*l,e[3]=i*-c+o*l,e[4]=u,e[5]=s,e},t.scale=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],u=t[4],s=t[5],c=n[0],l=n[1];return e[0]=r*c,e[1]=i*c,e[2]=a*l,e[3]=o*l,e[4]=u,e[5]=s,e},t.translate=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],u=t[4],s=t[5],c=n[0],l=n[1];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=r*c+a*l+u,e[5]=i*c+o*l+s,e},t.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e[4]=0,e[5]=0,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},t.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e},t.subtract=i,t.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e},t.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},t.equals=function(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=t[0],l=t[1],f=t[2],h=t[3],_=t[4],d=t[5];return Math.abs(n-c)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(r-l)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(i-f)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(a-h)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(u-_)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(s-d)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(d))};var a=n(3),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a);t.mul=r,t.sub=i},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t,n){var r=.5*n[0],i=.5*n[1],a=.5*n[2],o=t[0],u=t[1],s=t[2],c=t[3];return e[0]=o,e[1]=u,e[2]=s,e[3]=c,e[4]=r*c+i*s-a*u,e[5]=i*c+a*o-r*s,e[6]=a*c+r*u-i*o,e[7]=-r*o-i*u-a*s,e}function a(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function o(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],u=n[4],s=n[5],c=n[6],l=n[7],f=t[4],h=t[5],_=t[6],d=t[7],v=n[0],p=n[1],E=n[2],m=n[3];return e[0]=r*m+o*v+i*E-a*p,e[1]=i*m+o*p+a*v-r*E,e[2]=a*m+o*E+r*p-i*v,e[3]=o*m-r*v-i*p-a*E,e[4]=r*l+o*u+i*c-a*s+f*m+d*v+h*E-_*p,e[5]=i*l+o*s+a*u-r*c+h*m+d*p+_*v-f*E,e[6]=a*l+o*c+r*s-i*u+_*m+d*E+f*p-h*v,e[7]=o*l-r*u-i*s-a*c+d*m-f*v-h*p-_*E,e}Object.defineProperty(t,"__esModule",{value:!0}),t.sqrLen=t.squaredLength=t.len=t.length=t.dot=t.mul=t.setReal=t.getReal=void 0,t.create=function(){var e=new s.ARRAY_TYPE(8);return s.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e},t.clone=function(e){var t=new s.ARRAY_TYPE(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t},t.fromValues=function(e,t,n,r,i,a,o,u){var c=new s.ARRAY_TYPE(8);return c[0]=e,c[1]=t,c[2]=n,c[3]=r,c[4]=i,c[5]=a,c[6]=o,c[7]=u,c},t.fromRotationTranslationValues=function(e,t,n,r,i,a,o){var u=new s.ARRAY_TYPE(8);u[0]=e,u[1]=t,u[2]=n,u[3]=r;var c=.5*i,l=.5*a,f=.5*o;return u[4]=c*r+l*n-f*t,u[5]=l*r+f*e-c*n,u[6]=f*r+c*t-l*e,u[7]=-c*e-l*t-f*n,u},t.fromRotationTranslation=i,t.fromTranslation=function(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=.5*t[0],e[5]=.5*t[1],e[6]=.5*t[2],e[7]=0,e},t.fromRotation=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e},t.fromMat4=function(e,t){var n=l.create();h.getRotation(n,t);var r=new s.ARRAY_TYPE(3);return h.getTranslation(r,t),i(e,n,r),e},t.copy=a,t.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e},t.set=function(e,t,n,r,i,a,o,u,s){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e[6]=u,e[7]=s,e},t.getDual=function(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e},t.setDual=function(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e},t.getTranslation=function(e,t){var n=t[4],r=t[5],i=t[6],a=t[7],o=-t[0],u=-t[1],s=-t[2],c=t[3];return e[0]=2*(n*c+a*o+r*s-i*u),e[1]=2*(r*c+a*u+i*o-n*s),e[2]=2*(i*c+a*s+n*u-r*o),e},t.translate=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],u=.5*n[0],s=.5*n[1],c=.5*n[2],l=t[4],f=t[5],h=t[6],_=t[7];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=o*u+i*c-a*s+l,e[5]=o*s+a*u-r*c+f,e[6]=o*c+r*s-i*u+h,e[7]=-r*u-i*s-a*c+_,e},t.rotateX=function(e,t,n){var r=-t[0],i=-t[1],a=-t[2],o=t[3],u=t[4],s=t[5],c=t[6],f=t[7],h=u*o+f*r+s*a-c*i,_=s*o+f*i+c*r-u*a,d=c*o+f*a+u*i-s*r,v=f*o-u*r-s*i-c*a;return l.rotateX(e,t,n),r=e[0],i=e[1],a=e[2],o=e[3],e[4]=h*o+v*r+_*a-d*i,e[5]=_*o+v*i+d*r-h*a,e[6]=d*o+v*a+h*i-_*r,e[7]=v*o-h*r-_*i-d*a,e},t.rotateY=function(e,t,n){var r=-t[0],i=-t[1],a=-t[2],o=t[3],u=t[4],s=t[5],c=t[6],f=t[7],h=u*o+f*r+s*a-c*i,_=s*o+f*i+c*r-u*a,d=c*o+f*a+u*i-s*r,v=f*o-u*r-s*i-c*a;return l.rotateY(e,t,n),r=e[0],i=e[1],a=e[2],o=e[3],e[4]=h*o+v*r+_*a-d*i,e[5]=_*o+v*i+d*r-h*a,e[6]=d*o+v*a+h*i-_*r,e[7]=v*o-h*r-_*i-d*a,e},t.rotateZ=function(e,t,n){var r=-t[0],i=-t[1],a=-t[2],o=t[3],u=t[4],s=t[5],c=t[6],f=t[7],h=u*o+f*r+s*a-c*i,_=s*o+f*i+c*r-u*a,d=c*o+f*a+u*i-s*r,v=f*o-u*r-s*i-c*a;return l.rotateZ(e,t,n),r=e[0],i=e[1],a=e[2],o=e[3],e[4]=h*o+v*r+_*a-d*i,e[5]=_*o+v*i+d*r-h*a,e[6]=d*o+v*a+h*i-_*r,e[7]=v*o-h*r-_*i-d*a,e},t.rotateByQuatAppend=function(e,t,n){var r=n[0],i=n[1],a=n[2],o=n[3],u=t[0],s=t[1],c=t[2],l=t[3];return e[0]=u*o+l*r+s*a-c*i,e[1]=s*o+l*i+c*r-u*a,e[2]=c*o+l*a+u*i-s*r,e[3]=l*o-u*r-s*i-c*a,u=t[4],s=t[5],c=t[6],l=t[7],e[4]=u*o+l*r+s*a-c*i,e[5]=s*o+l*i+c*r-u*a,e[6]=c*o+l*a+u*i-s*r,e[7]=l*o-u*r-s*i-c*a,e},t.rotateByQuatPrepend=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],u=n[0],s=n[1],c=n[2],l=n[3];return e[0]=r*l+o*u+i*c-a*s,e[1]=i*l+o*s+a*u-r*c,e[2]=a*l+o*c+r*s-i*u,e[3]=o*l-r*u-i*s-a*c,u=n[4],s=n[5],c=n[6],l=n[7],e[4]=r*l+o*u+i*c-a*s,e[5]=i*l+o*s+a*u-r*c,e[6]=a*l+o*c+r*s-i*u,e[7]=o*l-r*u-i*s-a*c,e},t.rotateAroundAxis=function(e,t,n,r){if(Math.abs(r)<s.EPSILON)return a(e,t);var i=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);r*=.5;var o=Math.sin(r),u=o*n[0]/i,c=o*n[1]/i,l=o*n[2]/i,f=Math.cos(r),h=t[0],_=t[1],d=t[2],v=t[3];e[0]=h*f+v*u+_*l-d*c,e[1]=_*f+v*c+d*u-h*l,e[2]=d*f+v*l+h*c-_*u,e[3]=v*f-h*u-_*c-d*l;var p=t[4],E=t[5],m=t[6],T=t[7];return e[4]=p*f+T*u+E*l-m*c,e[5]=E*f+T*c+m*u-p*l,e[6]=m*f+T*l+p*c-E*u,e[7]=T*f-p*u-E*c-m*l,e},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e},t.multiply=o,t.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e},t.lerp=function(e,t,n,r){var i=1-r;return _(t,n)<0&&(r=-r),e[0]=t[0]*i+n[0]*r,e[1]=t[1]*i+n[1]*r,e[2]=t[2]*i+n[2]*r,e[3]=t[3]*i+n[3]*r,e[4]=t[4]*i+n[4]*r,e[5]=t[5]*i+n[5]*r,e[6]=t[6]*i+n[6]*r,e[7]=t[7]*i+n[7]*r,e},t.invert=function(e,t){var n=v(t);return e[0]=-t[0]/n,e[1]=-t[1]/n,e[2]=-t[2]/n,e[3]=t[3]/n,e[4]=-t[4]/n,e[5]=-t[5]/n,e[6]=-t[6]/n,e[7]=t[7]/n,e},t.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e},t.normalize=function(e,t){var n=v(t);if(n>0){n=Math.sqrt(n);var r=t[0]/n,i=t[1]/n,a=t[2]/n,o=t[3]/n,u=t[4],s=t[5],c=t[6],l=t[7],f=r*u+i*s+a*c+o*l;e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=(u-r*f)/n,e[5]=(s-i*f)/n,e[6]=(c-a*f)/n,e[7]=(l-o*f)/n}return e},t.str=function(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]},t.equals=function(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],u=e[5],c=e[6],l=e[7],f=t[0],h=t[1],_=t[2],d=t[3],v=t[4],p=t[5],E=t[6],m=t[7];return Math.abs(n-f)<=s.EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-h)<=s.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(i-_)<=s.EPSILON*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(a-d)<=s.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(o-v)<=s.EPSILON*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(u-p)<=s.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))&&Math.abs(c-E)<=s.EPSILON*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(l-m)<=s.EPSILON*Math.max(1,Math.abs(l),Math.abs(m))};var u=n(3),s=r(u),c=n(20),l=r(c),f=n(19),h=r(f),_=(t.getReal=l.copy,t.setReal=l.copy,t.mul=o,t.dot=l.dot),d=t.length=l.length,v=(t.len=d,t.squaredLength=l.squaredLength);t.sqrLen=v},function(e,t,n){"use strict";function r(){var e=new _.ARRAY_TYPE(2);return _.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0),e}function i(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function a(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function o(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function u(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}function s(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function c(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)}function l(e){var t=e[0],n=e[1];return t*t+n*n}Object.defineProperty(t,"__esModule",{value:!0}),t.forEach=t.sqrLen=t.sqrDist=t.dist=t.div=t.mul=t.sub=t.len=void 0,t.create=r,t.clone=function(e){var t=new _.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},t.fromValues=function(e,t){var n=new _.ARRAY_TYPE(2);return n[0]=e,n[1]=t,n},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},t.set=function(e,t,n){return e[0]=t,e[1]=n,e},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},t.subtract=i,t.multiply=a,t.divide=o,t.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},t.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},t.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e},t.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e},t.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},t.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},t.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e},t.distance=u,t.squaredDistance=s,t.length=c,t.squaredLength=l,t.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},t.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},t.normalize=function(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e},t.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},t.cross=function(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e},t.lerp=function(e,t,n,r){var i=t[0],a=t[1];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e},t.random=function(e,t){t=t||1;var n=2*_.RANDOM()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e},t.transformMat2=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e},t.transformMat2d=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e},t.transformMat3=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e},t.transformMat4=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e},t.rotate=function(e,t,n,r){var i=t[0]-n[0],a=t[1]-n[1],o=Math.sin(r),u=Math.cos(r);return e[0]=i*u-a*o+n[0],e[1]=i*o+a*u+n[1],e},t.angle=function(e,t){var n=e[0],r=e[1],i=t[0],a=t[1],o=n*n+r*r;o>0&&(o=1/Math.sqrt(o));var u=i*i+a*a;u>0&&(u=1/Math.sqrt(u));var s=(n*i+r*a)*o*u;return s>1?0:s<-1?Math.PI:Math.acos(s)},t.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]},t.equals=function(e,t){var n=e[0],r=e[1],i=t[0],a=t[1];return Math.abs(n-i)<=_.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-a)<=_.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))};var f,h=n(3),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(h);t.len=c,t.sub=i,t.mul=a,t.div=o,t.dist=u,t.sqrDist=s,t.sqrLen=l,t.forEach=(f=r(),function(e,t,n,r,i,a){var o=void 0,u=void 0;for(t||(t=2),n||(n=0),u=r?Math.min(r*t+n,e.length):e.length,o=n;o<u;o+=t)f[0]=e[o],f[1]=e[o+1],i(f,f,a),e[o]=f[0],e[o+1]=f[1];return e})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.getExtension(t);if(!n)return!1;var r=t.split("_")[0],i=new RegExp(r+"$");for(var a in n)if("function"==typeof n[a]){var o=a.replace(i,"");a.substring&&(e[o]=n[a].bind(n))}return!0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=r(i),o=n(23),u=r(o);t.default=function(){for(var e in u.default)a.default[e]?console.log("already exist : ",e):a.default[e]=u.default[e]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return o||(u=a.default.webgl2?a.default.gl.FLOAT:a.default.getExtension("OES_texture_float")?a.default.gl.FLOAT:(console.warn("USING FLOAT BUT OES_texture_float NOT SUPPORTED"),a.default.gl.UNSIGNED_BYTE)),u};var r,i=n(0),a=(r=i)&&r.__esModule?r:{default:r},o=!1,u=void 0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return o||(u=function(){if(a.default.webgl2)return a.default.gl.HALF_FLOAT;var e=a.default.getExtension("OES_texture_half_float");return e?e.HALF_FLOAT_OES:(console.warn("USING HALF FLOAT BUT OES_texture_half_float NOT SUPPORTED"),a.default.gl.UNSIGNED_BYTE)}()),u};var r,i=n(0),a=(r=i)&&r.__esModule?r:{default:r},o=!1,u=void 0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["EXT_shader_texture_lod","EXT_sRGB","EXT_frag_depth","OES_texture_float","OES_texture_half_float","OES_texture_float_linear","OES_texture_half_float_linear","OES_standard_derivatives","WEBGL_depth_texture","EXT_texture_filter_anisotropic","OES_vertex_array_object","ANGLE_instanced_arrays","WEBGL_draw_buffers"]},function(e,t,n){"use strict";e.exports=function(e){"string"==typeof e&&(e=[e]);for(var t=[].slice.call(arguments,1),n=[],r=0;r<e.length-1;r++)n.push(e[r],t[r]||"");return n.push(e[r]),n.join("")}},function(e,t){e.exports="// basic.frag\n\n#define SHADER_NAME BASIC_FRAGMENT\n\nprecision lowp float;\n#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nuniform float time;\n// uniform sampler2D texture;\n\nvoid main(void) {\n    gl_FragColor = vec4(vTextureCoord, sin(time) * .5 + .5, 1.0);\n}"},function(e,t,n){"use strict";function r(e){return 0!==e&&!(e&e-1)}Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(0),o=(i=a)&&i.__esModule?i:{default:i};t.default=function(e,t,n,i){if(!e.minFilter){var a=o.default.LINEAR;n&&n&&r(n)&&r(i)&&(a=o.default.NEAREST_MIPMAP_LINEAR),e.minFilter=a}return e.mipmap=e.mipmap||!0,e.magFilter=e.magFilter||o.default.LINEAR,e.wrapS=e.wrapS||o.default.CLAMP_TO_EDGE,e.wrapT=e.wrapT||o.default.CLAMP_TO_EDGE,e.internalFormat=e.internalFormat||o.default.RGBA,e.format=e.format||o.default.RGBA,e.premultiplyAlpha=e.premultiplyAlpha||!1,e.level=e.level||0,e}},function(e,t,n){"use strict";function r(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}var i=542327876,a=131072,o=4,u=r("DXT1"),s=r("DXT3"),c=r("DXT5"),l=r("DX10"),f=116,h=512,_=3,d=2,v=31,p=0,E=1,m=2,T=3,b=4,y=7,R=20,g=21,M=28;e.exports=function(e){var t=new Int32Array(e,0,v);if(t[p]!==i)throw new Error("Invalid magic number in DDS header");if(!t[R]&o)throw new Error("Unsupported format, must contain a FourCC code");var n,r,x,A=t[g];switch(A){case u:n=8,r="dxt1";break;case s:n=16,r="dxt3";break;case c:n=16,r="dxt5";break;case f:r="rgba32f";break;case l:var P=new Uint32Array(e.slice(128,148));r=P[0];var O=P[1];if(P[2],P[3],P[4],O!==_||r!==d)throw new Error("Unsupported DX10 texture format "+r);r="rgba32f";break;default:throw new Error("Unsupported FourCC code: "+(x=A,String.fromCharCode(255&x,x>>8&255,x>>16&255,x>>24&255)))}var w=t[m],S=1;w&a&&(S=Math.max(1,t[y]));var L=!1;t[M]&h&&(L=!0);var I,N=t[b],C=t[T],F=t[E]+4,U=N,D=C,B=[];if(A===l&&(F+=20),L)for(var k=0;k<6;k++){if("rgba32f"!==r)throw new Error("Only RGBA32f cubemaps are supported");N=U,C=D;for(var V=Math.log(N)/Math.log(2)+1,X=0;X<V;X++)I=N*C*16,B.push({offset:F,length:I,shape:[N,C]}),X<S&&(F+=I),N=Math.floor(N/2),C=Math.floor(C/2)}else for(var X=0;X<S;X++)I=Math.max(4,N)/4*Math.max(4,C)/4*n,B.push({offset:F,length:I,shape:[N,C]}),F+=I,N=Math.floor(N/2),C=Math.floor(C/2);return{shape:[U,D],images:B,format:r,flags:w,cubemap:L}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=r(a),u=n(27),s=r(u),c=void 0,l=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),c=o.default.gl,this._size=t,this.magFilter=n.magFilter||c.LINEAR,this.minFilter=n.minFilter||c.LINEAR,this.wrapS=n.wrapS||c.CLAMP_TO_EDGE,this.wrapT=n.wrapT||c.CLAMP_TO_EDGE,this._init()}return i(e,[{key:"_init",value:function(){this.texture=c.createTexture(),this.glTexture=new s.default(this.texture,{},!0),c.bindTexture(c.TEXTURE_CUBE_MAP,this.texture),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_MAG_FILTER,this.magFilter),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_MIN_FILTER,this.minFilter),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_S,this.wrapS),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_T,this.wrapT);for(var e=[c.TEXTURE_CUBE_MAP_POSITIVE_X,c.TEXTURE_CUBE_MAP_NEGATIVE_X,c.TEXTURE_CUBE_MAP_POSITIVE_Y,c.TEXTURE_CUBE_MAP_NEGATIVE_Y,c.TEXTURE_CUBE_MAP_POSITIVE_Z,c.TEXTURE_CUBE_MAP_NEGATIVE_Z],t=0;t<e.length;t++)c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1),c.texImage2D(e[t],0,c.RGBA,this.width,this.height,0,c.RGBA,c.FLOAT,null);this._frameBuffers=[];for(var n=0;n<e.length;n++){var r=c.createFramebuffer();c.bindFramebuffer(c.FRAMEBUFFER,r),c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,e[n],this.texture,0);var i=c.checkFramebufferStatus(c.FRAMEBUFFER);i!==c.FRAMEBUFFER_COMPLETE&&console.log("'gl.checkFramebufferStatus() returned '"+i),this._frameBuffers.push(r)}c.bindFramebuffer(c.FRAMEBUFFER,null),c.bindRenderbuffer(c.RENDERBUFFER,null),c.bindTexture(c.TEXTURE_CUBE_MAP,null)}},{key:"bind",value:function(e){o.default.viewport(0,0,this.width,this.height),c.bindFramebuffer(c.FRAMEBUFFER,this._frameBuffers[e])}},{key:"unbind",value:function(){c.bindFramebuffer(c.FRAMEBUFFER,null),o.default.viewport(0,0,o.default.width,o.default.height)}},{key:"getTexture",value:function(){return this.glTexture}},{key:"width",get:function(){return this._size}},{key:"height",get:function(){return this._size}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return 0!==e&&!(e&e-1)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),u=r(o),s=n(25),c=r(s),l=void 0,f=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),l=u.default.gl,this.width=t,this.height=n,this.magFilter=r.magFilter||l.LINEAR,this.minFilter=r.minFilter||l.LINEAR,this.wrapS=r.wrapS||l.CLAMP_TO_EDGE,this.wrapT=r.wrapT||l.CLAMP_TO_EDGE,this.useDepth=r.useDepth||!0,this.useStencil=r.useStencil||!1,this.texelType=r.type,this._numSample=r.numSample||8,i(this.width)&&i(this.height)||(this.wrapS=this.wrapT=l.CLAMP_TO_EDGE,this.minFilter===l.LINEAR_MIPMAP_NEAREST&&(this.minFilter=l.LINEAR)),this._init()}return a(e,[{key:"_init",value:function(){var e=l.UNSIGNED_BYTE;this.texelType&&(e=this.texelType),this.texelType=e,this.frameBuffer=l.createFramebuffer(),this.frameBufferColor=l.createFramebuffer(),this.renderBufferColor=l.createRenderbuffer(),this.renderBufferDepth=l.createRenderbuffer(),this.glTexture=this._createTexture(),this.glDepthTexture=this._createTexture(l.DEPTH_COMPONENT16,l.UNSIGNED_SHORT,l.DEPTH_COMPONENT,!0),l.bindRenderbuffer(l.RENDERBUFFER,this.renderBufferColor),l.renderbufferStorageMultisample(l.RENDERBUFFER,this._numSample,l.RGBA8,this.width,this.height),l.bindRenderbuffer(l.RENDERBUFFER,this.renderBufferDepth),l.renderbufferStorageMultisample(l.RENDERBUFFER,this._numSample,l.DEPTH_COMPONENT16,this.width,this.height),l.bindFramebuffer(l.FRAMEBUFFER,this.frameBuffer),l.framebufferRenderbuffer(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.RENDERBUFFER,this.renderBufferColor),l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,this.renderBufferDepth),l.bindFramebuffer(l.FRAMEBUFFER,null),l.bindFramebuffer(l.FRAMEBUFFER,this.frameBufferColor),l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,this.glTexture.texture,0),l.bindFramebuffer(l.FRAMEBUFFER,null)}},{key:"_createTexture",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];void 0===e&&(e=l.RGBA),void 0===t&&(t=this.texelType),n||(n=e);var i=l.createTexture(),a=new c.default(i,!0),o=r?u.default.NEAREST:this.magFilter,s=r?u.default.NEAREST:this.minFilter;return l.bindTexture(l.TEXTURE_2D,i),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,o),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,s),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,this.wrapS),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,this.wrapT),l.texImage2D(l.TEXTURE_2D,0,e,this.width,this.height,0,n,t,null),l.bindTexture(l.TEXTURE_2D,null),a}},{key:"bind",value:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&u.default.viewport(0,0,this.width,this.height),l.bindFramebuffer(l.FRAMEBUFFER,this.frameBuffer)}},{key:"unbind",value:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&u.default.viewport(0,0,u.default.width,u.default.height);var e=this.width,t=this.height;l.bindFramebuffer(l.FRAMEBUFFER,null),l.bindFramebuffer(l.READ_FRAMEBUFFER,this.frameBuffer),l.bindFramebuffer(l.DRAW_FRAMEBUFFER,this.frameBufferColor),l.clearBufferfv(l.COLOR,0,[0,0,0,0]),l.blitFramebuffer(0,0,e,t,0,0,e,t,l.COLOR_BUFFER_BIT,u.default.NEAREST),l.bindFramebuffer(l.FRAMEBUFFER,null)}},{key:"getTexture",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.glTexture}},{key:"getDepthTexture",value:function(){return this.glDepthTexture}}]),e}();t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=r(a),u=n(1),s=r(u),c=n(5),l=r(c),f=void 0,h=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),f=o.default.gl,this._vs=t,this._fs=n,this._init()}return i(e,[{key:"_init",value:function(){this._meshCurrent=new l.default,this._meshTarget=new l.default,this._numPoints=-1,this._varyings=[],this.transformFeedback=f.createTransformFeedback()}},{key:"bufferData",value:function(e,t,n){var r=!!n;console.log("is Transform feedback ?",t,r),this._meshCurrent.bufferData(e,t,null,f.STREAM_COPY,!1),this._meshTarget.bufferData(e,t,null,f.STREAM_COPY,!1),r&&(this._varyings.push(n),this._numPoints<0&&(this._numPoints=e.length))}},{key:"bufferIndex",value:function(e){this._meshCurrent.bufferIndex(e),this._meshTarget.bufferIndex(e)}},{key:"uniform",value:function(e,t,n){this.shader&&this.shader.uniform(e,t,n)}},{key:"generate",value:function(){this.shader=new s.default(this._vs,this._fs,this._varyings)}},{key:"render",value:function(){this.shader||this.generate(),this.shader.bind(),o.default.drawTransformFeedback(this),this._swap()}},{key:"_swap",value:function(){var e=this._meshCurrent;this._meshCurrent=this._meshTarget,this._meshTarget=e}},{key:"numPoints",get:function(){return this._numPoints}},{key:"meshCurrent",get:function(){return this._meshCurrent}},{key:"meshTarget",get:function(){return this._meshTarget}},{key:"meshSource",get:function(){return this._meshCurrent}},{key:"meshDestination",get:function(){return this._meshTarget}}]),e}();t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(4),o=(r=a)&&r.__esModule?r:{default:r},u=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._value=t,this._targetValue=t,this.speed=r,this.decreaseRate=i,this._velocity=0,this._efIndex=o.default.addEF(function(){return n._update()})}return i(e,[{key:"_update",value:function(){this._checkLimit(),Math.abs(this._targetValue-this._value)<1e-4?this._value=this._targetValue:(this._velocity+=(this._targetValue-this._value)*this.speed,this._value+=this._velocity,this._velocity*=this.decreaseRate,Math.abs(this._targetValue-this._value)<1e-4&&(this._value=this._targetValue))}},{key:"limit",value:function(e,t){e>t?this.limit(t,e):(this._min=e,this._max=t,this._checkLimit())}},{key:"_checkLimit",value:function(){void 0!==this._min&&this._targetValue<this._min&&(this._targetValue=this._min),void 0!==this._max&&this._targetValue>this._max&&(this._targetValue=this._max)}},{key:"destroy",value:function(){o.default.removeEF(this._efIndex)}},{key:"value",set:function(e){this._targetValue=e},get:function(){return this._value}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(4),o=(r=a)&&r.__esModule?r:{default:r},u={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){var t=void 0,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))},Out:function(e){var t=void 0,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)},InOut:function(e){var t=void 0,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),(e*=2)<1?n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*-.5:n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*.5+1)}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{in:function(e){return 1-u.Bounce.out(1-e)},out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},inOut:function(e){return e<.5?.5*u.Bounce.in(2*e):.5*u.Bounce.out(2*e-1)+.5}}},s=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expOut",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._value=t,this._startValue=t,this._targetValue=t,this._counter=1,this.speed=i,this.easing=r,this._needUpdate=!0,this._efIndex=o.default.addEF(function(){return n._update()})}return i(e,[{key:"_update",value:function(){var e=this._counter+this.speed;e>1&&(e=1),this._counter!==e?(this._counter=e,this._needUpdate=!0):this._needUpdate=!1}},{key:"limit",value:function(e,t){e>t?this.limit(t,e):(this._min=e,this._max=t,this._checkLimit())}},{key:"setTo",value:function(e){this._value=e,this._targetValue=e,this._counter=1}},{key:"_checkLimit",value:function(){void 0!==this._min&&this._targetValue<this._min&&(this._targetValue=this._min),void 0!==this._max&&this._targetValue>this._max&&(this._targetValue=this._max)}},{key:"destroy",value:function(){o.default.removeEF(this._efIndex)}},{key:"value",set:function(e){this._startValue=this._value,this._targetValue=e,this._checkLimit(),this._counter=0},get:function(){if(this._needUpdate){var e=function(e){switch(e){default:case"linear":return u.Linear.None;case"expIn":return u.Exponential.In;case"expOut":return u.Exponential.Out;case"expInOut":return u.Exponential.InOut;case"cubicIn":return u.Cubic.In;case"cubicOut":return u.Cubic.Out;case"cubicInOut":return u.Cubic.InOut;case"quarticIn":return u.Quartic.In;case"quarticOut":return u.Quartic.Out;case"quarticInOut":return u.Quartic.InOut;case"quinticIn":return u.Quintic.In;case"quinticOut":return u.Quintic.Out;case"quinticInOut":return u.Quintic.InOut;case"sinusoidalIn":return u.Sinusoidal.In;case"sinusoidalOut":return u.Sinusoidal.Out;case"sinusoidalInOut":return u.Sinusoidal.InOut;case"circularIn":return u.Circular.In;case"circularOut":return u.Circular.Out;case"circularInOut":return u.Circular.InOut;case"elasticIn":return u.Elastic.In;case"elasticOut":return u.Elastic.Out;case"elasticInOut":return u.Elastic.InOut;case"backIn":return u.Back.In;case"backOut":return u.Back.Out;case"backInOut":return u.Back.InOut;case"bounceIn":return u.Bounce.in;case"bounceOut":return u.Bounce.out;case"bounceInOut":return u.Bounce.inOut}}(this.easing),t=e(this._counter);this._value=this._startValue+t*(this._targetValue-this._startValue),this._needUpdate=!1}return this._value}},{key:"targetValue",get:function(){return this._targetValue}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2),o=n(10),u=r(o),s=n(4),c=r(s),l=function(e,t){var n=t||{};return e.touches?(n.x=e.touches[0].pageX,n.y=e.touches[0].pageY):(n.x=e.clientX,n.y=e.clientY),n},f=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._target=t,this._listenerTarget=r,this.matrix=a.mat4.create(),this.m=a.mat4.create(),this._vZaxis=a.vec3.clone([0,0,0]),this._zAxis=a.vec3.clone([0,0,1]),this.preMouse={x:0,y:0},this.mouse={x:0,y:0},this._isMouseDown=!1,this._rotation=a.quat.create(),this.tempRotation=a.quat.create(),this._rotateZMargin=0,this._offset=.004,this._slerp=-1,this._isLocked=!1,this._diffX=new u.default(0,i),this._diffY=new u.default(0,i),this._listenerTarget.addEventListener("mousedown",function(e){return n._onDown(e)}),this._listenerTarget.addEventListener("touchstart",function(e){return n._onDown(e)}),this._listenerTarget.addEventListener("mousemove",function(e){return n._onMove(e)}),this._listenerTarget.addEventListener("touchmove",function(e){return n._onMove(e)}),window.addEventListener("touchend",function(){return n._onUp()}),window.addEventListener("mouseup",function(){return n._onUp()}),c.default.addEF(function(){return n._loop()})}return i(e,[{key:"inverseControl",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isInvert=e}},{key:"lock",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isLocked=e}},{key:"setCameraPos",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;if(this.easing=t,!(this._slerp>0)){var n=a.quat.clone(this._rotation);this._updateRotation(n),this._rotation=a.quat.clone(n),this._currDiffX=this.diffX=0,this._currDiffY=this.diffY=0,this._isMouseDown=!1,this._isRotateZ=0,this._targetQuat=a.quat.clone(e),this._slerp=1}}},{key:"resetQuat",value:function(){this._rotation=a.quat.clone([0,0,1,0]),this.tempRotation=a.quat.clone([0,0,0,0]),this._targetQuat=void 0,this._slerp=-1}},{key:"_onDown",value:function(e){if(!this._isLocked){var t=l(e),n=a.quat.clone(this._rotation);this._updateRotation(n),this._rotation=n,this._isMouseDown=!0,this._isRotateZ=0,this.preMouse={x:t.x,y:t.y},t.y<this._rotateZMargin||t.y>window.innerHeight-this._rotateZMargin?this._isRotateZ=1:(t.x<this._rotateZMargin||t.x>window.innerWidth-this._rotateZMargin)&&(this._isRotateZ=2),this._diffX.setTo(0),this._diffY.setTo(0)}}},{key:"_onMove",value:function(e){this._isLocked||l(e,this.mouse)}},{key:"_onUp",value:function(){this._isLocked||(this._isMouseDown=!1)}},{key:"_updateRotation",value:function(e){this._isMouseDown&&!this._isLocked&&(this._diffX.value=-(this.mouse.x-this.preMouse.x),this._diffY.value=this.mouse.y-this.preMouse.y,this._isInvert&&(this._diffX.value=-this._diffX.targetValue,this._diffY.value=-this._diffY.targetValue));var t=void 0,n=void 0;if(this._isRotateZ>0)1===this._isRotateZ?(t=-this._diffX.value*this._offset,t*=this.preMouse.y<this._rotateZMargin?-1:1,n=a.quat.clone([0,0,Math.sin(t),Math.cos(t)]),a.quat.multiply(n,e,n)):(t=-this._diffY.value*this._offset,t*=this.preMouse.x<this._rotateZMargin?1:-1,n=a.quat.clone([0,0,Math.sin(t),Math.cos(t)]),a.quat.multiply(n,e,n));else{var r=a.vec3.clone([this._diffX.value,this._diffY.value,0]),i=a.vec3.create();a.vec3.cross(i,r,this._zAxis),a.vec3.normalize(i,i),t=a.vec3.length(r)*this._offset,n=a.quat.clone([Math.sin(t)*i[0],Math.sin(t)*i[1],Math.sin(t)*i[2],Math.cos(t)]),a.quat.multiply(e,n,e)}}},{key:"_loop",value:function(){a.mat4.identity(this.m),void 0===this._targetQuat?(a.quat.set(this.tempRotation,this._rotation[0],this._rotation[1],this._rotation[2],this._rotation[3]),this._updateRotation(this.tempRotation)):(this._slerp+=.1*(0-this._slerp),this._slerp<5e-4?(a.quat.copy(this._rotation,this._targetQuat),a.quat.copy(this.tempRotation,this._targetQuat),this._targetQuat=void 0,this._diffX.setTo(0),this._diffY.setTo(0),this._slerp=-1):(a.quat.set(this.tempRotation,0,0,0,0),a.quat.slerp(this.tempRotation,this._targetQuat,this._rotation,this._slerp))),a.vec3.transformQuat(this._vZaxis,this._vZaxis,this.tempRotation),a.mat4.fromQuat(this.matrix,this.tempRotation)}},{key:"easing",set:function(e){this._diffX.easing=e,this._diffY.easing=e},get:function(){return this._diffX.easing}}]),e}();t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=r(a),u=n(29),s=r(u),c=n(11),l=r(c),f=n(58),h=r(f),_=function(e){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a._mesh=e,a._mesh.generateFaces(),a._camera=n,a.faceVertices=e.faces.map(function(e){return e.vertices}),a.clickTolerance=8,a._ray=new l.default([0,0,0],[0,0,-1]),a._hit=vec3.fromValues(-999,-999,-999),a._lastPos,a._firstPos,a.mtxModel=mat4.create(),a._listenerTarget=i,a._skippingMove=r,a._onMoveBind=function(e){return a._onMove(e)},a._onDownBind=function(e){return a._onDown(e)},a._onUpBind=function(){return a._onUp()},a.connect(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"connect",value:function(){this._listenerTarget.addEventListener("mousedown",this._onDownBind),this._listenerTarget.addEventListener("mousemove",this._onMoveBind),this._listenerTarget.addEventListener("mouseup",this._onUpBind)}},{key:"disconnect",value:function(){this._listenerTarget.removeEventListener("mousedown",this._onDownBind),this._listenerTarget.removeEventListener("mousemove",this._onMoveBind),this._listenerTarget.removeEventListener("mouseup",this._onUpBind)}},{key:"_checkHit",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"onHit",n=this._camera;if(n){var r=this._lastPos.x/o.default.width*2-1,i=-this._lastPos.y/o.default.height*2+1;n.generateRay([r,i,0],this._ray);for(var a=void 0,u=vec3.create(),s=vec3.create(),c=vec3.create(),l=0,f=function(t,n){vec3.transformMat4(n,t,e.mtxModel)},h=0;h<this.faceVertices.length;h++){var _=this.faceVertices[h];f(_[0],u),f(_[1],s),f(_[2],c);var d=this._ray.intersectTriangle(u,s,c);if(d)if(a){var v=vec3.dist(d,n.position);v<l&&(a=vec3.clone(d),l=v)}else a=vec3.clone(d),l=vec3.dist(a,n.position)}a?(this._hit=vec3.clone(a),this.dispatchCustomEvent(t,{hit:a})):this.dispatchCustomEvent("onUp")}}},{key:"_onDown",value:function(e){this._firstPos=(0,h.default)(e),this._lastPos=(0,h.default)(e),this._checkHit("onDown")}},{key:"_onMove",value:function(e){this._lastPos=(0,h.default)(e),this._skippingMove||this._checkHit()}},{key:"_onUp",value:function(){var e,t,n,r;e=this._firstPos,t=this._lastPos,n=e.x-t.x,r=e.y-t.y,Math.sqrt(n*n+r*r)<this.clickTolerance&&this._checkHit()}}]),t}(s.default);t.default=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=void 0,n=void 0;return e.touches?(t=e.touches[0].pageX,n=e.touches[0].pageY):(t=e.clientX,n=e.clientY),{x:t,y:n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(13),o=(r=a)&&r.__esModule?r:{default:r},u=n(2),s=[[u.vec3.fromValues(0,0,0),u.vec3.fromValues(1,0,0),u.vec3.fromValues(0,-1,0)],[u.vec3.fromValues(0,0,0),u.vec3.fromValues(-1,0,0),u.vec3.fromValues(0,-1,0)],[u.vec3.fromValues(0,0,0),u.vec3.fromValues(0,1,0),u.vec3.fromValues(0,0,1)],[u.vec3.fromValues(0,0,0),u.vec3.fromValues(0,-1,0),u.vec3.fromValues(0,0,-1)],[u.vec3.fromValues(0,0,0),u.vec3.fromValues(0,0,1),u.vec3.fromValues(0,-1,0)],[u.vec3.fromValues(0,0,0),u.vec3.fromValues(0,0,-1),u.vec3.fromValues(0,-1,0)]],c=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.setPerspective(Math.PI/2,1,.1,1e3),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"face",value:function(e){var t=s[e];this.lookAt(t[0],t[1],t[2])}}]),t}(o.default);t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0},o=n(14),u=r(o),s=n(5),c=r(s),l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"load",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;this._drawType=r,a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this,e,n)}},{key:"_onLoaded",value:function(){this.parseObj(this._req.response)}},{key:"parseObj",value:function(e){function t(e){var t=parseInt(e);return 3*(t>=0?t-1:t+h.length/3)}function n(e){var t=parseInt(e);return 3*(t>=0?t-1:t+_.length/3)}function r(e){var t=parseInt(e);return 2*(t>=0?t-1:t+d.length/2)}function i(e,t,n){c.push([h[e],h[e+1],h[e+2]]),c.push([h[t],h[t+1],h[t+2]]),c.push([h[n],h[n+1],h[n+2]]),v.push(3*p+0),v.push(3*p+1),v.push(3*p+2),p++}function a(e,t,n){l.push([d[e],d[e+1]]),l.push([d[t],d[t+1]]),l.push([d[n],d[n+1]])}function o(e,t,n){f.push([_[e],_[e+1],_[e+2]]),f.push([_[t],_[t+1],_[t+2]]),f.push([_[n],_[n+1],_[n+2]])}function u(e,u,s,c,l,f,h,_,d,v,p,E){var m=t(e),T=t(u),b=t(s),y=void 0;void 0===c?i(m,T,b):(y=t(c),i(m,T,y),i(T,b,y)),void 0!==l&&(m=r(l),T=r(f),b=r(h),void 0===c?a(m,T,b):(y=r(_),a(m,T,y),a(T,b,y))),void 0!==d&&(m=n(d),T=n(v),b=n(p),void 0===c?o(m,T,b):(y=n(E),o(m,T,y),o(T,b,y)))}for(var s=e.split("\n"),c=[],l=[],f=[],h=[],_=[],d=[],v=[],p=0,E=void 0,m=/v( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,T=/vn( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,b=/vt( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,y=/f( +-?\d+)( +-?\d+)( +-?\d+)( +-?\d+)?/,R=/f( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))?/,g=/f( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))?/,M=/f( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))?/,x=0;x<s.length;x++){var A=s[x];0!==(A=A.trim()).length&&"#"!==A.charAt(0)&&(null!==(E=m.exec(A))?h.push(parseFloat(E[1]),parseFloat(E[2]),parseFloat(E[3])):null!==(E=T.exec(A))?_.push(parseFloat(E[1]),parseFloat(E[2]),parseFloat(E[3])):null!==(E=b.exec(A))?d.push(parseFloat(E[1]),parseFloat(E[2])):null!==(E=y.exec(A))?u(E[1],E[2],E[3],E[4]):null!==(E=R.exec(A))?u(E[2],E[5],E[8],E[11],E[3],E[6],E[9],E[12]):null!==(E=g.exec(A))?u(E[2],E[6],E[10],E[14],E[3],E[7],E[11],E[15],E[4],E[8],E[12],E[16]):null!==(E=M.exec(A))&&u(E[2],E[5],E[8],E[11],void 0,void 0,void 0,void 0,E[3],E[6],E[9],E[12]))}return this._generateMeshes({positions:c,coords:l,normals:f,indices:v})}},{key:"_generateMeshes",value:function(e){var t=e.normals.length>0,n=e.coords.length>0,r=void 0;if(e.positions.length>65535){var i=[],a=0,o={};for(o.positions=e.positions.concat(),o.coords=e.coords.concat(),o.indices=e.indices.concat(),o.normals=e.normals.concat();e.indices.length>0;){for(var u=Math.min(65535,e.positions.length),s=e.indices.splice(0,u),l=[],f=[],h=[],_=void 0,d=0,v=0;v<s.length;v++)s[v]>d&&(d=s[v]),_=s[v],l.push(o.positions[_]),n&&f.push(o.coords[_]),t&&h.push(o.normals[_]),s[v]-=a;a=d+1,(r=new c.default(this._drawType)).bufferVertex(l),n&&r.bufferTexCoord(f),r.bufferIndex(s),t&&r.bufferNormal(h),i.push(r)}return this._callback&&this._callback(i,o),i}return(r=new c.default(this._drawType)).bufferVertex(e.positions),n&&r.bufferTexCoord(e.coords),r.bufferIndex(e.indices),t&&r.bufferNormal(e.normals),this._callback&&this._callback(r,e),r}}]),t}(u.default);l.parse=function(e){return(new l).parseObj(e)},t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(14),o=r(a),u=n(62),s=r(u),c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,!0))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"parse",value:function(e){return(0,s.default)(e)}},{key:"_onLoaded",value:function(){var e=this.parse(this._req.response);this._callback&&this._callback(e)}}]),t}(o.default);c.parse=function(e){return(0,s.default)(e)},t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="#\\?RADIANCE",i="#.*",a="EXPOSURE=\\s*([0-9]*[.][0-9]*)",o="FORMAT=32-bit_rle_rgbe",u="-Y ([0-9]+) \\+X ([0-9]+)";t.default=function(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));for(var t=0,n=e.length,s=0,c=0,l=1,f=!1,h=0;h<20;h++){var _=function(){var r="";do{var i=e[t];if(10===i){++t;break}r+=String.fromCharCode(i)}while(++t<n);return r}(),d=void 0;if(d=_.match(r));else if(d=_.match(o))f=!0;else if(d=_.match(a))l=Number(d[1]);else if(d=_.match(i));else if(d=_.match(u)){c=Number(d[1]),s=Number(d[2]);break}}if(!f)throw new Error("File is not run length encoded!");var v=new Uint8Array(s*c*4);!function(e,t,n,r,i,a){function o(t){var n=0;do{t[n++]=e[r]}while(++r<d&&n<t.length);return n}function u(t,n,i){var a=0;do{t[n+a++]=e[r]}while(++r<d&&a<i);return a}for(var s=new Array(4),c=null,l=void 0,f=void 0,h=void 0,_=new Array(2),d=e.length;a>0;){if(o(s)<s.length)throw new Error("Error reading bytes: expected "+s.length);if(2!==s[0]||2!==s[1]||0!=(128&s[2]))return t[n++]=s[0],t[n++]=s[1],t[n++]=s[2],t[n++]=s[3],void function(e,t,n,r){var i=4*r,a=u(t,n,i);if(a<i)throw new Error("Error reading raw pixels: got "+a+" bytes, expected "+i)}(0,t,n,i*a-1);if(((255&s[2])<<8|255&s[3])!==i)throw new Error("Wrong scanline width "+((255&s[2])<<8|255&s[3])+", expected "+i);null===c&&(c=new Array(4*i)),l=0;for(var v=0;v<4;v++)for(f=(v+1)*i;l<f;){if(o(_)<_.length)throw new Error("Error reading 2-byte buffer");if((255&_[0])>128){if(0==(h=(255&_[0])-128)||h>f-l)throw new Error("Bad scanline data");for(;h-- >0;)c[l++]=_[1]}else{if(0==(h=255&_[0])||h>f-l)throw new Error("Bad scanline data");if(c[l++]=_[1],--h>0){if(u(c,l,h)<h)throw new Error("Error reading non-run data");l+=h}}}for(var p=0;p<i;p++)t[n+0]=c[p],t[n+1]=c[p+i],t[n+2]=c[p+2*i],t[n+3]=c[p+3*i],n+=4;a--}}(e,v,0,t,s,c);for(var p=new Float32Array(s*c*4),E=0;E<v.length;E+=4){var m=v[E+0]/255,T=v[E+1]/255,b=v[E+2]/255,y=v[E+3],R=Math.pow(2,y-128);m*=R,T*=R,b*=R;var g=E;p[g+0]=m,p[g+1]=T,p[g+2]=b,p[g+3]=1}return{shape:[s,c],exposure:l,gamma:1,data:p}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(5),a=(r=i)&&r.__esModule?r:{default:r},o={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},u={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},s={NORMAL:"aNormal",POSITION:"aVertexPosition",TEXCOORD_0:"aTextureCoord",WEIGHTS_0:"aWeight",JOINTS_0:"aJoint",COLOR:"aColor"},c=function(e,t){return new Promise(function(n,r){var i=e.bufferViews;e.buffers,i.forEach(function(e,n){var r=t;e.data=r.slice(e.byteOffset||0,(e.byteOffset||0)+(e.byteLength||0))}),n(e)})},l=function(e){return new Promise(function(t,n){var r=e.meshes;e.geometries=[],r.forEach(function(t,n){var r=t.primitives,i={};r.forEach(function(t,n){var r=Object.keys(t.attributes),o={};if(r.forEach(function(n,r){var a=t.attributes[n],c=e.accessors[a],l=s[n];if(l){"NORMAL"===n&&(o.HAS_NORMALS=1),n.indexOf("TEXCOORD")>-1&&(o.HAS_UV=1);var h=u[c.type],_=f(e,a);_ instanceof Uint32Array&&(_=new Float32Array(_)),"TEXCOORD_1"===n&&console.log(h,_),i[l]={value:_,size:h}}}),null!=t.indices){var c=f(e,t.indices,!0);i.indices={value:c,size:1}}var l=new a.default;for(var h in i){var _=i[h];"indices"!==h?l.bufferFlattenData(_.value,h,_.size):l.bufferIndex(_.value)}if(e.output.meshes.push(l),t.material){console.log("gltf.output",e.output,t.material);var d=e.output.materials[t.material];l.material=d,o=objectAssign(o,l.material.defines),l.defines=o;var v=Shaders.get(ShaderLibs.gltfVert,ShaderLibs.gltfFrag,o),p=d.emissiveFacotr,E=d.normalTexture,m=d.occlusionTexture,T=d.pbrMetallicRoughness,b=T.baseColorTexture,y=T.metallicRoughnessTexture,R={uEmissiveFactor:p||[0,0,0],uBaseColor:T.baseColorFactor||[1,1,1,1],uRoughness:T.roughnessFactor||1,uMetallic:T.metallicFactor||1,uScaleDiffBaseMR:[0,0,0,0],uScaleFGDSpec:[0,0,0,0],uScaleIBLAmbient:[1,1,1,1],uLightDirection:[1,1,1],uLightColor:[1,1,1],uGamma:1};b&&(R.uColorMap=b.glTexture),y&&(R.uMetallicRoughnessMap=y.glTexture),E&&(R.uNormalScale=E.scale||1,R.uNormalMap=E.glTexture),m&&(R.uAoMap=m.glTexture,R.uOcclusionStrength=m.strength||1),v.bind(),v.uniform(R),l.material.shader=v,l.material.uniforms=R}e.geometries.push(i)})}),t(e)})},f=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.accessors[t],i=e.bufferViews[r.bufferView].data,a=r.byteOffset||0,s=o[r.componentType]||Float32Array,c=u[r.type];null==c&&n&&(c=1);var l=new s(i,a,c*r.count),f=r.extensions&&r.extensions.WEB3D_quantized_attributes;if(f){for(var h=new Float32Array(c*r.count),_=f.decodeMatrix,d=new Array(c),v=new Array(c),p=0;p<c;p++)d[p]=_[c*(c+1)+p],v[p]=_[p*(c+1)+p];for(var E=0;E<r.count;E++)for(var m=0;m<c;m++)h[E*c+m]=l[E*c+m]*v[m]+d[m];l=h}return l};t.default={parse:function(e,t){return new Promise(function(n,r){e.output={meshes:[],scenes:[],textures:[]},c(e,t).then(l).then(function(e){n(e)}).catch(function(e){console.log("Error:",e)})})}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(7),o=r(a),u=n(1),s=r(u),c=n(6),l=r(c),f=n(15),h=r(f),_=n(16),d=r(_),v=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=o.default.bigTriangle(),n=new s.default(h.default,d.default),r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return n.bind(),n.uniform("texture","uniform1i",0),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"draw",value:function(e){this.shader.bind(),e.bind(0),function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"draw",this).call(this)}}]),t}(l.default);t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=r(i),o=n(5),u=r(o),s=n(1),c=r(s),l=n(6),f=r(l),h=n(66),_=r(h),d=n(67),v=r(d),p=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=[],n=[],r=9999;e.push([-r,0,0]),e.push([r,0,0]),e.push([0,-r,0]),e.push([0,r,0]),e.push([0,0,-r]),e.push([0,0,r]),n.push([1,0,0]),n.push([1,0,0]),n.push([0,1,0]),n.push([0,1,0]),n.push([0,0,1]),n.push([0,0,1]);var i=new u.default(a.default.LINES);i.bufferVertex(e),i.bufferIndex([0,1,2,3,4,5]),i.bufferData(n,"aColor",3);var o=new c.default(_.default,v.default);return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(f.default);t.default=p},function(e,t){e.exports="// axis.vert\n\n#define SHADER_NAME BASIC_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec3 aColor;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec3 vColor;\nvarying vec3 vNormal;\n\nvoid main(void) {\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);\n    vColor = aColor;\n    vNormal = aNormal;\n}"},function(e,t){e.exports="// axis.frag\n\n#define SHADER_NAME SIMPLE_TEXTURE\n\nprecision lowp float;\n#define GLSLIFY 1\nvarying vec3 vColor;\nvarying vec3 vNormal;\n\nvoid main(void) {\n\t// vec3 color = vNormal;\n\tvec3 color = vColor + vNormal * 0.0001;\n    gl_FragColor = vec4(color, 1.0);\n}"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0},o=n(7),u=r(o),s=n(1),c=r(s),l=n(6),f=r(l),h=n(33),_=r(h),d=n(17),v=r(d),p=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=u.default.sphere(1,24),n=new c.default(_.default,v.default);return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1,1],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.shader.bind(),this.shader.uniform("position","uniform3fv",e),this.shader.uniform("scale","uniform3fv",n),this.shader.uniform("color","uniform3fv",r),this.shader.uniform("opacity","uniform1f",i),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"draw",this).call(this)}}]),t}(f.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=r(a),u=n(5),s=r(u),c=n(1),l=r(c),f=n(6),h=r(f),_=n(70),d=r(_),v=n(71),p=r(v),E=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=[],n=[],r=0,i=void 0,a=void 0;for(i=-100;i<100;i+=1)for(a=-100;a<100;a+=1)e.push([i,a,0]),n.push(r),r++,e.push([i,0,a]),n.push(r),r++;var u=new s.default(o.default.POINTS);u.bufferVertex(e),u.bufferIndex(n);var c=new l.default(d.default,p.default),f=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,u,c));return f.color=[1,1,1],f.opacity=.65,f}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"draw",value:function(){this.shader.bind(),this.shader.uniform("color","uniform3fv",this.color),this.shader.uniform("opacity","uniform1f",this.opacity),this.shader.uniform("viewport","vec2",[o.default.width,o.default.height]),function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"draw",this).call(this)}}]),t}(h.default);t.default=E},function(e,t){e.exports="// basic.vert\n\n#define SHADER_NAME DOTS_PLANE_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform vec2 viewport;\n\nvarying vec3 vNormal;\n\nconst float radius = 0.008;\n\nvoid main(void) {\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition + aNormal * 0.000001, 1.0);\n    // gl_PointSize = 1.0;\n    vNormal = aNormal;\n\n\tfloat distOffset = viewport.y * uProjectionMatrix[1][1] * radius / gl_Position.w;\n    gl_PointSize = distOffset;\n}"},function(e,t){e.exports="// dotsPlane.frag\n\nprecision highp float;\n#define GLSLIFY 1\n\nuniform vec3 color;\nuniform float opacity;\n\nvoid main(void) {\n\tif(distance(gl_PointCoord, vec2(.5)) > .5) {\n\t\tdiscard;\n\t}\n    gl_FragColor = vec4(color, opacity);\n}"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0},o=n(0),u=r(o),s=n(5),c=r(s),l=n(1),f=r(l),h=n(6),_=r(h),d=n(9),v=n(17),p=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=[];e.push([0,0,0]),e.push([0,0,0]);var n=new c.default(u.default.LINES);n.bufferVertex(e),n.bufferTexCoord([[0,0],[1,1]]),n.bufferIndex([0,1]);var r=new f.default(d,v);return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"draw",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1,1],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this._mesh.bufferVertex([e,n]),this._shader.bind(),this._shader.uniform("color","vec3",r),this._shader.uniform("opacity","float",i),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"draw",this).call(this)}}]),t}(_.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(7),o=r(a),u=n(1),s=r(u),c=n(6),l=r(c),f=n(34),h=n(35),_=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=o.default.skybox(e),r=new s.default(f,h);return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"draw",value:function(e){this.shader.bind(),e.bind(0),function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"draw",this).call(this)}}]),t}(l.default);t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(7),o=r(a),u=n(1),s=r(u),c=n(6),l=r(c),f=n(75),h=n(16),_=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=o.default.sphere(e,n,!0),i=new s.default(f,h);return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,i))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"draw",value:function(e){this.shader.bind(),e.bind(0),function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"draw",this).call(this)}}]),t}(l.default);t.default=_},function(e,t){e.exports="// sky.vert\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvoid main(void) {\n\tmat4 matView = uViewMatrix;\n\tmatView[3][0] = 0.0;\n\tmatView[3][1] = 0.0;\n\tmatView[3][2] = 0.0;\n\t\n    gl_Position = uProjectionMatrix * matView * uModelMatrix * vec4(aVertexPosition, 1.0);\n    vTextureCoord = aTextureCoord;\n    vNormal = aNormal;\n}"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=r(a),u=n(7),s=r(u),c=n(1),l=r(c),f=n(6),h=r(f),_=n(15),d=n(77),v=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=s.default.bigTriangle(),n=new l.default(_,d),r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return n.bind(),n.uniform("texture","uniform1i",0),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"draw",value:function(e){this.shader.bind(),e.bind(0),this.shader.uniform("uResolution","vec2",[1/o.default.width,1/o.default.height]),function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"draw",this).call(this)}}]),t}(h.default);t.default=v},function(e,t){e.exports="// fxaa.frag\n\n#define SHADER_NAME FXAA\n\nprecision highp float;\n#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nuniform sampler2D texture;\nuniform vec2 uResolution;\n\n\nfloat FXAA_SUBPIX_SHIFT = 1.0/4.0;\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#define FXAA_SPAN_MAX     8.0\n\n\nvec4 applyFXAA(sampler2D tex) {\n    vec4 color;\n    vec2 fragCoord = gl_FragCoord.xy;\n    vec3 rgbNW = texture2D(tex, (fragCoord + vec2(-1.0, -1.0)) * uResolution).xyz;\n    vec3 rgbNE = texture2D(tex, (fragCoord + vec2(1.0, -1.0)) * uResolution).xyz;\n    vec3 rgbSW = texture2D(tex, (fragCoord + vec2(-1.0, 1.0)) * uResolution).xyz;\n    vec3 rgbSE = texture2D(tex, (fragCoord + vec2(1.0, 1.0)) * uResolution).xyz;\n    vec3 rgbM  = texture2D(tex, fragCoord  * uResolution).xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n              dir * rcpDirMin)) * uResolution;\n\n    vec3 rgbA = 0.5 * (\n        texture2D(tex, fragCoord * uResolution + dir * (1.0 / 3.0 - 0.5)).xyz +\n        texture2D(tex, fragCoord * uResolution + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n        texture2D(tex, fragCoord * uResolution + dir * -0.5).xyz +\n        texture2D(tex, fragCoord * uResolution + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, 1.0);\n    else\n        color = vec4(rgbB, 1.0);\n    return color;\n}\n\nvoid main(void) {\n \tvec4 color = applyFXAA(texture);\n    gl_FragColor = color;\n}"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(4),o=r(a),u=n(0),s=r(u),c=n(13),l=r(c),f=n(31),h=r(f),_=n(30),d=r(_),v=function(){function e(){var t=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._children=[],this._matrixIdentity=mat4.create(),s.default.enableAlphaBlending(),this._init(),this._initTextures(),this._initViews(),this._efIndex=o.default.addEF(function(){return t._loop()}),window.addEventListener("resize",function(){return t.resize()})}return i(e,[{key:"update",value:function(){}},{key:"render",value:function(){}},{key:"stop",value:function(){-1!==this._efIndex&&(this._efIndex=o.default.removeEF(this._efIndex))}},{key:"start",value:function(){var e=this;-1===this._efIndex&&(this._efIndex=o.default.addEF(function(){return e._loop()}))}},{key:"resize",value:function(){s.default.setSize(window.innerWidth,window.innerHeight),this.camera.setAspectRatio(s.default.aspectRatio)}},{key:"addChild",value:function(e){this._children.push(e)}},{key:"removeChild",value:function(e){var t=this._children.indexOf(e);-1!=t?this._children.splice(t,1):console.warn("Child no exist")}},{key:"_initTextures",value:function(){}},{key:"_initViews",value:function(){}},{key:"_renderChildren",value:function(){for(var e=0;e<this._children.length;e++)this._children[e].toRender();s.default.rotate(this._matrixIdentity)}},{key:"_init",value:function(){this.camera=new l.default,this.camera.setPerspective(45*Math.PI/180,s.default.aspectRatio,.1,100),this.orbitalControl=new d.default(this.camera,window,15),this.orbitalControl.radius.value=10,this.cameraOrtho=new h.default}},{key:"_loop",value:function(){s.default.viewport(0,0,s.default.width,s.default.height),s.default.setMatrices(this.camera),this.update(),this._renderChildren(),this.render()}}]),e}();t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),o=(r=a)&&r.__esModule?r:{default:r},u=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.shader=new o.default(t,n),this._init()}return i(e,[{key:"_init",value:function(){}},{key:"render",value:function(){}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(32),o=r(a),u=n(1),s=r(u),c=n(0),l=(r(c),function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r._children=[],r.shader=new s.default(e,n),r._init(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"_init",value:function(){}},{key:"render",value:function(){}}]),t}(o.default));t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=r(a),u=n(5),s=r(u),c=n(1),l=r(c),f=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._uniforms={},this._uniformTextures=[],this._fbo,this._clearColor={r:0,g:0,b:0,a:0},this}return i(e,[{key:"setClearColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this._clearColor.r=e,this._clearColor.g=t,this._clearColor.b=n,this._clearColor.a=r,this}},{key:"useProgram",value:function(e,t){return e instanceof l.default?this._shader=e:this._shader=new l.default(e,t),this}},{key:"setMesh",value:function(e){return this._mesh=e,this}},{key:"createMesh",value:function(e){return this._mesh=new s.default(e),this}},{key:"bufferVertex",value:function(e){return this._mesh||(this._mesh=new s.default),this._mesh.bufferVertex(e),this}},{key:"bufferTexCoord",value:function(e){return this._mesh||(this._mesh=new s.default),this._mesh.bufferTexCoord(e),this}},{key:"bufferNormal",value:function(e){return this._mesh||(this._mesh=new s.default),this._mesh.bufferNormal(e),this}},{key:"bufferIndex",value:function(e){return this._mesh||(this._mesh=new s.default),this._mesh.bufferIndex(e),this}},{key:"bufferInstance",value:function(e,t){return this._mesh?(this._mesh.bufferInstance(e,t),this):(console.warn("Need to create mesh first"),this)}},{key:"bufferData",value:function(e,t){return this._mesh||(this._mesh=new s.default),this._mesh.bufferData(e,t),this}},{key:"uniform",value:function(e,t,n){return this._uniforms[e]={type:t,value:n},this}},{key:"uniformTexture",value:function(e,t,n){return void 0!==n?this._uniformTextures[n]={name:e,texture:t}:this._uniformTextures.push({name:e,texture:t}),this}},{key:"bindFrameBuffer",value:function(e){return this._fbo=e,this}},{key:"draw",value:function(){var e=this;if(this._shader&&this._mesh){if(this._fbo){var t=this._clearColor,n=t.r,r=t.g,i=t.b,a=t.a;this._fbo.bind(),o.default.clear(n,r,i,a)}for(var u in this._shader.bind(),this._uniforms){var s=this._uniforms[u];this._shader.uniform(u,s.type,s.value)}return this._uniformTextures.forEach(function(t,n){void 0!==t&&(e._shader.uniform(t.name,"uniform1i",n),t.texture.bind(n))}),o.default.draw(this._mesh),this._fbo&&this._fbo.unbind(),this}}},{key:"shader",get:function(){return this._shader}},{key:"framebuffer",get:function(){return this._fbo}}]),e}();t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(17),a=r(i),o=n(15),u=r(o),s=n(33),c=r(s),l=n(16),f=r(l),h=n(9),_=r(h),d=n(34),v=r(d),p=n(35),E=r(p),m={simpleColorFrag:a.default,bigTriangleVert:u.default,generalVert:c.default,copyFrag:f.default,basicVert:_.default,skyboxVert:v.default,skyboxFrag:E.default};t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(36),a=(r=i)&&r.__esModule?r:{default:r},o=function(e){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,2,e,n,r,i))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(a.default);t.default=o}])},function(e,t,n){"use strict";var r=n(11).EventEmitter;function i(){r.call(this),this.setMaxListeners(20)}i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype.off=function(e,t){return t?this.removeListener(e,t):e?this.removeAllListeners(e):this.removeAllListeners()},e.exports=i},function(e,t,n){"use strict";e.exports={mbs:0,secs:0,update:function(e,t,n,r){var i,a=e.getAllResponseHeaders();if(a){var o=a.match(/content-length: (\d+)/i);o&&o.length&&(i=o[1])}if(i){var u=(i=parseInt(i,10))/1024/1024,s=(Date.now()-t)/1e3;this.secs+=s,this.mbs+=u,r&&this.log(n,u,s)}else r&&console.warn.call(console,"Can't get Content-Length:",n)},log:function(e,t,n){if(e){var r="File loaded: "+e.substr(e.lastIndexOf("/")+1)+" size:"+t.toFixed(2)+"mb time:"+n.toFixed(2)+"s speed:"+(t/n).toFixed(2)+"mbps";console.log.call(console,r)}var i="Total loaded: "+this.mbs.toFixed(2)+"mb time:"+this.secs.toFixed(2)+"s speed:"+this.getMbps().toFixed(2)+"mbps";console.log.call(console,i)},getMbps:function(){return this.mbs/this.secs}}},function(e,t,n){"use strict";var r=n(10);r.stats=n(2),e.exports=r},function(e,t,n){var r=n(5);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(7)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(6)(!1)).push([e.i,"html, body {\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  overflow: hidden;\n  position: static;\n  /* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#6d6d6d+0,000000+100 */\n  background: #333333;\n  /* Old browsers */\n  background: -moz-radial-gradient(center, ellipse cover, #333333 0%, #000000 100%);\n  /* FF3.6-15 */\n  background: -webkit-radial-gradient(center, ellipse cover, #333333 0%, #000000 100%);\n  /* Chrome10-25,Safari5.1-6 */\n  background: radial-gradient(ellipse at center, #333333 0%, #000000 100%);\n  /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */ }\n\nhtml {\n  -webkit-text-size-adjust: none;\n  -moz-text-size-adjust: none;\n  text-size-adjust: none; }\n\nh1, h2, h3, h4, text, p {\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-webkit-font-smoothing: antialiased;\n  font-family: 'Open Sans', sans-serif;\n  pointer-events: none; }\n\n.Main-Canvas {\n  user-select: none;\n  opacity: 1;\n  transition: opacity .5s ease-out .25s;\n  top: auto;\n  left: auto; }\n  .isLoading .Main-Canvas {\n    opacity: 0; }\n\n.container {\n  width: 100%;\n  height: 100%;\n  position: fixed;\n  top: 0;\n  left: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center; }\n\n.Message {\n  position: absolute;\n  z-index: 999;\n  width: 100%;\n  top: calc(50% - 50px);\n  text-align: center;\n  letter-spacing: 11px;\n  color: white;\n  opacity: 0;\n  transition: opacity .5s ease-out, letter-spacing .5s ease-out; }\n  .isLoading .Message {\n    letter-spacing: 10px;\n    opacity: 1; }\n\n.link {\n  color: white;\n  position: fixed;\n  left: 0;\n  bottom: 0;\n  margin: 20px;\n  text-decoration: none;\n  font-size: 13px;\n  letter-spacing: 1px;\n  z-index: 9999;\n  opacity: 0;\n  pointer-events: none;\n  transition: opacity\t.5s ease-out; }\n  .showLink .link {\n    opacity: 1;\n    pointer-events: auto; }\n\n.Loading-Bar {\n  position: absolute;\n  z-index: 998;\n  width: 0%;\n  height: 1px;\n  top: 50%;\n  background: rgba(255, 255, 255, 0.5);\n  opacity: 0;\n  transition: width .5s ease-out, opacity .5s ease-out; }\n  .isLoading .Loading-Bar {\n    opacity: 1; }\n\n.desc {\n  color: white;\n  z-index: 9999;\n  position: absolute;\n  left: 0;\n  bottom: 30px;\n  text-align: center;\n  font-size: 12px;\n  width: 100%;\n  letter-spacing: 2px; }\n",""])},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(o=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),a=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[n].concat(a).concat([i]).join("\n")}var o;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var a=this[i][0];null!=a&&(r[a]=!0)}for(i=0;i<e.length;i++){var o=e[i];null!=o[0]&&r[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(e,t,n){var r,i,a={},o=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),u=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var r=function(e,t){return t?t.querySelector(e):document.querySelector(e)}.call(this,e,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),s=null,c=0,l=[],f=n(8);function h(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=a[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(m(r.parts[o],t))}else{var u=[];for(o=0;o<r.parts.length;o++)u.push(m(r.parts[o],t));a[r.id]={id:r.id,refs:1,parts:u}}}}function _(e,t){for(var n=[],r={},i=0;i<e.length;i++){var a=e[i],o=t.base?a[0]+t.base:a[0],u={css:a[1],media:a[2],sourceMap:a[3]};r[o]?r[o].parts.push(u):n.push(r[o]={id:o,parts:[u]})}return n}function d(e,t){var n=u(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=l[l.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),l.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=u(e.insertAt.before,n);n.insertBefore(t,i)}}function v(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=l.indexOf(e);t>=0&&l.splice(t,1)}function p(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var r=function(){0;return n.nc}();r&&(e.attrs.nonce=r)}return E(t,e.attrs),d(e,t),t}function E(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function m(e,t){var n,r,i,a;if(t.transform&&e.css){if(!(a="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=a}if(t.singleton){var o=c++;n=s||(s=p(t)),r=y.bind(null,n,o,!1),i=y.bind(null,n,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",E(t,e.attrs),d(e,t),t}(t),r=function(e,t,n){var r=n.css,i=n.sourceMap,a=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||a)&&(r=f(r));i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([r],{type:"text/css"}),u=e.href;e.href=URL.createObjectURL(o),u&&URL.revokeObjectURL(u)}.bind(null,n,t),i=function(){v(n),n.href&&URL.revokeObjectURL(n.href)}):(n=p(t),r=function(e,t){var n=t.css,r=t.media;r&&e.setAttribute("media",r);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){v(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=o()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=_(e,t);return h(n,t),function(e){for(var r=[],i=0;i<n.length;i++){var o=n[i];(u=a[o.id]).refs--,r.push(u)}e&&h(_(e,t),t);for(i=0;i<r.length;i++){var u;if(0===(u=r[i]).refs){for(var s=0;s<u.parts.length;s++)u.parts[s]();delete a[u.id]}}}};var T,b=(T=[],function(e,t){return T[e]=t,T.filter(Boolean).join("\n")});function y(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=b(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i,a=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?e:(i=0===a.indexOf("//")?a:0===a.indexOf("/")?n+a:r+a.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(e,t){window.gui={add:()=>{}}},function(e,t,n){"use strict";var r=n(1),i=n(12),a=0;e.exports=function e(t){var n,o={},u=[],s=[],c=0,l=0,f={},h=function(r){return Array.isArray(r)?(r.forEach(h),n):((a=!!r.assets&&Array.isArray(r.assets)?e(d(r,t)):i(d(r,t))).once("destroy",m),s.push(a),f[a.id]=a,n);var a},_=function(e){return arguments.length?o[e]?o[e]:f[e]:u},d=function(e,t){"string"==typeof e&&(e={url:e});return void 0===e.isTouchLocked&&(e.isTouchLocked=t.isTouchLocked),void 0===e.blob&&(e.blob=t.blob),void 0===e.basePath&&(e.basePath=t.basePath),e.id=e.id||e.url||String(++a),e.type=e.type||function(e){return e&&e.split("?")[0].split(".").pop().toLowerCase()}(e.url),e.crossOrigin=e.crossOrigin||t.crossOrigin,e.webAudioContext=e.webAudioContext||t.webAudioContext,e.log=t.log,e},v=function(e){var t=c+e;n.emit("progress",t/l)},p=function(e,t,r){Array.isArray(e)&&(e={id:t,file:e,type:r}),c++,n.emit("progress",c/l),o[e.id]=e.file,u.push(e),n.emit("childcomplete",e),T()},E=function(e){l--,n.listeners("error").length?n.emit("error",e):console.error(e),T()},m=function(e){f[e]=null,delete f[e],o[e]=null,delete o[e],u.some(function(t,n){if(t.id===e)return u.splice(n,1),!0})},T=function(){c>=l&&n.emit("complete",u,o,t.id,"group")};return n=Object.create(r.prototype,{_events:{value:{}},id:{get:function(){return t.id}},add:{value:h},start:{value:function(){return l=s.length,s.forEach(function(e){e.on("progress",v).once("complete",p).once("error",E).start()}),s=[],n}},get:{value:_},find:{value:function(e){if(_(e))return _(e);var t=null;return Object.keys(f).some(function(n){return!!(t=f[n].find&&f[n].find(e))}),t}},getLoader:{value:function(e){return f[e]}},loaded:{get:function(){return c>=l}},file:{get:function(){return u}},destroy:{value:function(){for(;s.length;)s.pop().destroy();return n.off("error"),n.off("progress"),n.off("complete"),u=[],o={},t.webAudioContext=null,l=0,c=0,Object.keys(f).forEach(function(e){f[e].destroy()}),f={},n.emit("destroy",n.id),n}}}),t=d(t||{},{basePath:"",blob:!1,touchLocked:!1,crossOrigin:null,webAudioContext:null,log:!1}),Array.isArray(t.assets)&&h(t.assets),n}},function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,a=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function u(){u.init.call(this)}e.exports=u,u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var s=10;function c(e){return void 0===e._maxListeners?u.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var i,a,o,u;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]),void 0===o)o=a[t]=n,++e._eventsCount;else if("function"==typeof o?o=a[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=c(e))>0&&o.length>i&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=o.length,u=s,console&&console.warn&&console.warn(u)}return e}function f(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,a(this.listener,this.target,e))}.bind(r);return i.listener=n,r.wrapFn=i,i}function h(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):d(i,i.length)}function _(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function d(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),u.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},u.prototype.getMaxListeners=function(){return c(this)},u.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var u=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw u.context=o,u}var s=i[e];if(void 0===s)return!1;if("function"==typeof s)a(s,this,t);else{var c=s.length,l=d(s,c);for(n=0;n<c;++n)a(l[n],this,t)}return!0},u.prototype.addListener=function(e,t){return l(this,e,t,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(e,t){return l(this,e,t,!0)},u.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,f(this,e,t)),this},u.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,f(this,e,t)),this},u.prototype.removeListener=function(e,t){var n,r,i,a,o;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},u.prototype.listeners=function(e){return h(this,e,!0)},u.prototype.rawListeners=function(e){return h(this,e,!1)},u.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):_.call(e,t)},u.prototype.listenerCount=_,u.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){"use strict";var r=n(1),i=n(13),a=n(2);e.exports=function(e){var t,n,o,u,s,c,l=e.id,f=e.basePath||"",h=e.url,_=e.type,d=e.crossOrigin,v=e.isTouchLocked,p=e.blob&&i,E=e.webAudioContext,m=e.log,T=function(e){e&&(c={id:l,file:e,type:_},t.emit("progress",1),t.emit("complete",c,l,_),F())},b=function(e,t){n=t||R,(o=new XMLHttpRequest).open("GET",f+h,!0),o.responseType=e,o.addEventListener("progress",y),o.addEventListener("load",n),o.addEventListener("error",C),o.send()},y=function(e){e.lengthComputable&&t.emit("progress",e.loaded/e.total)},R=function(){g()&&T(o.response)},g=function(){return o&&o.status<400?(a.update(o,u,h,m),!0):(C(o&&o.statusText),!1)},M=function(){b("json",function(){if(g()){var e=o.response;"string"==typeof e&&(e=JSON.parse(e)),T(e)}})},x=function(){p?O():A()},A=function(){o=new Image,d&&(o.crossOrigin="anonymous"),o.addEventListener("error",C,!1),o.addEventListener("load",P,!1),o.src=f+h},P=function(e){window.clearTimeout(s),e||!o.error&&o.readyState?T(o):C()},O=function(){b("blob",function(){g()&&((o=new Image).addEventListener("error",C,!1),o.addEventListener("load",w,!1),o.src=window.URL.createObjectURL(o.response))})},w=function(){window.URL.revokeObjectURL(o.src),T(o)},S=function(){E?I():N("audio")},L=function(){p?b("blob"):N("video")},I=function(){b("arraybuffer",function(){g()&&E.decodeAudioData(o.response,function(e){o=null,T(e)},function(e){C(e)})})},N=function(e){o=document.createElement(e),v||(window.clearTimeout(s),s=window.setTimeout(P,2e3),o.addEventListener("canplaythrough",P,!1)),o.addEventListener("error",C,!1),o.preload="auto",o.src=f+h,o.load(),v&&T(o)},C=function(e){window.clearTimeout(s);var n=e;if(o&&o.tagName&&o.error){n="MediaError: "+["","ABORTED","NETWORK","DECODE","SRC_NOT_SUPPORTED"][o.error.code]+" "+o.src}else o&&o.statusText?n=o.statusText:e&&e.message?n=e.message:e&&e.type&&(n=e.type);t.emit("error",'Error loading "'+f+h+'" '+n),U()},F=function(){t.off("error"),t.off("progress"),t.off("complete"),o&&(o.removeEventListener("progress",y),o.removeEventListener("load",n),o.removeEventListener("error",C),o.removeEventListener("load",P),o.removeEventListener("canplaythrough",P),o.removeEventListener("load",w))},U=function(){F(),o&&o.abort&&o.readyState<4&&o.abort(),o=null,E=null,c=null,window.clearTimeout(s),t.emit("destroy",l)};return t=Object.create(r.prototype,{_events:{value:{}},id:{value:e.id},start:{value:function(){switch(u=Date.now(),_){case"json":M();break;case"jpg":case"png":case"gif":case"webp":case"svg":x();break;case"mp3":case"ogg":case"opus":case"wav":case"m4a":S();break;case"ogv":case"mp4":case"webm":case"hls":L();break;case"bin":case"binary":b("arraybuffer");break;case"txt":case"text":b("text");break;default:throw"AssetsLoader ERROR: Unknown type for file with URL: "+f+h+" ("+_+")"}}},loaded:{get:function(){return!!c}},file:{get:function(){return c}},destroy:{value:U}})}},function(e,t,n){"use strict";e.exports=function(){try{return!!new Blob}catch(e){return!1}}()},function(e,t,n){"use strict";n.r(t);n(4),n(9);var r=n(0),i=n.n(r);var a=[{id:"chars",url:"assets/img/chars.png",type:"png"},{id:"liquid",url:"assets/img/liquid.jpg",type:"jpg"},{id:"wen",url:"assets/img/wen.jpg",type:"jpg"}];const o={};let u=[];o.init=function(){let e={};u=a.map(t=>{const n=function(e){const t=e.split(".");return t[t.length-1]}(t.url),a=function(e){return assets.find(t=>t.id===e).file}(t.id);let o;switch(n){case"jpg":case"png":return o=new r.GLTexture(a),{id:t.id,file:o};case"hdr":let u=t.id.split("_")[0];o=i.a.HDRLoader.parse(a);const s={id:t.id,file:o};return e[u]||(e[u]=[]),e[u].push(s),s;case"dds":return o=r.GLCubeTexture.parseDDS(a),{id:t.id,file:o};case"obj":const c=r.ObjLoader.parse(a);return{id:t.id,file:c}}});for(let t in e)if(6==e[t].length){console.log("Generate Cubemap :",t);const e=[o.get(`${t}_posx`),o.get(`${t}_negx`),o.get(`${t}_posy`),o.get(`${t}_negy`),o.get(`${t}_posz`),o.get(`${t}_negz`)],n=new i.a.GLCubeTexture(e);u.push({id:t,file:n})}u.length>0&&(console.debug("ASSETS:"),console.table(u))},o.get=function(e){return u.find(t=>t.id===e).file};var s=o,c={TEXTURE_SIZE:64,TEXTURE_DOWNSAMPLE:2,DENSITY_DISSIPATION:.995,VELOCITY_DISSIPATION:.9975,PRESSURE_DISSIPATION:.996,PRESSURE_ITERATIONS:20,SPLAT_RADIUS:.04,NUM_CIRCLES:10,PLANE_SIZE:10,NUM_PARTICLES:150,numParticles:100};const{vec3:l}=window,f=(e,t=0)=>{let n=e/c.PLANE_SIZE*2;return n=.5*n+.5,c.TEXTURE_SIZE*n+t};var h=class extends r.EventDispatcher{constructor(e){super();const t=c.PLANE_SIZE,n=i.a.Geom.plane(t,t,1);this._detector=new r.TouchDetector(n,e),this._detector.on("onHit",e=>this._onMove(e)),this._detector.on("onUp",e=>this._onUp(e)),this._position=l.create(),this._prePos=l.create(),this._isHit=!1}_onUp(e){this._isHit=!1}_onMove(e){const{hit:t}=e.detail;t[2]*=-1,this._isHit?(l.copy(this._prePos,this._position),l.copy(this._position,t)):(l.copy(this._prePos,t),l.copy(this._position,t)),this._isHit=!0;const n=f(this._position[0]),r=f(this._position[1],-0),i=220*(n-f(this._prePos[0])),a=220*-(r-f(this._prePos[1],-0));this.trigger("onDrag",{x:n,y:r,dx:i,dy:a,radius:.001})}};var _=class{constructor(){return this._uniforms={},this._uniformTextures=[],this._fbo,this._clearColor={r:0,g:0,b:0,a:0},this}setClearColor(e=0,t=0,n=0,r=0){return this._clearColor.r=e,this._clearColor.g=t,this._clearColor.b=n,this._clearColor.a=r,this}useProgram(e,t){return e instanceof r.GLShader?this._shader=e:this._shader=new r.GLShader(e,t),this}setMesh(e){return this._mesh=e,this}createMesh(e){return this._mesh=new r.Mesh(e),this}bufferVertex(e){return this._mesh||(this._mesh=new r.Mesh),this._mesh.bufferVertex(e),this}bufferTexCoord(e){return this._mesh||(this._mesh=new r.Mesh),this._mesh.bufferTexCoord(e),this}bufferNormal(e){return this._mesh||(this._mesh=new r.Mesh),this._mesh.bufferNormal(e),this}bufferIndex(e){return this._mesh||(this._mesh=new r.Mesh),this._mesh.bufferIndex(e),this}bufferInstance(e,t){return this._mesh?(this._mesh.bufferInstance(e,t),this):(console.warn("Need to create mesh first"),this)}bufferData(e,t){return this._mesh||(this._mesh=new r.Mesh),this._mesh.bufferData(e,t),this}uniform(e,t,n){return this._uniforms[e]={type:t,value:n},this}uniformTexture(e,t,n){return void 0!==n?this._uniformTextures[n]={name:e,texture:t}:this._uniformTextures.push({name:e,texture:t}),this}bindFrameBuffer(e){return this._fbo=e,this}draw(){if(this._shader&&this._mesh){if(this._fbo){const{r:e,g:t,b:n,a:i}=this._clearColor;this._fbo.bind(),r.GL.clear(e,t,n,i)}this._shader.bind();for(const e in this._uniforms){const t=this._uniforms[e];this._shader.uniform(e,t.type,t.value)}return this._uniformTextures.forEach((e,t)=>{void 0!==e&&(this._shader.uniform(e.name,"uniform1i",t),e.texture.bind(t))}),r.GL.draw(this._mesh),this._fbo&&this._fbo.unbind(),this}}get shader(){return this._shader}get framebuffer(){return this._fbo}},d="precision highp float;\n#define GLSLIFY 1\n\nvarying vec2 vTextureCoord;\nuniform float uTimestep;\nuniform float uDissipation;\nuniform vec2 uTexelSize;      // 1 / grid scale \nuniform sampler2D textureVel;  // input textureVel\nuniform sampler2D textureMap;         // quantity to advect\n\nvoid main() {\n\tvec2 pos = vTextureCoord - uTimestep * uTexelSize * texture2D(textureVel, vTextureCoord).xy;\n\tgl_FragColor = uDissipation * texture2D(textureMap, pos);\n}",v="precision highp float;\nprecision mediump sampler2D;\n#define GLSLIFY 1\n\nvarying vec2 vTextureCoord;        // grid coordinates\nuniform vec2 uTexelSize;\nuniform sampler2D textureVel; // vector field\n\nvec2 sampleVelocity(in vec2 uv) {\n    vec2 mult = vec2(1.0, 1.0);\n    if (uv.x < 0.0 || uv.x > 1.0) { mult.x = -1.0; }\n    if (uv.y < 0.0 || uv.y > 1.0) { mult.y = -1.0; }\n    return texture2D(textureVel, uv).xy;\n}\n\nvoid main() {\n  float L = sampleVelocity(vTextureCoord - vec2(uTexelSize.x, 0.0)).x;\n  float R = sampleVelocity(vTextureCoord + vec2(uTexelSize.x, 0.0)).x;\n  float T = sampleVelocity(vTextureCoord + vec2(0.0, uTexelSize.y)).y;\n  float B = sampleVelocity(vTextureCoord - vec2(0.0, uTexelSize.y)).y;\n  float div = 0.5 * (R - L + T - B);\n  gl_FragColor = vec4(div, 0.0, 0.0, 1.0);\n}",p="precision highp float;\n#define GLSLIFY 1\n\nvarying vec2 vTextureCoord;\nuniform sampler2D texturePressure;\nuniform float uDissipation;\n\nvoid main() {\n    gl_FragColor = uDissipation * texture2D(texturePressure, vTextureCoord);\n}",E="precision highp float;\nprecision mediump sampler2D;\n#define GLSLIFY 1\n\nvarying vec2 vTextureCoord; // grid coordinates    \nuniform vec2 uTexelSize;\nuniform sampler2D texturePressure;\nuniform sampler2D textureDivergence;\n\nvoid main() {\n  // left, right, bottom, and top texturePressure samples\n  float L = texture2D(texturePressure, vTextureCoord - vec2(uTexelSize.x, 0.0)).x;\n  float R = texture2D(texturePressure, vTextureCoord + vec2(uTexelSize.x, 0.0)).x;\n  float B = texture2D(texturePressure, vTextureCoord - vec2(0.0, uTexelSize.y)).x;\n  float T = texture2D(texturePressure, vTextureCoord + vec2(0.0, uTexelSize.y)).x;\n\n  // textureDivergence sample, from center\n  float bC = texture2D(textureDivergence, vTextureCoord).x;\n  \n  // evaluate Jacobi iteration\n  gl_FragColor = vec4(0.25 * (L + R + B + T - bC), 0, 0, 1);\n}",m="precision highp float;\n#define GLSLIFY 1\n\nvarying vec2 vTextureCoord;\nuniform vec2 uTexelSize;\nuniform sampler2D texturePressure;\nuniform sampler2D textureVel;\n\nvoid main() {\n\tfloat pL     = texture2D(texturePressure, vTextureCoord - vec2(uTexelSize.x, 0.0)).x;\n\tfloat pR     = texture2D(texturePressure, vTextureCoord + vec2(uTexelSize.x, 0.0)).x;\n\tfloat pB     = texture2D(texturePressure, vTextureCoord - vec2(0.0, uTexelSize.y)).x;\n\tfloat pT     = texture2D(texturePressure, vTextureCoord + vec2(0.0, uTexelSize.y)).x;\n\tvec2 v       = texture2D(textureVel, vTextureCoord).xy;\n\tgl_FragColor = vec4(v - vec2(pR - pL, pT - pB), 0.0, 1.0);\n}",T="precision highp float;\nprecision mediump sampler2D;\n#define GLSLIFY 1\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uTarget;\nuniform sampler2D texture;\nuniform float aspectRatio;\nuniform vec3 color;\nuniform vec2 point;\nuniform float radius;\nuniform float uTime;\nuniform float uIsVelocity;\n\nvoid main () {\n    vec2 p          = vTextureCoord - point.xy;\n    p.x             *= aspectRatio;\n    \n    float t         = uTime * 0.1;\n    vec2 uv         = vTextureCoord;\n    uv.x            = uv.x - uTime * 0.01;\n    uv.y            = uv.y + sin(uTime * 0.04883974) * 0.1;\n    uv              *= 1.2789145;\n    vec3 colorMap   = vec3(1.0);\n    // colorMap        = mix(colorMap, vec3(1.0), uIsVelocity);\n    \n    \n    float percent   = exp(-dot(p, p) / radius);\n    percent         = smoothstep(0.0, 0.5, percent);\n    \n    \n    float force     = length(color.xy);\n    vec2 dir       = normalize(p);\n    vec3 colorVel   = vec3(dir * force, 1.0);\n    colorVel        = mix(color, colorVel, .5);\n    vec3 colorFinal = mix(color, colorVel, uIsVelocity);\n    vec3 splat      = percent * colorFinal * colorMap;\n    \n    vec3 base       = texture2D(uTarget, vTextureCoord).xyz;\n    gl_FragColor    = vec4(base + splat, 1.0);\n}",b="// copy.frag\n\n#define SHADER_NAME SIMPLE_TEXTURE\n\nprecision highp float;\n#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nuniform sampler2D texture;\n\nuniform float uTime;\nuniform float uRadius;\nuniform float uStrength;\nuniform float uIsVelocity;\n\nvec2 rotate(vec2 v, float a) {\n\tfloat s = sin(a);\n\tfloat c = cos(a);\n\tmat2 m = mat2(c, -s, s, c);\n\treturn m * v;\n}\n\nvec3 mod289(vec3 x) {\treturn x - floor(x * (1.0 / 289.0)) * 289.0;\t}\n\nvec4 mod289(vec4 x) {\treturn x - floor(x * (1.0 / 289.0)) * 289.0;\t}\n\nvec4 permute(vec4 x) {\treturn mod289(((x*34.0)+1.0)*x);\t}\n\nvec4 taylorInvSqrt(vec4 r) {\treturn 1.79284291400159 - 0.85373472095314 * r;}\n\nfloat snoise(vec3 v) { \n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n  i = mod289(i); \n  vec4 p = permute( permute( permute( \n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) \n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), \n                                dot(p2,x2), dot(p3,x3) ) );\n}\n\nvec3 snoiseVec3( vec3 x ){\n\n  float s  = snoise(vec3( x ));\n  float s1 = snoise(vec3( x.y - 19.1 , x.z + 33.4 , x.x + 47.2 ));\n  float s2 = snoise(vec3( x.z + 74.2 , x.x - 124.5 , x.y + 99.4 ));\n  vec3 c = vec3( s , s1 , s2 );\n  return c;\n\n}\n\nvec3 curlNoise( vec3 p ){\n  \n  const float e = .1;\n  vec3 dx = vec3( e   , 0.0 , 0.0 );\n  vec3 dy = vec3( 0.0 , e   , 0.0 );\n  vec3 dz = vec3( 0.0 , 0.0 , e   );\n\n  vec3 p_x0 = snoiseVec3( p - dx );\n  vec3 p_x1 = snoiseVec3( p + dx );\n  vec3 p_y0 = snoiseVec3( p - dy );\n  vec3 p_y1 = snoiseVec3( p + dy );\n  vec3 p_z0 = snoiseVec3( p - dz );\n  vec3 p_z1 = snoiseVec3( p + dz );\n\n  float x = p_y1.z - p_y0.z - p_z1.y + p_z0.y;\n  float y = p_z1.x - p_z0.x - p_x1.z + p_x0.z;\n  float z = p_x1.y - p_x0.y - p_y1.x + p_y0.x;\n\n  const float divisor = 1.0 / ( 2.0 * e );\n  return normalize( vec3( x , y , z ) * divisor );\n\n}\n\n#define PI 3.141592653\n\nvoid main(void) {\n\tvec2 center  = vec2(.5);\n\n\tfloat r = 0.15 + sin(cos(uTime) * 4.489538925) * 0.0;\n\tvec2 v       = vec2(r, 0.0);\n\tv            = rotate(v, uTime);\n\tcenter       += v;\n\t\n\tvec3 noise = curlNoise(vec3(vTextureCoord * 2.0, uTime));\n\n\t// vec2 dir     = normalize(vTextureCoord - center) * 300.0;\n\n\tvec2 dir = normalize(v);\n\tdir = rotate(dir, PI * 0.5);\n\tdir *= uStrength;\n\tfloat d      = distance(vTextureCoord, center);\n\td            = smoothstep(uRadius, 0.0, d);\n\t\n\t\n\tvec3 color   = uIsVelocity > 0.5 ? vec3(dir, 0.0) : vec3(uStrength);\n\tif(uIsVelocity > .5) {\n\t\tcolor += noise * 0.5;\n\t} else {\n\t\tcolor += noise.rrr * uStrength;\n\t}\n\tcolor        *= d;\n\t\n\tvec3 base    = texture2D(texture, vTextureCoord).xyz;\n\t\n\tgl_FragColor = vec4(color + base, 1.0);\n}";var y=class{constructor(e){this.mouse=[0,0,0],this._camera=e,this._texelSize=[1/c.TEXTURE_SIZE,1/c.TEXTURE_SIZE],this._initTextures(),this._initTouches(),this._initShaders()}_initShaders(){const e=i.a.Geom.bigTriangle();this.mesh=e;const t=i.a.ShaderLibs.bigTriangleVert;this._drawAdvect=(new _).useProgram(t,d).setMesh(e).setClearColor(0,0,0,1).uniform("uTimestep","float",.001).uniform("uTexelSize","vec2",this._texelSize),this._drawDivergence=(new _).useProgram(t,v).setMesh(e).setClearColor(0,0,0,1).bindFrameBuffer(this._fboDivergence).uniform("uTexelSize","vec2",this._texelSize),this._drawClear=(new _).useProgram(t,p).setMesh(e).setClearColor(0,0,0,1).uniform("uDissipation","float",c.PRESSURE_DISSIPATION),this._drawJacobi=(new _).useProgram(t,E).setMesh(e).setClearColor(0,0,0,1).uniform("uTexelSize","vec2",this._texelSize),this._drawGradient=(new _).useProgram(t,m).setMesh(e).setClearColor(0,0,0,1).uniform("uTexelSize","vec2",this._texelSize),this._shaderSplat=new i.a.GLShader(i.a.ShaderLibs.bigTriangleVert,T),this._shaderSplat.bind(),this._shaderSplat.uniform("texture","uniform1i",1),this._shaderSplat.uniform("uTarget","uniform1i",0),this._drawSplat=(new _).useProgram(t,b).setMesh(e)}_initTextures(){this._texture=s.get("liquid"),this._texture.minFilter=r.GL.LINEAR_MIPMAP_NEAREST,this._texture.magFilter=r.GL.LINEAR,this._texture.wrapS=this._texture.wrapT=r.GL.MIRRORED_REPEAT;const e=c.TEXTURE_SIZE;let t=r.GL.FLOAT;r.GL.isMobile&&navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)&&(t=r.GL.HALF_FLOAT);const n={minFilter:r.GL.LINEAR,magFilter:r.GL.LINEAR,wrapS:r.GL.CLAMP_TO_EDGE,wrapT:r.GL.CLAMP_TO_EDGE,type:t};this._fboVelocity=new r.FboPingPong(e,e,n),this._fboDensity=new r.FboPingPong(e,e,n),this._fboPressure=new r.FboPingPong(e,e,n),this._fboDivergence=new i.a.FrameBuffer(e,e,n)}_initTouches(){this._touch=[0,0],this.enableTouch=!0,this._touchDetect=new h(this._camera),this._touchDetect.on("onDrag",e=>{const{x:t,y:n,dx:r,dy:i,radius:a}=e.detail;this.createSplat(t,n,r,i,3*a)})}advect(e,t,n){this._drawAdvect.bindFrameBuffer(e).uniformTexture("textureVel",this._fboVelocity.read.texture,0).uniformTexture("textureMap",t,1).uniform("uDissipation","float",n).draw()}createSplat(e,t,n,i,a){a=a||c.SPLAT_RADIUS,this._fboVelocity.write.bind(),r.GL.clear(0,0,0,1),this._shaderSplat.bind(),this._shaderSplat.uniform("radius","float",a),this._shaderSplat.uniform("aspectRatio","float",1),this._shaderSplat.uniform("point","vec2",[e/c.TEXTURE_SIZE,t/c.TEXTURE_SIZE]),this._shaderSplat.uniform("color","vec3",[1*n,1*-i,1]),this._shaderSplat.uniform("uIsVelocity","float",1),this._fboVelocity.read.texture.bind(0),this._texture.bind(1),r.GL.draw(this.mesh),this._fboVelocity.write.unbind(),this._fboVelocity.swap(),this._fboDensity.write.bind(),r.GL.clear(0,0,0,1),this._shaderSplat.uniform("color","vec3",[.05,.05,.05]),this._shaderSplat.uniform("uIsVelocity","float",0),this._fboDensity.read.texture.bind(0),r.GL.draw(this.mesh),this._fboDensity.write.unbind(),this._fboDensity.swap()}update(){this.advect(this._fboVelocity.write,this._fboVelocity.read.texture,c.VELOCITY_DISSIPATION),this._fboVelocity.swap(),this.advect(this._fboDensity.write,this._fboDensity.read.texture,c.DENSITY_DISSIPATION),this._fboDensity.swap(),this._drawDivergence.uniformTexture("textureVel",this._fboVelocity.read.texture,0).draw(),this._drawClear.bindFrameBuffer(this._fboPressure.write).uniformTexture("texturePressure",this._fboPressure.read.texture,0).draw(),this._fboPressure.swap();for(let e=0;e<c.PRESSURE_ITERATIONS;e++)this._drawJacobi.bindFrameBuffer(this._fboPressure.write).uniformTexture("texturePressure",this._fboPressure.read.texture,0).uniformTexture("textureDivergence",this._fboDivergence.texture,1).draw(),this._fboPressure.swap();this._drawGradient.bindFrameBuffer(this._fboVelocity.write).uniformTexture("texturePressure",this._fboPressure.read.texture,0).uniformTexture("textureVel",this._fboVelocity.read.texture,1).draw(),this._fboVelocity.swap()}get velocity(){return this._fboVelocity.read.texture}get density(){return this._fboDensity.read.texture}get divergence(){return this._fboDivergence.texture}get pressure(){return this._fboPressure.read.texture}get allTextures(){return[this.velocity,this.density,this.divergence,this.pressure]}},R="// basic.vert\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\nattribute vec4 aPosOffset;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nuniform float uOffset;\nuniform float uZOffset;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\nvarying vec2 vUVOffset;\n\nvec2 rotate(vec2 v, float a) {\n    float c = cos(a);\n    float s = sin(a);\n\n    mat2 m = mat2(c, s, -s, c);\n    return m * v;\n}\n\n#define PI 3.141592653\n\nvoid main(void) {\n    bool isFront = aVertexPosition.z > 0.0;\n    float a;\n\n    if(isFront) {\n        a = smoothstep(0.0, 0.5, uOffset);\n    } else {\n        a = smoothstep(0.5, 1.0, uOffset);\n    }\n    a *= PI;\n\n    vec3 pos     = aVertexPosition;\n         pos.yz  = rotate(pos.yz, a);\n         pos.xy += aPosOffset.xy;\n         pos.z  += uZOffset;\n\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(pos, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vNormal       = aNormal;\n    vUVOffset     = aPosOffset.zw;\n}",g="#define NUM 8.0\n#define BLACK vec4(0.0, 0.0, 0.0, 1.0)\n\nprecision highp float;\n#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nvarying vec2 vUVOffset;\nuniform sampler2D texture;\nuniform sampler2D textureMap;\n\nfloat contrast(float mValue, float mScale) {\n    return (mValue - 0.5) * mScale + 0.5;\n}\n\nvec2 contrast(vec2 mValue, float mScale) {\n    return vec2(contrast(mValue.x, mScale), contrast(mValue.y, mScale));\n}\n\nvoid main(void) {\n\n    float grey = texture2D(textureMap, vUVOffset).r;\n\n    vec2 uv = contrast(vTextureCoord, 1.1);\n    float mx = step(abs(uv.x - 0.5), 0.5);\n    float my = step(abs(uv.y - 0.5), 0.5);\n\n    float index = 10.0;\n    index = floor(grey * NUM * NUM);\n    float dx = mod(index, NUM)/NUM;\n    float dy = floor(index / NUM) / NUM;\n    uv = uv / NUM + vec2(dx, dy);\n\n    if(gl_FrontFacing) {\n        vec4 bg = vec4(vec3(grey), 1.0);\n        gl_FragColor = texture2D(texture, uv) * mx * my;\n        gl_FragColor.rgb *= mix(grey, 1.0, .5);\n        // gl_FragColor = mix(bg, gl_FragColor, .5);\n    } else {\n        gl_FragColor = BLACK;\n    }\n}";const M=.1;var x=class extends i.a.Draw{constructor(){super(),this.z=0;const{PLANE_SIZE:e}=c,t=e/M/2,n=-t/2*M*2+M,r=[],a=[];for(let e=0;e<t;e++)for(let i=0;i<t;i++){const o=n+e*M*2,u=n+i*M*2,s=e/t,c=i/t;r.push([o,u,s,c]),a.push([Math.random(),Math.random()])}const o=.995*M,u=[],l=[],f=[],h=.001;let _=0;u.push([-o,o,h]),u.push([o,o,h]),u.push([o,0,h]),u.push([-o,0,h]),l.push([0,0]),l.push([1,0]),l.push([1,.5]),l.push([0,.5]),f.push(4*_+0),f.push(4*_+1),f.push(4*_+2),f.push(4*_+0),f.push(4*_+2),f.push(4*_+3),_++,u.push([-o,0,0]),u.push([o,0,0]),u.push([o,o,0]),u.push([-o,o,0]),l.push([0,.5]),l.push([1,.5]),l.push([1,1]),l.push([0,1]),f.push(4*_+0),f.push(4*_+1),f.push(4*_+2),f.push(4*_+0),f.push(4*_+2),f.push(4*_+3),_++,this._offset=new i.a.EaseNumber(0),this.createMesh().bufferVertex(u).bufferTexCoord(l).bufferIndex(f).bufferInstance(r,"aPosOffset").useProgram(R,g).uniformTexture("texture",s.get("chars"),0)}draw(){this.uniform("uOffset","float",this._offset.value).uniform("uZOffset","float",this.z),super.draw()}open(){this._offset.value=.5}close(){this._offset.value=1}reset(e=!1){this._offset.setTo(e?1:0)}};var A=class{constructor(){this._draws=[new x,new x],this._draws[0].reset(),this._draws[1].reset(!0)}swap(){this._draws=this._draws.reverse()}open(e){this.curr.reset(),this.curr.uniformTexture("textureMap",e,1),this.curr.open(),this.prev.close(),setTimeout(()=>{this.curr.z=.01,this.prev.z=0,this.swap()},200)}render(){this._draws.forEach(e=>e.draw())}get curr(){return this._draws[0]}get prev(){return this._draws[1]}},P="// basic.vert\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\nattribute vec4 aPosOffset;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\nvarying vec2 vUV;\n\nvoid main(void) {\n    vec3 pos            = aVertexPosition;\n         pos.xy        += aPosOffset.xy;\n         gl_Position    = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(pos, 1.0);\n         vTextureCoord  = aTextureCoord;\n         vNormal        = aNormal;\n         vUV            = aPosOffset.zw;\n}",O="// copy.frag\n#define NUM 8.0\n\nprecision highp float;\n#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nvarying vec2 vUV;\nuniform sampler2D texture;\nuniform sampler2D textureCurr;\nuniform sampler2D texturePrev;\nuniform float uPercent;\n\nfloat contrast(float mValue, float mScale) {\n    return (mValue - 0.5) * mScale + 0.5;\n}\n\nvec2 contrast(vec2 mValue, float mScale) {\n    return vec2(contrast(mValue.x, mScale), contrast(mValue.y, mScale));\n}\n\nvec4 getColor(float grey) {\n    vec2  uv         = contrast(vTextureCoord, 1.0);\n    float mx         = step(abs(uv.x - 0.5), 0.5);\n    float my         = step(abs(uv.y - 0.5), 0.5);\n    float index      = floor(grey * NUM * NUM);\n    float dx         = mod(index, NUM)/NUM;\n    float dy         = floor(index / NUM) / NUM;\n          uv         = uv / NUM + vec2(dx, dy);\n    vec4  color      = texture2D(texture, uv) * mx * my;\n          color.rgb *= mix(1.0, grey, .5);\n    return color;\n}\n\nvoid main(void) {\n    float curr = texture2D(textureCurr, vUV).r;\n    float prev = texture2D(texturePrev, vUV).r;\n\n    vec4 colorCurr = getColor(curr);\n    vec4 colorPrev = getColor(prev);\n\n    float t     = step(1.0 - vTextureCoord.y, uPercent);\n    vec4  color = mix(colorCurr, colorPrev, t);\n\n    gl_FragColor = color;\n}";const w=.1;var S=class extends i.a.Draw{constructor(){super();const{PLANE_SIZE:e}=c,t=e/w/2,n=-t/2*w*2+w,r=2*w,a=[],o=[];for(let e=0;e<t;e++)for(let r=0;r<t;r++){const i=n+e*w*2,u=n+r*w*2,s=e/t,c=r/t;a.push([i,u,s,c]),o.push([Math.random(),Math.random()])}this.setMesh(i.a.Geom.plane(r,r,1)).useProgram(P,O).bufferInstance(a,"aPosOffset").uniformTexture("texture",s.get("chars"),0)}};const L=(e,t)=>{const{innerWidth:n,innerHeight:i}=window;e=e||n,t=t||i,r.GL.setSize(e,t);let a=Math.min(e,n),o=Math.min(t,i);const u=n/e,s=i/t,c=Math.min(u,s);a=e*c,o=t*c,r.GL.canvas.style.width=`${a}px`,r.GL.canvas.style.height=`${o}px`},I=5;var N=class extends r.Scene{constructor(){super(),this.camera.setPerspective(Math.PI/4,r.GL.aspectRatio,1,50),r.GL.enableAlphaBlending(),this.orbitalControl.ry.limit(-1.2,1.2),this.orbitalControl.radius.value=7,this.orbitalControl.radius.limit(3,15),this.cameraFront=new i.a.CameraPerspective,this.cameraFront.setPerspective(45*Math.PI/180,r.GL.aspectRatio,.1,100),this.cameraFront.lookAt([0,0,5],[0,0,0]),this._count=0,this.resize()}_initTextures(){const e=c.TEXTURE_SIZE;this._fbo=new i.a.FboPingPong(e,e)}testOpen(){this._board.open(this._isWen?s.get("liquid"):s.get("wen")),this._isWen=!this._isWen}_initViews(){this._bAxis=new i.a.BatchAxis,this._bCopy=new i.a.BatchCopy,this._fluid=new y(this.camera),this._board=new A,this._drawSquare=new S;const e=c.PLANE_SIZE;this._draw=(new i.a.Draw).setMesh(i.a.Geom.plane(e,e,1)).useProgram(i.a.ShaderLibs.basicVert,i.a.ShaderLibs.copyFrag)}update(){this._fluid.update(),this._count++>=I&&(this._fbo.read.bind(),r.GL.clear(0,0,0,0),this._bCopy.draw(this._fluid.density),this._fbo.read.unbind(),this._board.open(this._fbo.read.texture),this._fbo.swap(),this._count=0)}render(){r.GL.clear(0,0,0,1),r.GL.viewport(0,0,r.GL.width,r.GL.height),r.GL.setMatrices(this.camera),this._draw.uniformTexture("texture",this._fluid.density,0),r.GL.disable(r.GL.DEPTH_TEST),this._drawSquare.uniformTexture("textureCurr",this._fbo.read.texture,1).uniformTexture("texturePrev",this._fbo.write.texture,2).uniform("uPercent","float",this._count/I).draw(),r.GL.enable(r.GL.DEPTH_TEST)}resize(e,t){L(e,t),this.camera.setAspectRatio(r.GL.aspectRatio),this.cameraFront.setAspectRatio(r.GL.aspectRatio)}},C=n(3),F=n.n(C);function U(){if(a.length>0){document.body.classList.add("isLoading");new F.a({assets:a}).on("error",e=>{console.log("Error :",e)}).on("progress",e=>{const t=document.body.querySelector(".Loading-Bar");t&&(t.style.width=`${100*e}%`)}).on("complete",D).start()}else B()}function D(e){console.log("Image Loaded : ",e),window.assets=e;const t=document.body.querySelector(".Loading-Bar");console.log("Loader :",t),t.style.width="100%",B(),setTimeout(()=>{document.body.classList.remove("isLoading")},250)}function B(){const e=document.createElement("canvas"),t=document.body.querySelector(".container");e.className="Main-Canvas",t.appendChild(e),r.GL.init(e,{ignoreWebgl2:!0,alpha:!1,preserveDrawingBuffer:!0}),s.init();new N;window.addEventListener("keydown",e=>{32===e.keyCode&&(params.type=(params.type+1)%3)})}document.body?U():window.addEventListener("DOMContentLoaded",U),window.params={gamma:2.2,exposure:5,highSetting:!0,cap:5,height:2,type:0}}]);